var B1=Object.defineProperty,j1=Object.defineProperties,H1=Object.getOwnPropertyDescriptors,QN=Object.getOwnPropertySymbols,$1=Object.prototype.hasOwnProperty,G1=Object.prototype.propertyIsEnumerable,JN=(qe,ge,P)=>ge in qe?B1(qe,ge,{enumerable:!0,configurable:!0,writable:!0,value:P}):qe[ge]=P,XN=(qe,ge)=>{for(var P in ge||(ge={}))$1.call(ge,P)&&JN(qe,P,ge[P]);if(QN)for(var P of QN(ge))G1.call(ge,P)&&JN(qe,P,ge[P]);return qe},eO=(qe,ge)=>j1(qe,H1(ge));(self.webpackChunkfinal_task=self.webpackChunkfinal_task||[]).push([[179],{8255:qe=>{function ge(P){return Promise.resolve().then(()=>{var p=new Error("Cannot find module '"+P+"'");throw p.code="MODULE_NOT_FOUND",p})}ge.keys=()=>[],ge.resolve=ge,ge.id=8255,qe.exports=ge},3018:(qe,ge,P)=>{"use strict";P.d(ge,{deG:()=>hl,tb:()=>dm,AFp:()=>oT,ip1:()=>cb,CZH:()=>$c,hGG:()=>wm,z2F:()=>xf,sBO:()=>JC,Sil:()=>pm,_Vd:()=>tr,EJc:()=>Q_,SBq:()=>an,qLn:()=>go,vpe:()=>Mi,gxx:()=>Ic,tBr:()=>cc,XFs:()=>Qe,OlP:()=>wn,zs3:()=>In,ZZ4:()=>kc,aQg:()=>E_,soG:()=>hm,YKP:()=>nD,v3s:()=>Db,h0i:()=>rd,PXZ:()=>qx,R0b:()=>_s,FiY:()=>fo,Lbi:()=>Z_,g9A:()=>_d,Qsj:()=>xg,FYo:()=>Sg,JOm:()=>hs,Tiy:()=>Ha,q3G:()=>Sn,tp0:()=>Ma,EAV:()=>Rf,Rgc:()=>Lg,dDg:()=>Eb,DyG:()=>xa,q4F:()=>xu,GfV:()=>Ng,s_b:()=>Ug,ifc:()=>Rt,eFA:()=>yT,G48:()=>Bx,Gpc:()=>pe,X6Q:()=>ym,_c5:()=>RT,VLi:()=>Ux,c2e:()=>Y_,zSh:()=>Pl,wAp:()=>dt,vHH:()=>De,EiD:()=>dp,mCW:()=>vl,qzn:()=>Zr,JVY:()=>Km,pB0:()=>sp,eBb:()=>Nv,L6k:()=>Ym,LAX:()=>dc,cg1:()=>zh,Tjo:()=>Pb,kL8:()=>ja,yhl:()=>lc,dqk:()=>Ke,sIi:()=>Jp,CqO:()=>GE,QGY:()=>Yy,F4k:()=>Qy,RDi:()=>ji,AaK:()=>K,z3N:()=>Ps,qOj:()=>ME,TTD:()=>Ui,_Bn:()=>$C,xp6:()=>IA,uIk:()=>kE,ekj:()=>Uh,Suo:()=>Ou,Xpm:()=>ze,lG2:()=>la,Yz7:()=>vt,cJS:()=>Es,oAB:()=>Dn,Yjl:()=>Co,Y36:()=>Fh,_UZ:()=>ag,qZA:()=>Nr,TgZ:()=>yr,EpF:()=>qI,n5z:()=>as,Ikx:()=>i_,LFG:()=>dn,$8M:()=>xs,NdJ:()=>ug,CRH:()=>gd,oxw:()=>zE,Q6J:()=>sg,iGM:()=>rm,MAs:()=>Du,CHM:()=>su,LSH:()=>po,kYT:()=>Ut,YNc:()=>ng,_uU:()=>vg,Oqu:()=>Hl});var p=P(9765),X=P(5319),L=P(7574),ae=P(6682),re=P(2441);var ce=P(1307);function te(){return new p.xQ}function V(i){for(let s in i)if(i[s]===V)return s;throw Error("Could not find renamed property on target object.")}function Y(i,s){for(const o in s)s.hasOwnProperty(o)&&!i.hasOwnProperty(o)&&(i[o]=s[o])}function K(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(K).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function le(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const we=V({__forward_ref__:V});function pe(i){return i.__forward_ref__=pe,i.toString=function(){return K(this())},i}function he(i){return Ae(i)?i():i}function Ae(i){return"function"==typeof i&&i.hasOwnProperty(we)&&i.__forward_ref__===pe}class De extends Error{constructor(s,o){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,o)),this.code=s}}function Be(i){return"string"==typeof i?i:null==i?"":String(i)}function Ft(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Be(i)}function je(i,s){const o=s?` in ${s}`:"";throw new De("201",`No provider for ${Ft(i)} found${o}`)}function fn(i,s){null==i&&function(i,s,o,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function vt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Es(i){return{providers:i.providers||[],imports:i.imports||[]}}function Un(i){return Br(i,cn)||Br(i,Qs)}function Br(i,s){return i.hasOwnProperty(s)?i[s]:null}function Cn(i){return i&&(i.hasOwnProperty(vn)||i.hasOwnProperty(bs))?i[vn]:null}const cn=V({\u0275prov:V}),vn=V({\u0275inj:V}),Qs=V({ngInjectableDef:V}),bs=V({ngInjectorDef:V});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let jr;function ei(i){const s=jr;return jr=i,s}function pn(i,s,o){const u=Un(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Qe.Optional?null:void 0!==s?s:void je(K(i),"Injector")}function tt(i){return{toString:i}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),Rt=(()=>((Rt=Rt||{})[Rt.Emulated=0]="Emulated",Rt[Rt.None=2]="None",Rt[Rt.ShadowDom=3]="ShadowDom",Rt))();const Yt="undefined"!=typeof globalThis&&globalThis,Io="undefined"!=typeof window&&window,ln="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ke=Yt||"undefined"!=typeof global&&global||Io||ln,ve={},Re=[],Et=V({\u0275cmp:V}),Tt=V({\u0275dir:V}),Wt=V({\u0275pipe:V}),$=V({\u0275mod:V}),j=V({\u0275loc:V}),W=V({\u0275fac:V}),me=V({__NG_ELEMENT_ID__:V});let se=0;function ze(i){return tt(()=>{const o={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Re,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Rt.Emulated,id:"c",styles:i.styles||Re,_:null,setInput:null,schemas:i.schemas||null,tView:null},l=i.directives,d=i.features,m=i.pipes;return u.id+=se++,u.inputs=lr(i.inputs,o),u.outputs=lr(i.outputs),d&&d.forEach(v=>v(u)),u.directiveDefs=l?()=>("function"==typeof l?l():l).map(tn):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Wn):null,u})}function tn(i){return kn(i)||function(i){return i[Tt]||null}(i)}function Wn(i){return function(i){return i[Wt]||null}(i)}const Zn={};function Dn(i){return tt(()=>{const s={type:i.type,bootstrap:i.bootstrap||Re,declarations:i.declarations||Re,imports:i.imports||Re,exports:i.exports||Re,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Zn[i.id]=i.type),s})}function Ut(i,s){return tt(()=>{const o=Kn(i,!0);o.declarations=s.declarations||Re,o.imports=s.imports||Re,o.exports=s.exports||Re})}function lr(i,s){if(null==i)return ve;const o={};for(const u in i)if(i.hasOwnProperty(u)){let l=i[u],d=l;Array.isArray(l)&&(d=l[1],l=l[0]),o[l]=u,s&&(s[l]=d)}return o}const la=ze;function Co(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function kn(i){return i[Et]||null}function Kn(i,s){const o=i[$]||null;if(!o&&!0===s)throw new Error(`Type ${K(i)} does not have '\u0275mod' property.`);return o}function ns(i){return Array.isArray(i)&&"object"==typeof i[1]}function Tn(i){return Array.isArray(i)&&!0===i[1]}function Vu(i){return 0!=(8&i.flags)}function Uu(i){return 2==(2&i.flags)}function ws(i){return 1==(1&i.flags)}function yi(i){return null!==i.template}function Qc(i){return 0!=(512&i[2])}function qr(i,s){return i.hasOwnProperty(W)?i[W]:null}class rs{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ui(){return tu}function tu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Bf),Fd}function Fd(){const i=nu(this),s=null==i?void 0:i.current;if(s){const o=i.previous;if(o===ve)i.previous=s;else for(let u in s)o[u]=s[u];i.current=null,this.ngOnChanges(s)}}function Bf(i,s,o,u){const l=nu(i)||function(i,s){return i[el]=s}(i,{previous:ve,current:null}),d=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],b=m[v];d[v]=new rs(b&&b.currentValue,s,m===ve),i[u]=s}Ui.ngInherit=!0;const el="__ngSimpleChanges__";function nu(i){return i[el]||null}let ga;function ji(i){ga=i}function Jt(i){return!!i.listen}const Is={createRenderer:(i,s)=>void 0!==ga?ga:"undefined"!=typeof document?document:void 0};function Vt(i){for(;Array.isArray(i);)i=i[0];return i}function Cs(i,s){return Vt(s[i])}function ti(i,s){return Vt(s[i.index])}function Ds(i,s){return i.data[s]}function ir(i,s){const o=s[i];return ns(o)?o:o[0]}function Dr(i){return 4==(4&i[2])}function ru(i){return 128==(128&i[2])}function is(i,s){return null==s?null:i[s]}function xo(i){i[18]=0}function iu(i,s){i[5]+=s;let o=i,u=i[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const ft={lFrame:ba(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ma(){return ft.bindingsEnabled}function Ee(){return ft.lFrame.lView}function jt(){return ft.lFrame.tView}function su(i){return ft.lFrame.contextLView=i,i[8]}function yn(){let i=Gu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Gu(){return ft.lFrame.currentTNode}function _i(i,s){const o=ft.lFrame;o.currentTNode=i,o.isParent=s}function ya(){return ft.lFrame.isParent}function _a(){return ft.isInCheckNoChangesMode}function ss(i){ft.isInCheckNoChangesMode=i}function io(){return ft.lFrame.bindingIndex++}function il(i,s){const o=ft.lFrame;o.bindingIndex=o.bindingRootIndex=i,ou(s)}function ou(i){ft.lFrame.currentDirectiveIndex=i}function Hd(){return ft.lFrame.currentQueryIndex}function Wu(i){ft.lFrame.currentQueryIndex=i}function Hf(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Zu(i,s,o){if(o&Qe.SkipSelf){let l=s,d=i;for(;!(l=l.parent,null!==l||o&Qe.Host||(l=Hf(d),null===l||(d=d[15],10&l.type))););if(null===l)return!1;s=l,i=d}const u=ft.lFrame=$d();return u.currentTNode=s,u.lView=i,!0}function ko(i){const s=$d(),o=i[1];ft.lFrame=s,s.currentTNode=o.firstChild,s.lView=i,s.tView=o,s.contextLView=i,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function $d(){const i=ft.lFrame,s=null===i?null:i.child;return null===s?ba(i):s}function ba(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function sl(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Fm=sl;function Ku(){const i=sl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wr(){return ft.lFrame.selectedIndex}function ni(i){ft.lFrame.selectedIndex=i}function bn(){const i=ft.lFrame;return Ds(i.tView,i.selectedIndex)}function wa(i,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const d=i.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:b,ngAfterViewChecked:C,ngOnDestroy:S}=d;m&&(i.contentHooks||(i.contentHooks=[])).push(-o,m),v&&((i.contentHooks||(i.contentHooks=[])).push(o,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(o,v)),b&&(i.viewHooks||(i.viewHooks=[])).push(-o,b),C&&((i.viewHooks||(i.viewHooks=[])).push(o,C),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(o,C)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(o,S)}}function Yu(i,s,o){Qu(i,s,3,o)}function ol(i,s,o,u){(3&i[2])===o&&Qu(i,s,o,u)}function cu(i,s){let o=i[2];(3&o)===s&&(o&=2047,o+=1,i[2]=o)}function Qu(i,s,o,u){const d=null!=u?u:-1,m=s.length-1;let v=0;for(let b=void 0!==u?65535&i[18]:0;b<m;b++)if("number"==typeof s[b+1]){if(v=s[b],null!=u&&v>=u)break}else s[b]<0&&(i[18]+=65536),(v<d||-1==d)&&(al(i,o,s,b),i[18]=(4294901760&i[18])+b+2),b++}function al(i,s,o,u){const l=o[u]<0,d=o[u+1],v=i[l?-o[u]:o[u]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{d.call(v)}finally{}}}else try{d.call(v)}finally{}}class Ia{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function lu(i,s,o){const u=Jt(i);let l=0;for(;l<o.length;){const d=o[l];if("number"==typeof d){if(0!==d)break;l++;const m=o[l++],v=o[l++],b=o[l++];u?i.setAttribute(s,v,b,m):s.setAttributeNS(m,v,b)}else{const m=d,v=o[++l];Zf(m)?u&&i.setProperty(s,m,v):u?i.setAttribute(s,m,v):s.setAttribute(m,v),l++}}return l}function Ju(i){return 3===i||4===i||6===i}function Zf(i){return 64===i.charCodeAt(0)}function Xu(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||Kf(i,o,l,null,-1===o||2===o?s[++u]:null)}}return i}function Kf(i,s,o,u,l){let d=0,m=i.length;if(-1===s)m=-1;else for(;d<i.length;){const v=i[d++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=d-1;break}}}for(;d<i.length;){const v=i[d];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(i[d+1]=l));if(u===i[d+1])return void(i[d+2]=l)}d++,null!==u&&d++,null!==l&&d++}-1!==m&&(i.splice(m,0,s),d=m+1),i.splice(d++,0,o),null!==u&&i.splice(d++,0,u),null!==l&&i.splice(d++,0,l)}function Ca(i){return-1!==i}function $i(i){return 32767&i}function du(i,s){let o=function(i){return i>>16}(i),u=s;for(;o>0;)u=u[15],o--;return u}let ec=!0;function cl(i){const s=ec;return ec=i,s}let ht=0;function Fo(i,s){const o=tc(i,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Tr(u.data,i),Tr(s,null),Tr(u.blueprint,null));const l=so(i,s),d=i.injectorIndex;if(Ca(l)){const m=$i(l),v=du(l,s),b=v[1].data;for(let C=0;C<8;C++)s[d+C]=v[m+C]|b[m+C]}return s[d+8]=l,d}function Tr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function tc(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function so(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){const d=l[1],m=d.type;if(u=2===m?d.declTNode:1===m?l[6]:null,null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function Ar(i,s,o){!function(i,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(me)&&(u=o[me]),null==u&&(u=o[me]=ht++);const l=255&u;s.data[i+(l>>5)]|=1<<l}(i,s,o)}function Kd(i,s,o){if(o&Qe.Optional)return i;je(s,"NodeInjector")}function Ss(i,s,o,u){if(o&Qe.Optional&&void 0===u&&(u=null),0==(o&(Qe.Self|Qe.Host))){const l=i[9],d=ei(void 0);try{return l?l.get(s,u,o&Qe.Optional):pn(s,u,o&Qe.Optional)}finally{ei(d)}}return Kd(u,s,o)}function Sr(i,s,o,u=Qe.Default,l){if(null!==i){const d=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(me)?i[me]:void 0;return"number"==typeof s?s>=0?255&s:Lo:s}(o);if("function"==typeof d){if(!Zu(s,i,u))return u&Qe.Host?Kd(l,o,u):Ss(s,o,u,l);try{const m=d(u);if(null!=m||u&Qe.Optional)return m;je(o)}finally{Fm()}}else if("number"==typeof d){let m=null,v=tc(i,s),b=-1,C=u&Qe.Host?s[16][6]:null;for((-1===v||u&Qe.SkipSelf)&&(b=-1===v?so(i,s):s[v+8],-1!==b&&oo(u,!1)?(m=s[1],v=$i(b),s=du(b,s)):v=-1);-1!==v;){const S=s[1];if(rc(d,v,S.data)){const N=Qd(v,s,o,m,u,C);if(N!==Yd)return N}b=s[v+8],-1!==b&&oo(u,s[1].data[v+8]===C)&&rc(d,v,s)?(m=S,v=$i(b),s=du(b,s)):v=-1}}}return Ss(s,o,u,l)}const Yd={};function Lo(){return new os(yn(),Ee())}function Qd(i,s,o,u,l,d){const m=s[1],v=m.data[i+8],S=Xt(v,m,o,null==u?Uu(v)&&ec:u!=m&&0!=(3&v.type),l&Qe.Host&&d===v);return null!==S?Da(s,m,S,v):Yd}function Xt(i,s,o,u,l){const d=i.providerIndexes,m=s.data,v=1048575&d,b=i.directiveStart,S=d>>20,k=l?v+S:i.directiveEnd;for(let H=u?v:v+S;H<k;H++){const z=m[H];if(H<b&&o===z||H>=b&&z.type===o)return H}if(l){const H=m[b];if(H&&yi(H)&&H.type===o)return b}return null}function Da(i,s,o,u){let l=i[o];const d=s.data;if(function(i){return i instanceof Ia}(l)){const m=l;m.resolving&&function(i,s){throw new De("200",`Circular dependency in DI detected for ${i}`)}(Ft(d[o]));const v=cl(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?ei(m.injectImpl):null;Zu(i,u,Qe.Default);try{l=i[o]=m.factory(void 0,d,i,u),s.firstCreatePass&&o>=u.directiveStart&&function(i,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:d}=s.type.prototype;if(u){const m=tu(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(i,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-i,l),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(i,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(i,d))}(o,d[o],s)}finally{null!==b&&ei(b),cl(v),m.resolving=!1,Fm()}}return l}function rc(i,s,o){return!!(o[s+(i>>5)]&1<<i)}function oo(i,s){return!(i&Qe.Self||i&Qe.Host&&s)}class os{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Sr(this._tNode,this._lView,s,u,o)}}function as(i){return tt(()=>{const s=i.prototype.constructor,o=s[W]||ao(s),u=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==u;){const d=l[W]||ao(l);if(d&&d!==o)return d;l=Object.getPrototypeOf(l)}return d=>new d})}function ao(i){return Ae(i)?()=>{const s=ao(he(i));return s&&s()}:qr(i)}function xs(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const o=i.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const d=o[l];if(Ju(d))break;if(0===d)l+=2;else if("number"==typeof d)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(d===s)return o[l+1];l+=2}}}return null}(yn(),i)}const Vo="__parameters__";function Gi(i,s,o){return tt(()=>{const u=function(i){return function(...o){if(i){const u=i(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...d){if(this instanceof l)return u.apply(this,d),this;const m=new l(...d);return v.annotation=m,v;function v(b,C,S){const N=b.hasOwnProperty(Vo)?b[Vo]:Object.defineProperty(b,Vo,{value:[]})[Vo];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(m),b}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class wn{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=vt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hl=new wn("AnalyzeForEntryComponents"),xa=Function;function qi(i,s){void 0===s&&(s=i);for(let o=0;o<i.length;o++){let u=i[o];Array.isArray(u)?(s===i&&(s=i.slice(0,o)),qi(u,s)):s!==i&&s.push(u)}return s}function cs(i,s){i.forEach(o=>Array.isArray(o)?cs(o,s):s(o))}function sc(i,s,o){s>=i.length?i.push(o):i.splice(s,0,o)}function jo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Ei(i,s,o){let u=Rr(i,s);return u>=0?i[1|u]=o:(u=~u,function(i,s,o,u){let l=i.length;if(l==s)i.push(o,u);else if(1===l)i.push(u,i[0]),i[0]=o;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=o,i[s+1]=u}}(i,u,s,o)),u}function oc(i,s){const o=Rr(i,s);if(o>=0)return i[1|o]}function Rr(i,s){return function(i,s,o){let u=0,l=i.length>>o;for(;l!==u;){const d=u+(l-u>>1),m=i[d<<o];if(s===m)return d<<o;m>s?l=d:u=d+1}return~(l<<o)}(i,s,1)}const st={},bt="__NG_DI_FLAG__",At="ngTempTokenPath",$n=/\n/gm,co="__source",zi=V({provide:String,useValue:V});let Os;function lo(i){const s=Os;return Os=i,s}function ks(i,s=Qe.Default){if(void 0===Os)throw new Error("inject() must be called from an injection context");return null===Os?pn(i,void 0,s):Os.get(i,s&Qe.Optional?null:void 0,s)}function dn(i,s=Qe.Default){return(jr||ks)(he(i),s)}function ho(i){const s=[];for(let o=0;o<i.length;o++){const u=he(i[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let l,d=Qe.Default;for(let m=0;m<u.length;m++){const v=u[m],b=lw(v);"number"==typeof b?-1===b?l=v.token:d|=b:l=v}s.push(dn(l,d))}else s.push(dn(u))}return s}function Ra(i,s){return i[bt]=s,i.prototype[bt]=s,i}function lw(i){return i[bt]}function Qn(i,s,o,u){const l=i[At];throw s[co]&&l.unshift(s[co]),i.message=function(i,s,o,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let l=K(s);if(Array.isArray(s))l=s.map(K).join(" -> ");else if("object"==typeof s){let d=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];d.push(m+":"+("string"==typeof v?JSON.stringify(v):K(v)))}l=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${i.replace($n,"\n  ")}`}("\n"+i.message,l,o,u),i.ngTokenPath=l,i[At]=null,i}const cc=Ra(Gi("Inject",i=>({token:i})),-1),fo=Ra(Gi("Optional"),8),Ma=Ra(Gi("SkipSelf"),4);let $o;function Oa(i){var s;return(null===(s=function(){if(void 0===$o&&($o=null,Ke.trustedTypes))try{$o=Ke.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return $o}())||void 0===s?void 0:s.createHTML(i))||i}class yu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xv extends yu{getTypeName(){return"HTML"}}class Rv extends yu{getTypeName(){return"Style"}}class Mv extends yu{getTypeName(){return"Script"}}class Zm extends yu{getTypeName(){return"URL"}}class ip extends yu{getTypeName(){return"ResourceURL"}}function Ps(i){return i instanceof yu?i.changingThisBreaksApplicationSecurity:i}function Zr(i,s){const o=lc(i);if(null!=o&&o!==s){if("ResourceURL"===o&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===s}function lc(i){return i instanceof yu&&i.getTypeName()||null}function Km(i){return new xv(i)}function Ym(i){return new Rv(i)}function Nv(i){return new Mv(i)}function dc(i){return new Zm(i)}function sp(i){return new ip(i)}class oh{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const o=(new window.DOMParser).parseFromString(Oa(s),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(s):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Jm{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(s){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Oa(s),o;const u=this.inertDocument.createElement("body");return u.innerHTML=Oa(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const o=s.attributes;for(let l=o.length-1;0<l;l--){const m=o.item(l).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const ah=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vl(i){return(i=String(i)).match(ah)||i.match(_l)?i:"unsafe:"+i}function Fs(i){const s={};for(const o of i.split(","))s[o]=!0;return s}function _u(...i){const s={};for(const o of i)for(const u in o)o.hasOwnProperty(u)&&(s[u]=!0);return s}const ey=Fs("area,br,col,hr,img,wbr"),ap=Fs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fc=Fs("rp,rt"),ch=_u(ey,_u(ap,Fs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_u(fc,Fs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_u(fc,ap)),up=Fs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pc=Fs("srcset"),Pa=_u(up,pc,Fs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ny=Fs("script,style,template");class lh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let o=s.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let l=this.checkClobberedElement(o,o.nextSibling);if(l){o=l;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(s){const o=s.nodeName.toLowerCase();if(!ch.hasOwnProperty(o))return this.sanitizedSomething=!0,!ny.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=s.attributes;for(let l=0;l<u.length;l++){const d=u.item(l),m=d.name,v=m.toLowerCase();if(!Pa.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let b=d.value;up[v]&&(b=vl(b)),pc[v]&&(i=b,b=(i=String(i)).split(",").map(s=>vl(s.trim())).join(", ")),this.buf.push(" ",m,'="',dh(b),'"')}var i;return this.buf.push(">"),!0}endElement(s){const o=s.nodeName.toLowerCase();ch.hasOwnProperty(o)&&!ey.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(s){this.buf.push(dh(s))}checkClobberedElement(s,o){if(o&&(s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return o}}const cp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lp=/([^\#-~ |!])/g;function dh(i){return i.replace(/&/g,"&amp;").replace(cp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(lp,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let El;function dp(i,s){let o=null;try{El=El||function(i){const s=new Jm(i);return function(){try{return!!(new window.DOMParser).parseFromString(Oa(""),"text/html")}catch(i){return!1}}()?new oh(s):s}(i);let u=s?String(s):"";o=El.getInertBodyElement(u);let l=5,d=u;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,u=d,d=o.innerHTML,o=El.getInertBodyElement(u)}while(u!==d);return Oa((new lh).sanitizeChildren(bl(o)||o))}finally{if(o){const u=bl(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function bl(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function po(i){const s=function(){const i=Ee();return i&&i[12]}();return s?s.sanitize(Sn.URL,i)||"":Zr(i,"URL")?Ps(i):vl(Be(i))}const fh="__ngContext__";function hn(i,s){i[fh]=s}function Il(i){const s=function(i){return i[fh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function vc(i){return i.ngOriginalError}function ai(i,...s){i.error(...s)}class go{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s),u=this._findContext(s),l=(i=s)&&i.ngErrorLogger||ai;var i;l(this._console,"ERROR",s),o&&l(this._console,"ORIGINAL ERROR",o),u&&l(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(vc(s)):null}_findOriginalError(s){let o=s&&vc(s);for(;o&&vc(o);)o=vc(o);return o||null}}const bp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ke))();function gr(i){return i instanceof Function?i():i}var hs=(()=>((hs=hs||{})[hs.Important=1]="Important",hs[hs.DashCase=2]="DashCase",hs))();function Tp(i,s){return undefined(i,s)}function _(i){const s=i[3];return Tn(s)?s[3]:s}function E(i){return x(i[13])}function T(i){return x(i[4])}function x(i){for(;null!==i&&!Tn(i);)i=i[4];return i}function J(i,s,o,u,l){if(null!=u){let d,m=!1;Tn(u)?d=u:ns(u)&&(m=!0,u=u[0]);const v=Vt(u);0===i&&null!==o?null==l?gy(s,o,v):mo(s,o,v,l||null,!0):1===i&&null!==o?mo(s,o,v,l||null,!0):2===i?function(i,s,o){const u=my(i,s);u&&function(i,s,o,u){Jt(i)?i.removeChild(s,o,u):s.removeChild(o)}(i,u,s,o)}(s,v,m):3===i&&s.destroyNode(v),null!=d&&function(i,s,o,u,l){const d=o[7];d!==Vt(o)&&J(s,i,u,d,l);for(let v=10;v<o.length;v++){const b=o[v];Np(b[1],b,i,s,u,d)}}(s,i,d,o,l)}}function Ye(i,s,o){return Jt(i)?i.createElement(s,o):null===o?i.createElement(s):i.createElementNS(o,s)}function Ap(i,s){const o=i[9],u=o.indexOf(s),l=s[3];1024&s[2]&&(s[2]&=-1025,iu(l,-1)),o.splice(u,1)}function Sl(i,s){if(i.length<=10)return;const o=10+s,u=i[o];if(u){const l=u[17];null!==l&&l!==i&&Ap(l,u),s>0&&(i[o-1][4]=u[4]);const d=jo(i,10+s);!function(i,s){Np(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=d[19];null!==m&&m.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function Sp(i,s){if(!(256&s[2])){const o=s[11];Jt(o)&&o.destroyNode&&Np(i,s,o,3,null,null),function(i){let s=i[13];if(!s)return xl(i[1],i);for(;s;){let o=null;if(ns(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==i;)ns(s)&&xl(s[1],s),s=s[3];null===s&&(s=i),ns(s)&&xl(s[1],s),o=s&&s[4]}s=o}}(s)}}function xl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let o;if(null!=i&&null!=(o=i.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof Ia)){const d=o[u+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const v=l[d[m]],b=d[m+1];try{b.call(v)}finally{}}else try{d.call(l)}finally{}}}}(i,s),function(i,s){const o=i.cleanup,u=s[7];let l=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const m=o[d+1],v="function"==typeof m?m(s):Vt(s[m]),b=u[l=o[d+2]],C=o[d+3];"boolean"==typeof C?v.removeEventListener(o[d],b,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),d+=2}else{const m=u[l=o[d+1]];o[d].call(m)}if(null!==u){for(let d=l+1;d<u.length;d++)u[d]();s[7]=null}}(i,s),1===s[1].type&&Jt(s[11])&&s[11].destroy();const o=s[17];if(null!==o&&Tn(s[3])){o!==s[3]&&Ap(o,s);const u=s[19];null!==u&&u.detachView(i)}}}function Mr(i,s,o){return function(i,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=i.data[u.directiveStart].encapsulation;if(l===Rt.None||l===Rt.Emulated)return null}return ti(u,o)}(i,s.parent,o)}function mo(i,s,o,u,l){Jt(i)?i.insertBefore(s,o,u,l):s.insertBefore(o,u,l)}function gy(i,s,o){Jt(i)?i.appendChild(s,o):s.appendChild(o)}function Rp(i,s,o,u,l){null!==u?mo(i,s,o,u,l):gy(i,s,o)}function my(i,s){return Jt(i)?i.parentNode(s):s.parentNode}let Hv=function(i,s,o){return 40&i.type?ti(i,o):null};function Mp(i,s,o,u){const l=Mr(i,u,s),d=s[11],v=function(i,s,o){return Hv(i,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let b=0;b<o.length;b++)Rp(d,l,o[b],v,!1);else Rp(d,l,o,v,!1)}function wh(i,s){if(null!==s){const o=s.type;if(3&o)return ti(s,i);if(4&o)return bu(-1,i[s.index]);if(8&o){const u=s.child;if(null!==u)return wh(i,u);{const l=i[s.index];return Tn(l)?bu(-1,l):Vt(l)}}if(32&o)return Tp(s,i)()||Vt(i[s.index]);{const u=gA(i,s);return null!==u?Array.isArray(u)?u[0]:wh(_(i[16]),u):wh(i,s.next)}}return null}function gA(i,s){return null!==s?i[16][6].projection[s.projection]:null}function bu(i,s){const o=10+i+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return wh(u,l)}return s[7]}function zv(i,s,o,u,l,d,m){for(;null!=o;){const v=u[o.index],b=o.type;if(m&&0===s&&(v&&hn(Vt(v),u),o.flags|=4),64!=(64&o.flags))if(8&b)zv(i,s,o.child,u,l,d,!1),J(s,i,l,v,d);else if(32&b){const C=Tp(o,u);let S;for(;S=C();)J(s,i,l,S,d);J(s,i,l,v,d)}else 16&b?Wv(i,s,u,o,l,d):J(s,i,l,v,d);o=m?o.projectionNext:o.next}}function Np(i,s,o,u,l,d){zv(o,u,i.firstChild,s,l,d,!1)}function Wv(i,s,o,u,l,d){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let C=0;C<b.length;C++)J(s,i,l,b[C],d);else zv(i,s,b,m[3],l,d,!0)}function gw(i,s,o){Jt(i)?i.setAttribute(s,"style",o):s.style.cssText=o}function _y(i,s,o){Jt(i)?""===o?i.removeAttribute(s,"class"):i.setAttribute(s,"class",o):s.className=o}function mw(i,s,o){let u=i.length;for(;;){const l=i.indexOf(s,o);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const d=s.length;if(l+d===u||i.charCodeAt(l+d)<=32)return l}o=l+1}}const yw="ng-template";function Zv(i,s,o){let u=0;for(;u<i.length;){let l=i[u++];if(o&&"class"===l){if(l=i[u],-1!==mw(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<i.length&&"string"==typeof(l=i[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function _w(i){return 4===i.type&&i.value!==yw}function vA(i,s,o){return s===(4!==i.type||o?i.value:yw)}function vw(i,s,o){let u=4;const l=i.attrs||[],d=function(i){for(let s=0;s<i.length;s++)if(Ju(i[s]))return s;return i.length}(l);let m=!1;for(let v=0;v<s.length;v++){const b=s[v];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!vA(i,b,o)||""===b&&1===s.length){if(zo(u))return!1;m=!0}}else{const C=8&u?b:s[++v];if(8&u&&null!==i.attrs){if(!Zv(i.attrs,C,o)){if(zo(u))return!1;m=!0}continue}const N=XR(8&u?"class":b,l,_w(i),o);if(-1===N){if(zo(u))return!1;m=!0;continue}if(""!==C){let k;k=N>d?"":l[N+1].toLowerCase();const H=8&u?k:null;if(H&&-1!==mw(H,C,0)||2&u&&C!==k){if(zo(u))return!1;m=!0}}}}else{if(!m&&!zo(u)&&!zo(b))return!1;if(m&&zo(b))continue;m=!1,u=b|1&u}}return zo(u)||m}function zo(i){return 0==(1&i)}function XR(i,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let d=!1;for(;l<s.length;){const m=s[l];if(m===i)return l;if(3===m||6===m)d=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=d?1:2}return-1}return function(i,s){let o=i.indexOf(4);if(o>-1)for(o++;o<i.length;){const u=i[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,i)}function Kv(i,s,o=!1){for(let u=0;u<s.length;u++)if(vw(i,s[u],o))return!0;return!1}function bw(i,s){return i?":not("+s.trim()+")":s}function wA(i){let s=i[0],o=1,u=2,l="",d=!1;for(;o<i.length;){let m=i[o];if("string"==typeof m)if(2&u){const v=i[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!zo(m)&&(s+=bw(d,l),l=""),u=m,d=d||!zo(u);o++}return""!==l&&(s+=bw(d,l)),s}const pt={};function IA(i){Cw(jt(),Ee(),Wr()+i,_a())}function Cw(i,s,o,u){if(!u)if(3==(3&s[2])){const d=i.preOrderCheckHooks;null!==d&&Yu(s,d,o)}else{const d=i.preOrderHooks;null!==d&&ol(s,d,0,o)}ni(o)}function vy(i,s){return i<<17|s<<2}function yo(i){return i>>17&32767}function Qv(i){return 2|i}function Ls(i){return(131068&i)>>2}function Xn(i,s){return-131069&i|s<<2}function Op(i){return 1|i}function Ih(i,s){const o=i.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],d=o[u+1];if(-1!==d){const m=i.data[d];Wu(l),m.contentQueries(2,s[d],d)}}}function mr(i,s,o,u,l,d,m,v,b,C){const S=s.blueprint.slice();return S[0]=l,S[2]=140|u,xo(S),S[3]=S[15]=i,S[8]=o,S[10]=m||i&&i[10],S[11]=v||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=C||i&&i[9]||null,S[6]=d,S[16]=2==s.type?i[16]:S,S}function Vs(i,s,o,u,l){let d=i.data[s];if(null===d)d=function(i,s,o,u,l){const d=Gu(),m=ya(),b=i.data[s]=function(i,s,o,u,l,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,o,s,u,l);return null===i.firstChild&&(i.firstChild=b),null!==d&&(m?null==d.child&&null!==b.parent&&(d.child=b):null===d.next&&(d.next=b)),b}(i,s,o,u,l),ft.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=l;const m=function(){const i=ft.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return _i(d,!0),d}function Nl(i,s,o,u){if(0===o)return-1;const l=s.length;for(let d=0;d<o;d++)s.push(u),i.blueprint.push(u),i.data.push(null);return l}function Ch(i,s,o){ko(s);try{const u=i.viewQuery;null!==u&&Yw(1,u,o);const l=i.template;null!==l&&iE(i,s,l,1,o),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Ih(i,s),i.staticViewQueries&&Yw(2,i.viewQuery,o);const d=i.components;null!==d&&function(i,s){for(let o=0;o<s.length;o++)xy(i,s[o])}(s,d)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Ku()}}function Ol(i,s,o,u){const l=s[2];if(256==(256&l))return;ko(s);const d=_a();try{xo(s),function(i){ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==o&&iE(i,s,o,2,u);const m=3==(3&l);if(!d)if(m){const C=i.preOrderCheckHooks;null!==C&&Yu(s,C,null)}else{const C=i.preOrderHooks;null!==C&&ol(s,C,0,null),cu(s,0)}if(function(i){for(let s=E(i);null!==s;s=T(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],d=l[3];0==(1024&l[2])&&iu(d,1),l[2]|=1024}}}(s),function(i){for(let s=E(i);null!==s;s=T(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];ru(u)&&Ol(l,u,l.template,u[8])}}(s),null!==i.contentQueries&&Ih(i,s),!d)if(m){const C=i.contentCheckHooks;null!==C&&Yu(s,C)}else{const C=i.contentHooks;null!==C&&ol(s,C,1),cu(s,1)}!function(i,s){const o=i.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)ni(~l);else{const d=l,m=o[++u],v=o[++u];il(m,d),v(2,s[d])}}}finally{ni(-1)}}(i,s);const v=i.components;null!==v&&function(i,s){for(let o=0;o<s.length;o++)Bp(i,s[o])}(s,v);const b=i.viewQuery;if(null!==b&&Yw(2,b,u),!d)if(m){const C=i.viewCheckHooks;null!==C&&Yu(s,C)}else{const C=i.viewHooks;null!==C&&ol(s,C,2),cu(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,iu(s[3],-1))}finally{Ku()}}function Fw(i,s,o,u){const l=s[10],d=!_a(),m=Dr(s);try{d&&!m&&l.begin&&l.begin(),m&&Ch(i,s,u),Ol(i,s,o,u)}finally{d&&!m&&l.end&&l.end()}}function iE(i,s,o,u,l){const d=Wr(),m=2&u;try{ni(-1),m&&s.length>20&&Cw(i,s,20,_a()),o(u,l)}finally{ni(d)}}function Iy(i,s,o){!ma()||(function(i,s,o,u){const l=o.directiveStart,d=o.directiveEnd;i.firstCreatePass||Fo(o,s),hn(u,s);const m=o.initialInputs;for(let v=l;v<d;v++){const b=i.data[v],C=yi(b);C&&OA(s,o,b);const S=Da(s,i,v,o);hn(S,s),null!==m&&uM(0,v-l,S,b,0,m),C&&(ir(o.index,s)[8]=S)}}(i,s,o,ti(o,s)),128==(128&o.flags)&&function(i,s,o){const u=o.directiveStart,l=o.directiveEnd,m=o.index,v=ft.lFrame.currentDirectiveIndex;try{ni(m);for(let b=u;b<l;b++){const C=i.data[b],S=s[b];ou(b),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&NA(C,S)}}finally{ni(-1),ou(v)}}(i,s,o))}function Cy(i,s,o=ti){const u=s.localNames;if(null!==u){let l=s.index+1;for(let d=0;d<u.length;d+=2){const m=u[d+1],v=-1===m?o(s,i):i[m];i[l++]=v}}}function oE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Zo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Zo(i,s,o,u,l,d,m,v,b,C){const S=20+u,N=S+l,k=function(i,s){const o=[];for(let u=0;u<s;u++)o.push(u<i?null:pt);return o}(S,N),H="function"==typeof C?C():C;return k[1]={type:i,blueprint:k,template:o,queries:null,viewQuery:v,declTNode:s,data:k.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:H,incompleteFirstPass:!1}}function Vw(i,s,o,u){const l=Qw(s);null===o?l.push(u):(l.push(o),i.firstCreatePass&&gE(i).push(u,l.length-1))}function cE(i,s,o){for(let u in i)if(i.hasOwnProperty(u)){const l=i[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function Zi(i,s,o,u,l,d,m,v){const b=ti(s,o);let S,C=s.inputs;!v&&null!=C&&(S=C[u])?(UA(i,o,S,u,l),Uu(s)&&function(i,s){const o=ir(s,i);16&o[2]||(o[2]|=64)}(o,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),l=null!=m?m(l,s.value||"",u):l,Jt(d)?d.setProperty(b,u,l):Zf(u)||(b.setProperty?b.setProperty(u,l):b[u]=l))}function Dy(i,s,o,u){let l=!1;if(ma()){const d=function(i,s,o){const u=i.directiveRegistry;let l=null;if(u)for(let d=0;d<u.length;d++){const m=u[d];Kv(o,m.selectors,!1)&&(l||(l=[]),Ar(Fo(o,s),i,m.type),yi(m)?(Up(i,o),l.unshift(m)):l.push(m))}return l}(i,s,o),m=null===u?null:{"":-1};if(null!==d){l=!0,zw(o,i.data.length,d.length);for(let S=0;S<d.length;S++){const N=d[S];N.providersResolver&&N.providersResolver(N)}let v=!1,b=!1,C=Nl(i,s,d.length,null);for(let S=0;S<d.length;S++){const N=d[S];o.mergedAttrs=Xu(o.mergedAttrs,N.hostAttrs),Ay(i,o,s,C,N),Ty(C,N,m),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const k=N.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(o.index),v=!0),!b&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(o.index),b=!0),C++}!function(i,s){const u=s.directiveEnd,l=i.data,d=s.attrs,m=[];let v=null,b=null;for(let C=s.directiveStart;C<u;C++){const S=l[C],N=S.inputs,k=null===d||_w(s)?null:cM(N,d);m.push(k),v=cE(N,C,v),b=cE(S.outputs,C,b)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=b}(i,o)}m&&function(i,s,o){if(s){const u=i.localNames=[];for(let l=0;l<s.length;l+=2){const d=o[s[l+1]];if(null==d)throw new De("301",`Export of name '${s[l+1]}' not found!`);u.push(s[l],d)}}}(o,u,m)}return o.mergedAttrs=Xu(o.mergedAttrs,o.attrs),l}function wi(i,s,o,u,l,d){const m=d.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const b=~s.index;(function(i){let s=i.length;for(;s>0;){const o=i[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=b&&v.push(b),v.push(u,l,m)}}function NA(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Up(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ty(i,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=i;yi(s)&&(o[""]=i)}}function zw(i,s,o){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+o,i.providerIndexes=s}function Ay(i,s,o,u,l){i.data[u]=l;const d=l.factory||(l.factory=qr(l.type)),m=new Ia(d,yi(l),null);i.blueprint[u]=m,o[u]=m,wi(i,s,0,u,Nl(i,o,l.hostVars,pt),l)}function OA(i,s,o){const u=ti(s,i),l=oE(o),d=i[10],m=Th(i,mr(i,l,null,o.onPush?64:16,u,s,d,d.createRenderer(u,o),null,null));i[s.index]=m}function Iu(i,s,o,u,l,d){const m=ti(i,s);!function(i,s,o,u,l,d,m){if(null==d)Jt(i)?i.removeAttribute(s,l,o):s.removeAttribute(l);else{const v=null==m?Be(d):m(d,u||"",l);Jt(i)?i.setAttribute(s,l,v,o):o?s.setAttributeNS(o,l,v):s.setAttribute(l,v)}}(s[11],m,d,i.value,o,u,l)}function uM(i,s,o,u,l,d){const m=d[s];if(null!==m){const v=u.setInput;for(let b=0;b<m.length;){const C=m[b++],S=m[b++],N=m[b++];null!==v?u.setInput(o,N,C,S):o[S]=N}}}function cM(i,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,i[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function kA(i,s,o,u){return new Array(i,!0,!1,s,null,0,u,o,null,null)}function Bp(i,s){const o=ir(s,i);if(ru(o)){const u=o[1];80&o[2]?Ol(u,o,u.template,o[8]):o[5]>0&&Dh(o)}}function Dh(i){for(let u=E(i);null!==u;u=T(u))for(let l=10;l<u.length;l++){const d=u[l];if(1024&d[2]){const m=d[1];Ol(m,d,m.template,d[8])}else d[5]>0&&Dh(d)}const o=i[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=ir(o[u],i);ru(l)&&l[5]>0&&Dh(l)}}function xy(i,s){const o=ir(s,i),u=o[1];(function(i,s){for(let o=s.length;o<i.blueprint.length;o++)s.push(i.blueprint[o])})(u,o),Ch(u,o,o[8])}function Th(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Ah(i){for(;i;){i[2]|=64;const s=_(i);if(Qc(i)&&!s)return i;i=s}return null}function Ry(i,s,o){const u=s[10];u.begin&&u.begin();try{Ol(i,s,i.template,o)}catch(l){throw jp(s,l),l}finally{u.end&&u.end()}}function Zw(i){!function(i){for(let s=0;s<i.components.length;s++){const o=i.components[s],u=Il(o),l=u[1];Fw(l,u,l.template,o)}}(i[8])}function Yw(i,s,o){Wu(0),s(i,o)}const pE=(()=>Promise.resolve(null))();function Qw(i){return i[7]||(i[7]=[])}function gE(i){return i.cleanup||(i.cleanup=[])}function jp(i,s){const o=i[9],u=o?o.get(go,null):null;u&&u.handleError(s)}function UA(i,s,o,u,l){for(let d=0;d<o.length;){const m=o[d++],v=o[d++],b=s[m],C=i.data[m];null!==C.setInput?C.setInput(b,l,u,v):b[v]=l}}function Us(i,s,o){const u=Cs(s,i);!function(i,s,o){Jt(i)?i.setValue(s,o):s.textContent=o}(i[11],u,o)}function kl(i,s,o){let u=o?i.styles:null,l=o?i.classes:null,d=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?d=v:1==d?l=le(l,v):2==d&&(u=le(u,v+": "+s[++m]+";"))}o?i.styles=u:i.stylesWithoutHost=u,o?i.classes=l:i.classesWithoutHost=l}const Ic=new wn("INJECTOR",-1);class mE{get(s,o=st){if(o===st){const u=new Error(`NullInjectorError: No provider for ${K(s)}!`);throw u.name="NullInjectorError",u}return o}}const Pl=new wn("Set Injector scope."),xh={},yE={};let $p;function Fl(){return void 0===$p&&($p=new mE),$p}function Ny(i,s=null,o=null,u){return new BA(i,o,s||Fl(),u)}class BA{constructor(s,o,u,l=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&cs(o,v=>this.processProvider(v,s,o)),cs([s],v=>this.processInjectorType(v,[],d)),this.records.set(Ic,zp(void 0,this));const m=this.records.get(Pl);this.scope=null!=m?m.value:null,this.source=l||("object"==typeof s?null:K(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,o=st,u=Qe.Default){this.assertNotDestroyed();const l=lo(this),d=ei(void 0);try{if(!(u&Qe.SkipSelf)){let v=this.records.get(s);if(void 0===v){const b=("function"==typeof(i=s)||"object"==typeof i&&i instanceof wn)&&Un(s);v=b&&this.injectableDefInScope(b)?zp(Jw(s),xh):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Qe.Self?Fl():this.parent).get(s,o=u&Qe.Optional&&o===st?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[At]=m[At]||[]).unshift(K(s)),l)throw m;return Qn(m,s,"R3InjectorError",this.source)}throw m}finally{ei(d),lo(l)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,l)=>s.push(K(l))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,o,u){if(!(s=he(s)))return!1;let l=Cn(s);const d=null==l&&s.ngModule||void 0,m=void 0===d?s:d,v=-1!==u.indexOf(m);if(void 0!==d&&(l=Cn(d)),null==l)return!1;if(null!=l.imports&&!v){let S;u.push(m);try{cs(l.imports,N=>{this.processInjectorType(N,o,u)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:k,providers:H}=S[N];cs(H,z=>this.processProvider(z,k,H||Re))}}this.injectorDefTypes.add(m);const b=qr(m)||(()=>new m);this.records.set(m,zp(b,xh));const C=l.providers;if(null!=C&&!v){const S=s;cs(C,N=>this.processProvider(N,S,C))}return void 0!==d&&void 0!==s.providers}processProvider(s,o,u){let l=Rh(s=he(s))?s:he(s&&s.provide);const d=(i=s,jA(i)?zp(void 0,i.useValue):zp(vE(i),xh));var i;if(Rh(s)||!0!==s.multi)this.records.get(l);else{let m=this.records.get(l);m||(m=zp(void 0,xh,!0),m.factory=()=>ho(m.multi),this.records.set(l,m)),l=s,m.multi.push(s)}this.records.set(l,d)}hydrate(s,o){return o.value===xh&&(o.value=yE,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(i=o.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const o=he(s.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Jw(i){const s=Un(i),o=null!==s?s.factory:qr(i);if(null!==o)return o;if(i instanceof wn)throw new Error(`Token ${K(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const o=[];for(let u=0;u<i;u++)o.push(s);return o}(s,"?");throw new Error(`Can't resolve all parameters for ${K(i)}: (${u.join(", ")}).`)}const o=function(i){const s=i&&(i[cn]||i[Qs]);if(s){const o=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(i);return null!==o?()=>o.factory(i):()=>new i}(i);throw new Error("unreachable")}function vE(i,s,o){let u;if(Rh(i)){const l=he(i);return qr(l)||Jw(l)}if(jA(i))u=()=>he(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...ho(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>dn(he(i.useExisting));else{const l=he(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return qr(l)||Jw(l);u=()=>new l(...ho(i.deps))}return u}function zp(i,s,o=!1){return{factory:i,value:s,multi:o?[]:void 0}}function jA(i){return null!==i&&"object"==typeof i&&zi in i}function Rh(i){return"function"==typeof i}const tI=function(i,s,o){return function(i,s=null,o=null,u){const l=Ny(i,s,o,u);return l._resolveInjectorDefTypes(),l}({name:o},s,i,o)};let In=(()=>{class i{static create(o,u){return Array.isArray(o)?tI(o,u,""):tI(o.providers,o.parent,o.name||"")}}return i.THROW_IF_NOT_FOUND=st,i.NULL=new mE,i.\u0275prov=vt({token:i,providedIn:"any",factory:()=>dn(Ic)}),i.__NG_ELEMENT_ID__=-1,i})();function pI(i,s){wa(Il(i)[1],yn())}function ME(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),o=!0;const u=[i];for(;s;){let l;if(yi(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");l=s.\u0275dir}if(l){if(o){u.push(l);const m=i;m.inputs=mI(i.inputs),m.declaredInputs=mI(i.declaredInputs),m.outputs=mI(i.outputs);const v=l.hostBindings;v&&yI(i,v);const b=l.viewQuery,C=l.contentQueries;if(b&&vM(i,b),C&&EM(i,C),Y(i.inputs,l.inputs),Y(i.declaredInputs,l.declaredInputs),Y(i.outputs,l.outputs),yi(l)&&l.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(l.data.animation)}}const d=l.features;if(d)for(let m=0;m<d.length;m++){const v=d[m];v&&v.ngInherit&&v(i),v===ME&&(o=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,o=null;for(let u=i.length-1;u>=0;u--){const l=i[u];l.hostVars=s+=l.hostVars,l.hostAttrs=Xu(l.hostAttrs,o=Xu(o,l.hostAttrs))}}(u)}function mI(i){return i===ve?{}:i===Re?[]:i}function vM(i,s){const o=i.viewQuery;i.viewQuery=o?(u,l)=>{s(u,l),o(u,l)}:s}function EM(i,s){const o=i.contentQueries;i.contentQueries=o?(u,l,d)=>{s(u,l,d),o(u,l,d)}:s}function yI(i,s){const o=i.hostBindings;i.hostBindings=o?(u,l)=>{s(u,l),o(u,l)}:s}let Yp=null;function Qp(){if(!Yp){const i=Ke.Symbol;if(i&&i.iterator)Yp=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Yp=u)}}}return Yp}function Jp(i){return!!OE(i)&&(Array.isArray(i)||!(i instanceof Map)&&Qp()in i)}function OE(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ci(i,s,o){return!Object.is(i[s],o)&&(i[s]=o,!0)}function kE(i,s,o,u){const l=Ee();return Ci(l,io(),s)&&(jt(),Iu(bn(),l,i,s,o,u)),kE}function ng(i,s,o,u,l,d,m,v){const b=Ee(),C=jt(),S=i+20,N=C.firstCreatePass?function(i,s,o,u,l,d,m,v,b){const C=s.consts,S=Vs(s,i,4,m||null,is(C,v));Dy(s,o,S,is(C,b)),wa(s,S);const N=S.tViews=Zo(2,S,u,l,d,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,S),N.queries=s.queries.embeddedTView(S)),S}(S,C,b,s,o,u,l,d,m):C.data[S];_i(N,!1);const k=b[11].createComment("");Mp(C,b,k,N),hn(k,b),Th(b,b[S]=kA(k,b,k,N)),ws(N)&&Iy(C,b,N),null!=m&&Cy(b,N,v)}function Du(i){return function(i,s){return i[s]}(ft.lFrame.contextLView,20+i)}function Fh(i,s=Qe.Default){const o=Ee();return null===o?dn(i,s):Sr(yn(),o,he(i),s)}function sg(i,s,o){const u=Ee();return Ci(u,io(),s)&&Zi(jt(),bn(),u,i,s,u[11],o,!1),sg}function og(i,s,o,u,l){const m=l?"class":"style";UA(i,o,s.inputs[m],m,u)}function yr(i,s,o,u){const l=Ee(),d=jt(),m=20+i,v=l[11],b=l[m]=Ye(v,s,ft.lFrame.currentNamespace),C=d.firstCreatePass?function(i,s,o,u,l,d,m){const v=s.consts,C=Vs(s,i,2,l,is(v,d));return Dy(s,o,C,is(v,m)),null!==C.attrs&&kl(C,C.attrs,!1),null!==C.mergedAttrs&&kl(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,d,l,0,s,o,u):d.data[m];_i(C,!0);const S=C.mergedAttrs;null!==S&&lu(v,b,S);const N=C.classes;null!==N&&_y(v,b,N);const k=C.styles;null!==k&&gw(v,b,k),64!=(64&C.flags)&&Mp(d,l,b,C),0===ft.lFrame.elementDepthCount&&hn(b,l),ft.lFrame.elementDepthCount++,ws(C)&&(Iy(d,l,C),function(i,s,o){if(Vu(s)){const l=s.directiveEnd;for(let d=s.directiveStart;d<l;d++){const m=i.data[d];m.contentQueries&&m.contentQueries(1,o[d],d)}}}(d,C,l)),null!==u&&Cy(l,C)}function Nr(){let i=yn();ya()?ft.lFrame.isParent=!1:(i=i.parent,_i(i,!1));const s=i;ft.lFrame.elementDepthCount--;const o=jt();o.firstCreatePass&&(wa(o,i),Vu(i)&&o.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&og(o,s,Ee(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&og(o,s,Ee(),s.stylesWithoutHost,!1)}function ag(i,s,o,u){yr(i,s,o,u),Nr()}function qI(){return Ee()}function Yy(i){return!!i&&"function"==typeof i.then}function Qy(i){return!!i&&"function"==typeof i.subscribe}const GE=Qy;function ug(i,s,o,u){const l=Ee(),d=jt(),m=yn();return function(i,s,o,u,l,d,m,v){const b=ws(u),S=i.firstCreatePass&&gE(i),N=s[8],k=Qw(s);let H=!0;if(3&u.type||v){const Q=ti(u,s),Oe=v?v(Q):Q,ye=k.length,at=v?wt=>v(Vt(wt[u.index])):u.index;if(Jt(o)){let wt=null;if(!v&&b&&(wt=function(i,s,o,u){const l=i.cleanup;if(null!=l)for(let d=0;d<l.length-1;d+=2){const m=l[d];if(m===o&&l[d+1]===u){const v=s[7],b=l[d+2];return v.length>b?v[b]:null}"string"==typeof m&&(d+=2)}return null}(i,s,l,u.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=d,wt.__ngLastListenerFn__=d,H=!1;else{d=lg(u,s,N,d,!1);const Bt=o.listen(Oe,l,d);k.push(d,Bt),S&&S.push(l,at,ye,ye+1)}}else d=lg(u,s,N,d,!0),Oe.addEventListener(l,d,m),k.push(d),S&&S.push(l,at,ye,m)}else d=lg(u,s,N,d,!1);const z=u.outputs;let ue;if(H&&null!==z&&(ue=z[l])){const Q=ue.length;if(Q)for(let Oe=0;Oe<Q;Oe+=2){const cr=s[ue[Oe]][ue[Oe+1]].subscribe(d),ca=k.length;k.push(d,cr),S&&S.push(l,u.index,ca,-(ca+1))}}}(d,l,l[11],m,i,s,!!o,u),ug}function Jy(i,s,o,u){try{return!1!==o(u)}catch(l){return jp(i,l),!1}}function lg(i,s,o,u,l){return function d(m){if(m===Function)return u;const v=2&i.flags?ir(i.index,s):s;0==(32&s[2])&&Ah(v);let b=Jy(s,0,u,m),C=d.__ngNextListenerFn__;for(;C;)b=Jy(s,0,C,m)&&b,C=C.__ngNextListenerFn__;return l&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function zE(i=1){return function(i){return(ft.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ft.lFrame.contextLView))[8]}(i)}function YE(i,s,o,u,l){const d=i[o+1],m=null===s;let v=u?yo(d):Ls(d),b=!1;for(;0!==v&&(!1===b||m);){const S=i[v+1];Ki(i[v],s)&&(b=!0,i[v+1]=u?Op(S):Qv(S)),v=u?yo(S):Ls(S)}b&&(i[o+1]=u?Qv(d):Op(d))}function Ki(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Rr(i,s)>=0}function Uh(i,s){return function(i,s,o,u){const l=Ee(),d=jt(),m=function(i){const s=ft.lFrame,o=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,o}(2);d.firstUpdatePass&&function(i,s,o,u){const l=i.data;if(null===l[o+1]){const d=l[Wr()],m=function(i,s){return s>=i.expandoStartIndex}(i,o);(function(i,s){return 0!=(i.flags&(s?16:32))})(d,u)&&null===s&&!m&&(s=!1),s=function(i,s,o,u){const l=function(i){const s=ft.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let d=u?s.residualClasses:s.residualStyles;if(null===l)0===(u?s.classBindings:s.styleBindings)&&(o=Bh(o=r0(null,i,s,o,u),s.attrs,u),d=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==l)if(o=r0(l,i,s,o,u),null===d){let b=function(i,s,o){const u=o?s.classBindings:s.styleBindings;if(0!==Ls(u))return i[yo(u)]}(i,s,u);void 0!==b&&Array.isArray(b)&&(b=r0(null,i,s,b[1],u),b=Bh(b,s.attrs,u),function(i,s,o,u){i[yo(o?s.classBindings:s.styleBindings)]=u}(i,s,u,b))}else d=function(i,s,o){let u;const l=s.directiveEnd;for(let d=1+s.directiveStylingLast;d<l;d++)u=Bh(u,i[d].hostAttrs,o);return Bh(u,s.attrs,o)}(i,s,u)}return void 0!==d&&(u?s.residualClasses=d:s.residualStyles=d),o}(l,d,s,u),function(i,s,o,u,l,d){let m=d?s.classBindings:s.styleBindings,v=yo(m),b=Ls(m);i[u]=o;let S,C=!1;if(Array.isArray(o)){const N=o;S=N[1],(null===S||Rr(N,S)>0)&&(C=!0)}else S=o;if(l)if(0!==b){const k=yo(i[v+1]);i[u+1]=vy(k,v),0!==k&&(i[k+1]=Xn(i[k+1],u)),i[v+1]=function(i,s){return 131071&i|s<<17}(i[v+1],u)}else i[u+1]=vy(v,0),0!==v&&(i[v+1]=Xn(i[v+1],u)),v=u;else i[u+1]=vy(b,0),0===v?v=u:i[b+1]=Xn(i[b+1],u),b=u;C&&(i[u+1]=Qv(i[u+1])),YE(i,S,u,!0),YE(i,S,u,!1),function(i,s,o,u,l){const d=l?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof s&&Rr(d,s)>=0&&(o[u+1]=Op(o[u+1]))}(s,S,i,u,d),m=vy(v,b),d?s.classBindings=m:s.styleBindings=m}(l,d,s,o,m,u)}}(d,i,m,u),s!==pt&&Ci(l,m,s)&&function(i,s,o,u,l,d,m,v){if(!(3&s.type))return;const b=i.data,C=b[v+1];jl(function(i){return 1==(1&i)}(C)?_g(b,s,o,l,Ls(C),m):void 0)||(jl(d)||function(i){return 2==(2&i)}(C)&&(d=_g(b,null,o,l,v,m)),function(i,s,o,u,l){const d=Jt(i);if(s)l?d?i.addClass(o,u):o.classList.add(u):d?i.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:hs.DashCase;if(null==l)d?i.removeStyle(o,u,m):o.style.removeProperty(u);else{const v="string"==typeof l&&l.endsWith("!important");v&&(l=l.slice(0,-10),m|=hs.Important),d?i.setStyle(o,u,l,m):o.style.setProperty(u,l,v?"important":"")}}}(u,m,Cs(Wr(),o),l,d))}(d,d.data[Wr()],l,l[11],i,l[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=K(Ps(i)))),i}(s,o),u,m)}(i,s,null,!0),Uh}function r0(i,s,o,u,l){let d=null;const m=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<m&&(d=s[v],u=Bh(u,d.hostAttrs,l),d!==i);)v++;return null!==i&&(o.directiveStylingLast=v),u}function Bh(i,s,o){const u=o?1:2;let l=-1;if(null!==s)for(let d=0;d<s.length;d++){const m=s[d];"number"==typeof m?l=m:l===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Ei(i,m,!!o||s[++d]))}return void 0===i?null:i}function _g(i,s,o,u,l,d){const m=null===s;let v;for(;l>0;){const b=i[l],C=Array.isArray(b),S=C?b[1]:b,N=null===S;let k=o[l+1];k===pt&&(k=N?Re:void 0);let H=N?oc(k,u):S===u?k:void 0;if(C&&!jl(H)&&(H=oc(b,u)),jl(H)&&(v=H,m))return v;const z=i[l+1];l=m?yo(z):Ls(z)}if(null!==s){let b=d?s.residualClasses:s.residualStyles;null!=b&&(v=oc(b,u))}return v}function jl(i){return void 0!==i}function vg(i,s=""){const o=Ee(),u=jt(),l=i+20,d=u.firstCreatePass?Vs(u,l,1,s,null):u.data[l],m=o[l]=function(i,s){return Jt(i)?i.createText(s):i.createTextNode(s)}(o[11],s);Mp(u,o,m,d),_i(d,!1)}function Hl(i){return $l("",i,""),Hl}function $l(i,s,o){const u=Ee(),l=function(i,s,o,u){return Ci(i,io(),o)?s+Be(o)+u:pt}(u,i,s,o);return l!==pt&&Us(u,Wr(),l),$l}function i_(i,s,o){const u=Ee();return Ci(u,io(),s)&&Zi(jt(),bn(),u,i,s,u[11],o,!0),i_}const Gl=void 0;var EC=["en",[["a","p"],["AM","PM"],Gl],[["AM","PM"],Gl,Gl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gl,"{1} 'at' {0}",Gl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),o=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===o?1:5}];let ql={};function zh(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let o=l0(s);if(o)return o;const u=s.split("-")[0];if(o=l0(u),o)return o;if("en"===u)return EC;throw new Error(`Missing locale data for the locale "${i}".`)}function ja(i){return zh(i)[dt.PluralCase]}function l0(i){return i in ql||(ql[i]=Ke.ng&&Ke.ng.common&&Ke.ng.common.locales&&Ke.ng.common.locales[i]),ql[i]}var dt=(()=>((dt=dt||{})[dt.LocaleId=0]="LocaleId",dt[dt.DayPeriodsFormat=1]="DayPeriodsFormat",dt[dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",dt[dt.DaysFormat=3]="DaysFormat",dt[dt.DaysStandalone=4]="DaysStandalone",dt[dt.MonthsFormat=5]="MonthsFormat",dt[dt.MonthsStandalone=6]="MonthsStandalone",dt[dt.Eras=7]="Eras",dt[dt.FirstDayOfWeek=8]="FirstDayOfWeek",dt[dt.WeekendRange=9]="WeekendRange",dt[dt.DateFormat=10]="DateFormat",dt[dt.TimeFormat=11]="TimeFormat",dt[dt.DateTimeFormat=12]="DateTimeFormat",dt[dt.NumberSymbols=13]="NumberSymbols",dt[dt.NumberFormats=14]="NumberFormats",dt[dt.CurrencyCode=15]="CurrencyCode",dt[dt.CurrencySymbol=16]="CurrencySymbol",dt[dt.CurrencyName=17]="CurrencyName",dt[dt.Currencies=18]="Currencies",dt[dt.Directionality=19]="Directionality",dt[dt.PluralCase=20]="PluralCase",dt[dt.ExtraData=21]="ExtraData",dt))();const zl="en-US";let h0=zl;function a_(i){fn(i,"Expected localeId to be defined"),"string"==typeof i&&(h0=i.toLowerCase().replace(/_/g,"-"))}function v0(i,s,o,u,l){if(i=he(i),Array.isArray(i))for(let d=0;d<i.length;d++)v0(i[d],s,o,u,l);else{const d=jt(),m=Ee();let v=Rh(i)?i:he(i.provide),b=vE(i);const C=yn(),S=1048575&C.providerIndexes,N=C.directiveStart,k=C.providerIndexes>>20;if(Rh(i)||!i.multi){const H=new Ia(b,l,Fh),z=E0(v,s,l?S:S+k,N);-1===z?(Ar(Fo(C,m),d,v),Jl(d,i,s.length),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(H),m.push(H)):(o[z]=H,m[z]=H)}else{const H=E0(v,s,S+k,N),z=E0(v,s,S,S+k),ue=H>=0&&o[H],Q=z>=0&&o[z];if(l&&!Q||!l&&!ue){Ar(Fo(C,m),d,v);const Oe=function(i,s,o,u,l){const d=new Ia(i,o,Fh);return d.multi=[],d.index=s,d.componentProviders=0,Au(d,l,u&&!o),d}(l?HC:Xl,o.length,l,u,b);!l&&Q&&(o[z].providerFactory=Oe),Jl(d,i,s.length,0),s.push(v),C.directiveStart++,C.directiveEnd++,l&&(C.providerIndexes+=1048576),o.push(Oe),m.push(Oe)}else Jl(d,i,H>-1?H:z,Au(o[l?z:H],b,!l&&u));!l&&u&&Q&&o[z].componentProviders++}}}function Jl(i,s,o,u){const l=Rh(s);if(l||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const v=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const b=v.indexOf(o);-1===b?v.push(o,[u,m]):v[b+1].push(u,m)}else v.push(o,m)}}}function Au(i,s,o){return o&&i.componentProviders++,i.multi.push(s)-1}function E0(i,s,o,u){for(let l=o;l<u;l++)if(s[l]===i)return l;return-1}function Xl(i,s,o,u){return Ag(this.multi,[])}function HC(i,s,o,u){const l=this.multi;let d;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Da(o,o[1],this.providerFactory.index,u);d=v.slice(0,m),Ag(l,d);for(let b=m;b<v.length;b++)d.push(v[b])}else d=[],Ag(l,d);return d}function Ag(i,s){for(let o=0;o<i.length;o++)s.push((0,i[o])());return s}function $C(i,s=[]){return o=>{o.providersResolver=(u,l)=>function(i,s,o){const u=jt();if(u.firstCreatePass){const l=yi(i);v0(o,u.data,u.blueprint,l,!0),v0(s,u.data,u.blueprint,l,!1)}}(u,l?l(i):i,s)}}class b0{}const w0="ngComponent";class y_{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${K(i)}. Did you add it to @NgModule.entryComponents?`);return s[w0]=i,s}(s)}}let tr=(()=>{class i{}return i.NULL=new y_,i})();function Su(...i){}function Xh(i,s){return new an(ti(i,s))}const Mc=function(){return Xh(yn(),Ee())};let an=(()=>{class i{constructor(o){this.nativeElement=o}}return i.__NG_ELEMENT_ID__=Mc,i})();function Nc(i){return i instanceof an?i.nativeElement:i}class Sg{}let xg=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>Rg(),i})();const Rg=function(){const i=Ee(),o=ir(yn().index,i);return function(i){return i[11]}(ns(o)?o:i)};let Ha=(()=>{class i{}return i.\u0275prov=vt({token:i,providedIn:"root",factory:()=>null}),i})();class Ng{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const xu=new Ng("12.2.16");class na{constructor(){}supports(s){return Jp(s)}create(s){return new zC(s)}}const Og=(i,s)=>s;class zC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Og}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,d=null;for(;o||u;){const m=!u||o&&o.currentIndex<v_(u,l,d)?o:u,v=v_(m,l,d),b=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{d||(d=[]);const C=v-l,S=b-l;if(C!=S){for(let k=0;k<C;k++){const H=k<d.length?d[k]:d[k]=0,z=H+k;S<=z&&z<C&&(d[k]=H+1)}d[m.previousIndex]=S-C}}v!==b&&s(m,v,b)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!Jp(s))throw new Error(`Error trying to diff '${K(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,d,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)d=s[v],m=this._trackByFn(v,d),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,d,m,v)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,m,v),u=!0),o=o._next}else l=0,function(i,s){if(Array.isArray(i))for(let o=0;o<i.length;o++)s(i[o]);else{const o=i[Qp()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let d;return null===s?d=this._itTail:(d=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,d,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,d,l)):s=this._addAfter(new ef(o,u),d,l),s}_verifyReinsertion(s,o,u,l){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?s=this._reinsertAfter(d,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,d=s._nextRemoved;return null===l?this._removalsHead=d:l._nextRemoved=d,null===d?this._removalsTail=l:d._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new Oc),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Oc),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ef{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class I0{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Oc{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new I0,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function v_(i,s,o){const u=i.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class tf{constructor(){}supports(s){return s instanceof Map||OE(s)}create(){return new WC}}class WC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||OE(s)))throw new Error(`Error trying to diff '${K(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const d=l._prev,m=l._next;return d&&(d._next=m),m&&(m._prev=d),l._next=null,l._prev=null,l}const u=new ZC(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class ZC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kg(){return new kc([new na])}let kc=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||kg()),deps:[[i,new Ma,new fo]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(i){return i.name||typeof i}(o)}'`)}}return i.\u0275prov=vt({token:i,providedIn:"root",factory:kg}),i})();function YC(){return new E_([new tf])}let E_=(()=>{class i{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new i(o)}static extend(o){return{provide:i,useFactory:u=>i.create(o,u||YC()),deps:[[i,new Ma,new fo]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return i.\u0275prov=vt({token:i,providedIn:"root",factory:YC}),i})();function Pg(i,s,o,u,l=!1){for(;null!==o;){const d=s[o.index];if(null!==d&&u.push(Vt(d)),Tn(d))for(let v=10;v<d.length;v++){const b=d[v],C=b[1].firstChild;null!==C&&Pg(b[1],b,C,u)}const m=o.type;if(8&m)Pg(i,s,o.child,u);else if(32&m){const v=Tp(o,s);let b;for(;b=v();)u.push(b)}else if(16&m){const v=gA(s,o);if(Array.isArray(v))u.push(...v);else{const b=_(s[16]);Pg(b[1],b,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class nf{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return Pg(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Tn(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Sl(s,u),jo(o,u))}this._attachedToViewContainer=!1}Sp(this._lView[1],this._lView)}onDestroy(s){Vw(this._lView[1],this._lView,null,s)}markForCheck(){Ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ry(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,o){ss(!0);try{Ry(i,s,o)}finally{ss(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Np(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class li extends nf{constructor(s){super(s),this._view=s}detectChanges(){Zw(this._view)}checkNoChanges(){!function(i){ss(!0);try{Zw(i)}finally{ss(!1)}}(this._view)}get context(){return null}}const RS=function(i){return function(i,s,o){if(Uu(i)&&!o){const u=ir(i.index,s);return new nf(u,u)}return 47&i.type?new nf(s[16],s):null}(yn(),Ee(),16==(16&i))};let JC=(()=>{class i{}return i.__NG_ELEMENT_ID__=RS,i})();const Fg=[new tf],w_=new kc([new na]),XC=new E_(Fg),NS=function(){return I_(yn(),Ee())};let Lg=(()=>{class i{}return i.__NG_ELEMENT_ID__=NS,i})();const OS=Lg,tD=class extends OS{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s){const o=this._declarationTContainer.tViews,u=mr(this._declarationLView,o,s,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Ch(o,u,s),new nf(u)}};function I_(i,s){return 4&i.type?new tD(s,i,Xh(i,s)):null}class rd{}class nD{}const PS=function(){return D_(yn(),Ee())};let Ug=(()=>{class i{}return i.__NG_ELEMENT_ID__=PS,i})();const Ru=Ug,C0=class extends Ru{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return Xh(this._hostTNode,this._hostLView)}get injector(){return new os(this._hostTNode,this._hostLView)}get parentInjector(){const s=so(this._hostTNode,this._hostLView);if(Ca(s)){const o=du(s,this._hostLView),u=$i(s);return new os(o[1].data[u+8],o)}return new os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=id(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){const l=s.createEmbeddedView(o||{});return this.insert(l,u),l}createComponent(s,o,u,l,d){const m=u||this.parentInjector;if(!d&&null==s.ngModule&&m){const b=m.get(rd,null);b&&(d=b)}const v=s.create(m,l,void 0,d);return this.insert(v.hostView,o),v}insert(s,o){const u=s._lView,l=u[1];if(Tn(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const N=u[3],k=new C0(N,N[6],N[3]);k.detach(k.indexOf(s))}}const d=this._adjustIndex(o),m=this._lContainer;!function(i,s,o,u){const l=10+u,d=o.length;u>0&&(o[l-1][4]=s),u<d-10?(s[4]=o[l],sc(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function(i,s){const o=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===o?i[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(l,u,m,d);const v=bu(d,m),b=u[11],C=my(b,m[7]);return null!==C&&function(i,s,o,u,l,d){u[0]=l,u[6]=s,Np(i,u,o,1,l,d)}(l,m[6],b,u,C,v),s.attachToViewContainerRef(),sc(C_(m),d,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=id(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Sl(this._lContainer,o);u&&(jo(C_(this._lContainer),o),Sp(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Sl(this._lContainer,o);return u&&null!=jo(C_(this._lContainer),o)?new nf(u):null}_adjustIndex(s,o=0){return null==s?this.length+o:s}};function id(i){return i[8]}function C_(i){return i[8]||(i[8]=[])}function D_(i,s){let o;const u=s[i.index];if(Tn(u))o=u;else{let l;if(8&i.type)l=Vt(u);else{const d=s[11];l=d.createComment("");const m=ti(i,s);mo(d,my(d,m),l,function(i,s){return Jt(i)?i.nextSibling(s):s.nextSibling}(d,m),!1)}s[i.index]=o=kA(u,s,l,i),Th(s,o)}return new C0(o,i,s)}const ad={};class AD extends tr{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=kn(s);return new xD(o,this.ngModule)}}function SD(i){const s=[];for(let o in i)i.hasOwnProperty(o)&&s.push({propName:i[o],templateName:o});return s}const tx=new wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bp});class xD extends b0{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=s.selectors.map(wA).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return SD(this.componentDef.inputs)}get outputs(){return SD(this.componentDef.outputs)}create(s,o,u,l){const d=(l=l||this.ngModule)?function(i,s){return{get:(o,u,l)=>{const d=i.get(o,ad,l);return d!==ad||u===ad?d:s.get(o,u,l)}}}(s,l.injector):s,m=d.get(Sg,Is),v=d.get(Ha,null),b=m.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,o){if(Jt(i))return i.selectRootElement(s,o===Rt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(b,u,this.componentDef.encapsulation):Ye(m.createRenderer(null,this.componentDef),C,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(C)),N=this.componentDef.onPush?576:528,k=function(i,s){return{components:[],scheduler:i||bp,clean:pE,playerHandler:s||null,flags:0}}(),H=Zo(0,null,null,1,0,null,null,null,null,null),z=mr(null,H,k,N,null,null,m,b,v,d);let ue,Q;ko(z);try{const Oe=function(i,s,o,u,l,d){const m=o[1];o[20]=i;const b=Vs(m,20,2,"#host",null),C=b.mergedAttrs=s.hostAttrs;null!==C&&(kl(b,C,!0),null!==i&&(lu(l,i,C),null!==b.classes&&_y(l,i,b.classes),null!==b.styles&&gw(l,i,b.styles)));const S=u.createRenderer(i,s),N=mr(o,oE(s),null,s.onPush?64:16,o[20],b,u,S,d||null,null);return m.firstCreatePass&&(Ar(Fo(b,o),m,s.type),Up(m,b),zw(b,o.length,1)),Th(o,N),o[20]=N}(S,this.componentDef,z,m,b);if(S)if(u)lu(b,S,["ng-version",xu.full]);else{const{attrs:ye,classes:at}=function(i){const s=[],o=[];let u=1,l=2;for(;u<i.length;){let d=i[u];if("string"==typeof d)2===l?""!==d&&s.push(d,i[++u]):8===l&&o.push(d);else{if(!zo(l))break;l=d}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);ye&&lu(b,S,ye),at&&at.length>0&&_y(b,S,at.join(" "))}if(Q=Ds(H,20),void 0!==o){const ye=Q.projection=[];for(let at=0;at<this.ngContentSelectors.length;at++){const wt=o[at];ye.push(null!=wt?Array.from(wt):null)}}ue=function(i,s,o,u,l){const d=o[1],m=function(i,s,o){const u=yn();i.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Ay(i,u,s,Nl(i,s,1,null),o));const l=Da(s,i,u.directiveStart,u);hn(l,s);const d=ti(u,s);return d&&hn(d,s),l}(d,o,s);if(u.components.push(m),i[8]=m,l&&l.forEach(b=>b(m,s)),s.contentQueries){const b=yn();s.contentQueries(1,m,b.directiveStart)}const v=yn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ni(v.index),wi(o[1],v,0,v.directiveStart,v.directiveEnd,s),NA(s,m)),m}(Oe,this.componentDef,z,k,[pI]),Ch(H,z,null)}finally{Ku()}return new ix(this.componentType,ue,Xh(Q,z),z,Q)}}class ix extends class{}{constructor(s,o,u,l,d){super(),this.location=u,this._rootLView=l,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new li(l),this.componentType=s}get injector(){return new os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const _f=new Map;class B0 extends rd{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new AD(this);const u=Kn(s),l=s[j]||null;l&&a_(l),this._bootstrapComponents=gr(u.bootstrap),this._r3Injector=Ny(s,o,[{provide:rd,useValue:this},{provide:tr,useValue:this.componentFactoryResolver}],K(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,o=In.THROW_IF_NOT_FOUND,u=Qe.Default){return s===In||s===rd||s===Ic?this:this._r3Injector.get(s,o,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Yg extends nD{constructor(s){super(),this.moduleType=s,null!==Kn(s)&&function(i){const s=new Set;!function o(u){const l=Kn(u,!0),d=l.id;null!==d&&(function(i,s,o){if(s&&s!==o)throw new Error(`Duplicate module registered for ${i} - ${K(s)} vs ${K(s.name)}`)}(d,_f.get(d),u),_f.set(d,u));const m=gr(l.imports);for(const v of m)s.has(v)||(s.add(v),o(v))}(i)}(s)}create(s){return new B0(this.moduleType,s)}}function hd(i){return s=>{setTimeout(i,void 0,s)}}const Mi=class extends p.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){var l,d,m;let v=s,b=o||(()=>null),C=u;if(s&&"object"==typeof s){const N=s;v=null===(l=N.next)||void 0===l?void 0:l.bind(N),b=null===(d=N.error)||void 0===d?void 0:d.bind(N),C=null===(m=N.complete)||void 0===m?void 0:m.bind(N)}this.__isAsync&&(b=hd(b),v&&(v=hd(v)),C&&(C=hd(C)));const S=super.subscribe({next:v,error:b,complete:C});return s instanceof X.w&&s.add(S),S}};function fd(){return this._results[Qp()]()}class tm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Qp(),u=tm.prototype;u[o]||(u[o]=fd)}get changes(){return this._changes||(this._changes=new Mi)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,o){return this._results.reduce(s,o)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,o){const u=this;u.dirty=!1;const l=qi(s);(this._changesDetected=!function(i,s,o){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let l=i[u],d=s[u];if(o&&(l=o(l),d=o(d)),d!==l)return!1}return!0}(u._results,l,o))&&(u._results=l,u.length=l.length,u.last=l[this.length-1],u.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ef{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ef(this.queryList)}setDirty(){this.queryList.setDirty()}}class G0{constructor(s=[]){this.queries=s}createEmbeddedView(s){const o=s.queries;if(null!==o){const u=null!==s.contentQueries?s.contentQueries[0]:o.length,l=[];for(let d=0;d<u;d++){const m=o.getByIndex(d);l.push(this.queries[m.indexInDeclarationView].clone())}return new G0(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let o=0;o<this.queries.length;o++)null!==W0(s,o).matches&&this.queries[o].setDirty()}}class q0{constructor(s,o,u=null){this.predicate=s,this.flags=o,this.read=u}}class pd{constructor(s=[]){this.queries=s}elementStart(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,o)}elementEnd(s){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(s)}embeddedTView(s){let o=null;for(let u=0;u<this.length;u++){const l=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(s,l);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new pd(o):null}template(s,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,o)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class bf{constructor(s,o=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(s,o){this.isApplyingToNode(o)&&this.matchTNode(s,o)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,o){this.elementStart(s,o)}embeddedTView(s,o){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,o),new bf(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let l=0;l<u.length;l++){const d=u[l];this.matchTNodeWithReadOption(s,o,nm(o,d)),this.matchTNodeWithReadOption(s,o,Xt(o,s,d,!1,!1))}else u===Lg?4&o.type&&this.matchTNodeWithReadOption(s,o,-1):this.matchTNodeWithReadOption(s,o,Xt(o,s,u,!1,!1))}matchTNodeWithReadOption(s,o,u){if(null!==u){const l=this.metadata.read;if(null!==l)if(l===an||l===Ug||l===Lg&&4&o.type)this.addMatch(o.index,-2);else{const d=Xt(o,s,l,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(s,o){null===this.matches?this.matches=[s,o]:this.matches.push(s,o)}}function nm(i,s){const o=i.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===s)return o[u+1];return null}function BD(i,s,o,u){return-1===o?function(i,s){return 11&i.type?Xh(i,s):4&i.type?I_(i,s):null}(s,i):-2===o?function(i,s,o){return o===an?Xh(s,i):o===Lg?I_(s,i):o===Ug?D_(s,i):void 0}(i,s,u):Da(i,i[1],o,s)}function z0(i,s,o,u){const l=s[19].queries[u];if(null===l.matches){const d=i.data,m=o.matches,v=[];for(let b=0;b<m.length;b+=2){const C=m[b];v.push(C<0?null:BD(s,d[C],m[b+1],o.metadata.read))}l.matches=v}return l.matches}function wf(i,s,o,u){const l=i.queries.getByIndex(o),d=l.matches;if(null!==d){const m=z0(i,s,l,o);for(let v=0;v<d.length;v+=2){const b=d[v];if(b>0)u.push(m[v/2]);else{const C=d[v+1],S=s[-b];for(let N=10;N<S.length;N++){const k=S[N];k[17]===k[3]&&wf(k[1],k,C,u)}if(null!==S[9]){const N=S[9];for(let k=0;k<N.length;k++){const H=N[k];wf(H[1],H,C,u)}}}}}return u}function rm(i){const s=Ee(),o=jt(),u=Hd();Wu(u+1);const l=W0(o,u);if(i.dirty&&Dr(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const d=l.crossesNgTemplate?wf(o,s,u,[]):z0(o,s,l,u);i.reset(d,Nc),i.notifyOnChanges()}return!0}return!1}function Ou(i,s,o,u){const l=jt();if(l.firstCreatePass){const d=yn();(function(i,s,o){null===i.queries&&(i.queries=new pd),i.queries.track(new bf(s,o))})(l,new q0(s,o,u),d.index),function(i,s){const o=i.contentQueries||(i.contentQueries=[]);s!==(o.length?o[o.length-1]:-1)&&o.push(i.queries.length-1,s)}(l,i),2==(2&o)&&(l.staticContentQueries=!0)}!function(i,s,o){const u=new tm(4==(4&o));Vw(i,s,u,u.destroy),null===s[19]&&(s[19]=new G0),s[19].queries.push(new Ef(u))}(l,Ee(),o)}function gd(){return i=Ee(),s=Hd(),i[19].queries[s].queryList;var i,s}function W0(i,s){return i.queries.getByIndex(s)}const cb=new wn("Application Initializer");let $c=(()=>{class i{constructor(o){this.appInits=o,this.resolve=Su,this.reject=Su,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const d=this.appInits[l]();if(Yy(d))o.push(d);else if(GE(d)){const m=new Promise((v,b)=>{d.subscribe({complete:v,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return i.\u0275fac=function(o){return new(o||i)(dn(cb,8))},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();const oT=new wn("AppId"),cm={provide:oT,useFactory:function(){return`${lm()}${lm()}${lm()}`},deps:[]};function lm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _d=new wn("Platform Initializer"),Z_=new wn("Platform ID"),dm=new wn("appBootstrapListener");let Y_=(()=>{class i{log(o){console.log(o)}warn(o){console.warn(o)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();const hm=new wn("LocaleId"),Q_=new wn("DefaultCurrencyCode");class lb{constructor(s,o){this.ngModuleFactory=s,this.componentFactories=o}}const Tf=function(i){return new Yg(i)},db=Tf,hb=function(i){return Promise.resolve(Tf(i))},lT=function(i){const s=Tf(i),u=gr(Kn(i).declarations).reduce((l,d)=>{const m=kn(d);return m&&l.push(new xD(m)),l},[]);return new lb(s,u)},dT=lT,fb=function(i){return Promise.resolve(lT(i))};let pm=(()=>{class i{constructor(){this.compileModuleSync=db,this.compileModuleAsync=hb,this.compileModuleAndAllComponentsSync=dT,this.compileModuleAndAllComponentsAsync=fb}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();const gb=(()=>Promise.resolve(0))();function mb(i){"undefined"==typeof Zone?gb.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class _s{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let i=Ke.requestAnimationFrame,s=Ke.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const o=i[Zone.__symbol__("OriginalDelegate")];o&&(i=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ke,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,qa(i),i.isCheckStableRunning=!0,gm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),qa(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,d,m,v)=>{try{return X_(i),o.invokeTask(l,d,m,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&s(),vd(i)}},onInvoke:(o,u,l,d,m,v,b)=>{try{return X_(i),o.invoke(l,d,m,v,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),vd(i)}},onHasTask:(o,u,l,d)=>{o.hasTask(l,d),u===l&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,qa(i),gm(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,l,d)=>(o.handleError(l,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_s.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(_s.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+l,s,_b,Su,Su);try{return d.runTask(m,o,u)}finally{d.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const _b={};function gm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function qa(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function X_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function vd(i){i._nesting--,gm(i)}class Sf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}let Eb=(()=>{class i{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_s.assertNotInAngularZone(),mb(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mb(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,l){return[]}}return i.\u0275fac=function(o){return new(o||i)(dn(_s))},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})(),Ed=(()=>{class i{constructor(){this._applications=new Map,mm.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return mm.findTestabilityInTree(this,o,u)}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();class Vx{addToWindow(s){}findTestabilityInTree(s,o,u){return null}}function Ux(i){mm=i}let mm=new Vx,ev=!0,tv=!1;function ym(){return tv=!0,ev}function Bx(){if(tv)throw new Error("Cannot enable prod mode after platform setup.");ev=!1}let oa;const mT=new wn("AllowMultipleToken");class qx{constructor(s,o){this.name=s,this.token=o}}function yT(i,s,o=[]){const u=`Platform: ${s}`,l=new wn(u);return(d=[])=>{let m=nv();if(!m||m.injector.get(mT,!1))if(i)i(o.concat(d).concat({provide:l,useValue:!0}));else{const v=o.concat(d).concat({provide:l,useValue:!0},{provide:Pl,useValue:"platform"});!function(i){if(oa&&!oa.destroyed&&!oa.injector.get(mT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");oa=i.get(vT);const s=i.get(_d,null);s&&s.forEach(o=>o())}(In.create({providers:v,name:u}))}return function(i){const s=nv();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(l)}}function nv(){return oa&&!oa.destroyed?oa:null}let vT=(()=>{class i{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const v=function(i,s){let o;return o="noop"===i?new Sf:("zone.js"===i?void 0:i)||new _s({enableLongStackTrace:ym(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:_s,useValue:v}];return v.run(()=>{const C=In.create({providers:b,parent:this.injector,name:o.moduleType.name}),S=o.create(C),N=S.injector.get(go,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const k=v.onError.subscribe({next:H=>{N.handleError(H)}});S.onDestroy(()=>{_m(this._modules,S),k.unsubscribe()})}),function(i,s,o){try{const u=o();return Yy(u)?u.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(N,v,()=>{const k=S.injector.get($c);return k.runInitializers(),k.donePromise.then(()=>(a_(S.injector.get(hm,zl)||zl),this._moduleDoBootstrap(S),S))})})}bootstrapModule(o,u=[]){const l=rv({},u);return function(i,s,o){const u=new Yg(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,l))}_moduleDoBootstrap(o){const u=o.injector.get(xf);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${K(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(o){return new(o||i)(dn(In))},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();function rv(i,s){return Array.isArray(s)?s.reduce(rv,i):Object.assign(Object.assign({},i),s)}let xf=(()=>{class i{constructor(o,u,l,d,m){this._zone=o,this._injector=u,this._exceptionHandler=l,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new L.y(C=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{_s.assertNotInAngularZone(),mb(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{_s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(v,b.pipe(i=>(0,ce.x)()(function(i,s){return function(u){let l;l="function"==typeof i?i:function(){return i};const d=Object.create(u,re.N);return d.source=u,d.subjectFactory=l,d}}(te)(i))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=o instanceof b0?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(l.componentType);const d=function(i){return i.isBoundToModule}(l)?void 0:this._injector.get(rd),v=l.create(In.NULL,[],u||l.selector,d),b=v.location.nativeElement,C=v.injector.get(Eb,null),S=C&&v.injector.get(Ed);return C&&S&&S.registerApplication(b,C),v.onDestroy(()=>{this.detachView(v.hostView),_m(this.components,v),S&&S.unregisterApplication(b)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;_m(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(dm,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(o){return new(o||i)(dn(_s),dn(In),dn(go),dn(tr),dn($c))},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();function _m(i,s){const o=i.indexOf(s);o>-1&&i.splice(o,1)}class Db{}class Ab{}const Sb={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Rf=(()=>{class i{constructor(o,u){this._compiler=o,this._config=u||Sb}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,l]=o.split("#");return void 0===l&&(l="default"),P(8255)(u).then(d=>d[l]).then(d=>xb(d,u,l)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,l]=o.split("#"),d="NgFactory";return void 0===l&&(l="default",d=""),P(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[l+d]).then(m=>xb(m,u,l))}}return i.\u0275fac=function(o){return new(o||i)(dn(pm),dn(Ab,8))},i.\u0275prov=vt({token:i,factory:i.\u0275fac}),i})();function xb(i,s,o){if(!i)throw new Error(`Cannot find '${o}' in '${s}'`);return i}const Pb=function(i){return null},RT=yT(null,"core",[{provide:Z_,useValue:"unknown"},{provide:vT,deps:[In]},{provide:Ed,deps:[]},{provide:Y_,deps:[]}]),OT=[{provide:xf,useClass:xf,deps:[_s,In,go,tr,$c]},{provide:tx,deps:[_s],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(o){s.push(o)}}},{provide:$c,useClass:$c,deps:[[new fo,cb]]},{provide:pm,useClass:pm,deps:[]},cm,{provide:kc,useFactory:function(){return w_},deps:[]},{provide:E_,useFactory:function(){return XC},deps:[]},{provide:hm,useFactory:function(i){return a_(i=i||"undefined"!=typeof $localize&&$localize.locale||zl),i},deps:[[new cc(hm),new fo,new Ma]]},{provide:Q_,useValue:"USD"}];let wm=(()=>{class i{constructor(o){}}return i.\u0275fac=function(o){return new(o||i)(dn(xf))},i.\u0275mod=Dn({type:i}),i.\u0275inj=Es({providers:OT}),i})()},8939:(qe,ge,P)=>{"use strict";P.d(ge,{hO:()=>K,xv:()=>te,Dh:()=>ce,GT:()=>ne,cc:()=>le,on:()=>F,pX:()=>re});var p=P(3018),X=P(7841),L=P(5179);qe=P.hmd(qe);const ae=["ngOnDestroy"],re=(Ae,Me,De,We={})=>new Proxy(Ae,{get:(ot,Be)=>De.runOutsideAngular(()=>{var Ft;if(Ae[Be])return(null===(Ft=null==We?void 0:We.spy)||void 0===Ft?void 0:Ft.get)&&We.spy.get(Be,Ae[Be]),Ae[Be];if(ae.indexOf(Be)>-1)return()=>{};const Dt=Me.toPromise().then(Fe=>{const Ne=Fe&&Fe[Be];return"function"==typeof Ne?Ne.bind(Fe):Ne&&Ne.then?Ne.then(je=>De.run(()=>je)):De.run(()=>Ne)});return new Proxy(()=>{},{get:(Fe,Ne)=>Dt[Ne],apply:(Fe,Ne,je)=>Dt.then(et=>{var it;const xt=et&&et(...je);return(null===(it=null==We?void 0:We.spy)||void 0===it?void 0:it.apply)&&We.spy.apply(Be,je,xt),xt})})})}),ne=(Ae,Me)=>{Me.forEach(De=>{Object.getOwnPropertyNames(De.prototype||De).forEach(We=>{Object.defineProperty(Ae.prototype,We,Object.getOwnPropertyDescriptor(De.prototype||De,We))})})};class _e{constructor(Me){return Me}}const ce=new p.OlP("angularfire2.app.options"),te=new p.OlP("angularfire2.app.name");function F(Ae,Me,De){const ot="object"==typeof De&&De||{};ot.name=ot.name||"string"==typeof De&&De||"[DEFAULT]";const Ft=X.Z.apps.filter(Dt=>Dt&&Dt.name===ot.name)[0]||Me.runOutsideAngular(()=>X.Z.initializeApp(Ae,ot));try{JSON.stringify(Ae)!==JSON.stringify(Ft.options)&&V("error",`${Ft.name} Firebase App already initialized with different options${qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Dt){}return new _e(Ft)}const V=(Ae,...Me)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Me)},Y={provide:_e,useFactory:F,deps:[ce,p.R0b,[new p.FiY,te]]};let K=(()=>{class Ae{constructor(De){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,De.toString())}static initializeApp(De,We){return{ngModule:Ae,providers:[{provide:ce,useValue:De},{provide:te,useValue:We}]}}}return Ae.\u0275fac=function(De){return new(De||Ae)(p.LFG(p.Lbi))},Ae.\u0275mod=p.oAB({type:Ae}),Ae.\u0275inj=p.cJS({providers:[Y]}),Ae})();function le(Ae,Me,De,We,ot){const[,Be,Ft]=globalThis.\u0275AngularfireInstanceCache.find(Dt=>Dt[0]===Ae)||[];if(Be)return function(Ae,Me){try{return Ae.toString()===Me.toString()}catch(De){return Ae===Me}}(ot,Ft)||(he("error",`${Me} was already initialized on the ${De} Firebase App with different settings.${pe?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ot,was:Ft})),Be;{const Dt=We();return globalThis.\u0275AngularfireInstanceCache.push([Ae,Dt,ot]),Dt}}const pe=!!qe.hot,he=(Ae,...Me)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[Ae](...Me)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5179:(qe,ge,P)=>{"use strict";P.d(ge,{q4:()=>Xf,iC:()=>Rr,HU:()=>oi,vb:()=>jo,JM:()=>sc});var p=P(3018),X=P(2329),L=P(8239),ae=P(8026),re=P(3854),ne=P(3910),_e=P(5422),ce=P(4966);const te="@firebase/installations",F="0.5.15",Y=`w:${F}`,K="FIS_v2",Me=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function De(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function We({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function ot(I){return{token:I.token,requestStatus:2,expiresIn:et(I.expiresIn),creationTime:Date.now()}}function Be(I,A){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,L.Z)(function*(I,A){const U=(yield A.json()).error;return Me.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Dt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Fe(I,{refreshToken:A}){const M=Dt(I);return M.append("Authorization",function(I){return`${K} ${I}`}(A)),M}function Ne(I){return je.apply(this,arguments)}function je(){return(je=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function et(I){return Number(I.replace("s","000"))}function xt(I,A){return $e.apply(this,arguments)}function $e(){return($e=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const U=We(I),Z=Dt(I),ie=A.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Z.append("x-firebase-client",bt)}const Ue={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:K,appId:I.appId,sdkVersion:Y})},st=yield Ne(()=>fetch(U,Ue));if(st.ok){const bt=yield st.json();return{fid:bt.fid||M,registrationStatus:2,refreshToken:bt.refreshToken,authToken:ot(bt.authToken)}}throw yield Be("Create Installation",st)})).apply(this,arguments)}function On(I){return new Promise(A=>{setTimeout(A,I)})}const Fi=/^[cdef][\w-]{21}$/;function zc(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Fi.test(M)?M:""}catch(I){return""}}function br(I){return`${I.appName}!${I.appId}`}const fi=new Map;function Ys(I,A){const M=br(I);Ur(M,A),function(I,A){const M=(!Li&&"BroadcastChannel"in self&&(Li=new BroadcastChannel("[Firebase] FID Change"),Li.onmessage=I=>{Ur(I.data.key,I.data.fid)}),Li);M&&M.postMessage({key:I,fid:A}),0===fi.size&&Li&&(Li.close(),Li=null)}(M,A)}function Ur(I,A){const M=fi.get(I);if(M)for(const U of M)U(A)}let Li=null;const Br="firebase-installations-store";let xe=null;function wr(){return xe||(xe=(0,ce.X3)("firebase-installations-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(Br)}})),xe}function Cn(I,A){return cn.apply(this,arguments)}function cn(){return(cn=(0,L.Z)(function*(I,A){const M=br(I),Z=(yield wr()).transaction(Br,"readwrite"),ie=Z.objectStore(Br),be=yield ie.get(M);return yield ie.put(A,M),yield Z.done,(!be||be.fid!==A.fid)&&Ys(I,A.fid),A})).apply(this,arguments)}function vn(I){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,L.Z)(function*(I){const A=br(I),U=(yield wr()).transaction(Br,"readwrite");yield U.objectStore(Br).delete(A),yield U.done})).apply(this,arguments)}function bs(I,A){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(I,A){const M=br(I),Z=(yield wr()).transaction(Br,"readwrite"),ie=Z.objectStore(Br),be=yield ie.get(M),Ue=A(be);return void 0===Ue?yield ie.delete(M):yield ie.put(Ue,M),yield Z.done,Ue&&(!be||be.fid!==Ue.fid)&&Ys(I,Ue.fid),Ue})).apply(this,arguments)}function jr(I){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*(I){let A;const M=yield bs(I.appConfig,U=>{const Z=ei(U),ie=pn(I,Z);return A=ie.registrationPromise,ie.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function ei(I){return Rt(I||{fid:zc(),registrationStatus:0})}function pn(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(Me.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()},U=function(I,A){return tt.apply(this,arguments)}(I,M);return{installationEntry:M,registrationPromise:U}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:zn(I)}:{installationEntry:A}}function tt(){return(tt=(0,L.Z)(function*(I,A){try{const M=yield xt(I,A);return Cn(I.appConfig,M)}catch(M){throw De(M)&&409===M.customData.serverCode?yield vn(I.appConfig):yield Cn(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function zn(I){return pi.apply(this,arguments)}function pi(){return(pi=(0,L.Z)(function*(I){let A=yield gi(I.appConfig);for(;1===A.registrationStatus;)yield On(100),A=yield gi(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield jr(I);return U||M}return A})).apply(this,arguments)}function gi(I){return bs(I,A=>{if(!A)throw Me.create("installation-not-found");return Rt(A)})}function Rt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Io(I,A){return ln.apply(this,arguments)}function ln(){return(ln=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const U=Ya(I,M),Z=Fe(I,M),ie=A.getImmediate({optional:!0});if(ie){const bt=yield ie.getHeartbeatsHeader();bt&&Z.append("x-firebase-client",bt)}const Ue={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Y,appId:I.appId}})},st=yield Ne(()=>fetch(U,Ue));if(st.ok)return ot(yield st.json());throw yield Be("Generate Auth Token",st)})).apply(this,arguments)}function Ya(I,{fid:A}){return`${We(I)}/${A}/authTokens:generate`}function Ke(I){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(I,A=!1){let M;const U=yield bs(I.appConfig,ie=>{if(!Wt(ie))throw Me.create("not-registered");const be=ie.authToken;if(!A&&$(be))return ie;if(1===be.requestStatus)return M=Ge(I,A),ie;{if(!navigator.onLine)throw Me.create("app-offline");const Ue=W(ie);return M=Et(I,Ue),Ue}});return M?yield M:U.authToken})).apply(this,arguments)}function Ge(I,A){return ve.apply(this,arguments)}function ve(){return(ve=(0,L.Z)(function*(I,A){let M=yield Re(I.appConfig);for(;1===M.authToken.requestStatus;)yield On(100),M=yield Re(I.appConfig);const U=M.authToken;return 0===U.requestStatus?Ke(I,A):U})).apply(this,arguments)}function Re(I){return bs(I,A=>{if(!Wt(A))throw Me.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Et(I,A){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,L.Z)(function*(I,A){try{const M=yield Io(I,A),U=Object.assign(Object.assign({},A),{authToken:M});return yield Cn(I.appConfig,U),M}catch(M){if(!De(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Cn(I.appConfig,U)}else yield vn(I.appConfig);throw M}})).apply(this,arguments)}function Wt(I){return void 0!==I&&2===I.registrationStatus}function $(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function W(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function ze(){return(ze=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:U}=yield jr(A);return U?U.catch(console.error):Ke(A).catch(console.error),M.fid})).apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(I,A=!1){const M=I;return yield Wn(M),(yield Ke(M,A)).token})).apply(this,arguments)}function Wn(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,L.Z)(function*(I){const{registrationPromise:A}=yield jr(I);A&&(yield A)})).apply(this,arguments)}function Kn(I){return Me.create("missing-app-config-values",{valueName:I})}const Dd="installations";(0,ae._registerComponent)(new ne.wA(Dd,I=>{const A=I.getProvider("app").getImmediate(),M=function(I){if(!I||!I.options)throw Kn("App Configuration");if(!I.name)throw Kn("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Kn(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A);return{app:A,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,Dd).getImmediate();return{getId:()=>function(I){return ze.apply(this,arguments)}(M),getToken:Z=>function(I){return tn.apply(this,arguments)}(M,Z)}},"PRIVATE")),(0,ae.registerVersion)(te,F),(0,ae.registerVersion)(te,F,"esm2017");const En="@firebase/remote-config",gn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Td{constructor(A,M,U,Z){this.client=A,this.storage=M,this.storageCache=U,this.logger=Z}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Z=U<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${Z}.`),Z}fetch(A){var M=this;return(0,L.Z)(function*(){const[U,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(A.cacheMaxAgeMillis,U))return Z;A.eTag=Z&&Z.eTag;const ie=yield M.client.fetch(A),be=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&be.push(M.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(be),ie})()}}function ns(I=navigator){return I.languages&&I.languages[0]||I.language}class Tn{constructor(A,M,U,Z,ie,be){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=U,this.projectId=Z,this.apiKey=ie,this.appId=be}fetch(A){var M=this;return(0,L.Z)(function*(){var U,Z,ie;const[be,Ue]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),bt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,At={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},ct={sdk_version:M.sdkVersion,app_instance_id:be,app_instance_id_token:Ue,app_id:M.appId,language_code:ns()},$n={method:"POST",headers:At,body:JSON.stringify(ct)},lt=fetch(bt,$n),co=new Promise((dn,pr)=>{A.signal.addEventListener(()=>{const uc=new Error("The operation was aborted.");uc.name="AbortError",pr(uc)})});let Ns;try{yield Promise.race([lt,co]),Ns=yield lt}catch(dn){let pr="fetch-client-network";throw"AbortError"===(null===(U=dn)||void 0===U?void 0:U.name)&&(pr="fetch-timeout"),gn.create(pr,{originalErrorMessage:null===(Z=dn)||void 0===Z?void 0:Z.message})}let zi=Ns.status;const Os=Ns.headers.get("ETag")||void 0;let lo,ks;if(200===Ns.status){let dn;try{dn=yield Ns.json()}catch(pr){throw gn.create("fetch-client-parse",{originalErrorMessage:null===(ie=pr)||void 0===ie?void 0:ie.message})}lo=dn.entries,ks=dn.state}if("INSTANCE_STATE_UNSPECIFIED"===ks?zi=500:"NO_CHANGE"===ks?zi=304:("NO_TEMPLATE"===ks||"EMPTY_CONFIG"===ks)&&(lo={}),304!==zi&&200!==zi)throw gn.create("fetch-status",{httpStatus:zi});return{status:zi,eTag:Os,config:lo}})()}}class ws{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,U)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:U}){var Z=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),ie=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(ie),U(gn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ie=yield Z.client.fetch(A);return yield Z.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ie))throw ie;const be={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(be),Z.attemptFetch(A,be)}})()}}class Vf{constructor(A,M,U,Z,ie){this.app=A,this._client=M,this._storageCache=U,this._storage=Z,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pa(I,A){var M;const U=I.target.error||void 0;return gn.create(A,{originalErrorMessage:U&&(null===(M=U)||void 0===M?void 0:M.message)})}const To="app_namespace_store";class Jc{constructor(A,M,U,Z=function(){return new Promise((I,A)=>{var M;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=Z=>{A(pa(Z,"storage-open"))},U.onsuccess=Z=>{I(Z.target.result)},U.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(To,{keyPath:"compositeKey"})}}catch(U){A(gn.create("storage-open",{originalErrorMessage:null===(M=U)||void 0===M?void 0:M.message}))}})}()){this.appId=A,this.appName=M,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,ie)=>{var be;const st=U.transaction([To],"readonly").objectStore(To),bt=M.createCompositeKey(A);try{const At=st.get(bt);At.onerror=ct=>{ie(pa(ct,"storage-get"))},At.onsuccess=ct=>{const $n=ct.target.result;Z($n?$n.value:void 0)}}catch(At){ie(gn.create("storage-get",{originalErrorMessage:null===(be=At)||void 0===be?void 0:be.message}))}})})()}set(A,M){var U=this;return(0,L.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ie,be)=>{var Ue;const bt=Z.transaction([To],"readwrite").objectStore(To),At=U.createCompositeKey(A);try{const ct=bt.put({compositeKey:At,value:M});ct.onerror=$n=>{be(pa($n,"storage-set"))},ct.onsuccess=()=>{ie()}}catch(ct){be(gn.create("storage-set",{originalErrorMessage:null===(Ue=ct)||void 0===Ue?void 0:Ue.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,ie)=>{var be;const st=U.transaction([To],"readwrite").objectStore(To),bt=M.createCompositeKey(A);try{const At=st.delete(bt);At.onerror=ct=>{ie(pa(ct,"storage-delete"))},At.onsuccess=()=>{Z()}}catch(At){ie(gn.create("storage-delete",{originalErrorMessage:null===(be=At)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class xd{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),U=A.storage.getLastSuccessfulFetchTimestampMillis(),Z=A.storage.getActiveConfig(),ie=yield M;ie&&(A.lastFetchStatus=ie);const be=yield U;be&&(A.lastSuccessfulFetchTimestampMillis=be);const Ue=yield Z;Ue&&(A.activeConfig=Ue)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function Xc(){return Md.apply(this,arguments)}function Md(){return(Md=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("remote-config",function(A,{instanceIdentifier:M}){const U=A.getProvider("app").getImmediate(),Z=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw gn.create("registration-window");if(!(0,re.hl)())throw gn.create("indexed-db-unavailable");const{projectId:ie,apiKey:be,appId:Ue}=U.options;if(!ie)throw gn.create("registration-project-id");if(!be)throw gn.create("registration-api-key");if(!Ue)throw gn.create("registration-app-id");const st=new Jc(Ue,U.name,M=M||"firebase"),bt=new xd(st),At=new _e.Yd(En);At.logLevel=_e.in.ERROR;const ct=new Tn(Z,ae.SDK_VERSION,M,ie,be,Ue),$n=new ws(ct,st),lt=new Td($n,st,bt,At),co=new Vf(U,lt,bt,st,At);return function(I){const A=(0,re.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(co),co},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(En,"0.3.14"),(0,ae.registerVersion)(En,"0.3.14","esm2017");const Nd="/firebase-messaging-sw.js",km="/firebase-cloud-messaging-push-scope",Ja="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xa="google.c.a.c_id",kd="google.c.a.c_l",Pd="google.c.a.ts",eu="google.c.a.e";var qr=(()=>{return(I=qr||(qr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",qr;var I})();function rs(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ui(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Z=new Uint8Array(U.length);for(let ie=0;ie<U.length;++ie)Z[ie]=U.charCodeAt(ie);return Z}const tu="fcm_token_details_db",Bf="fcm_token_object_Store";function el(I){return nu.apply(this,arguments)}function nu(){return nu=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(tu))return null;let A=null;return(yield(0,ce.X3)(tu,5,{upgrade:(U=(0,L.Z)(function*(Z,ie,be,Ue){var st;if(ie<2||!Z.objectStoreNames.contains(Bf))return;const bt=Ue.objectStore(Bf),At=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),At)if(2===ie){const ct=At;if(!ct.auth||!ct.p256dh||!ct.endpoint)return;A={token:ct.fcmToken,createTime:null!==(st=ct.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:ct.auth,p256dh:ct.p256dh,endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:"string"==typeof ct.vapidKey?ct.vapidKey:rs(ct.vapidKey)}}}else if(3===ie){const ct=At;A={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:rs(ct.auth),p256dh:rs(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:rs(ct.vapidKey)}}}else if(4===ie){const ct=At;A={token:ct.fcmToken,createTime:ct.createTime,subscriptionOptions:{auth:rs(ct.auth),p256dh:rs(ct.p256dh),endpoint:ct.endpoint,swScope:ct.swScope,vapidKey:rs(ct.vapidKey)}}}}),function(ie,be,Ue,st){return U.apply(this,arguments)})})).close(),yield(0,ce.Lj)(tu),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),tl(A)?A:null;var U}),nu.apply(this,arguments)}function tl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const jn="firebase-messaging-store";let Bi=null;function ju(){return Bi||(Bi=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(I,A)=>{0===A&&I.createObjectStore(jn)}})),Bi}function ga(I){return ji.apply(this,arguments)}function ji(){return(ji=(0,L.Z)(function*(I){const A=Is(I),U=yield(yield ju()).transaction(jn).objectStore(jn).get(A);if(U)return U;{const Z=yield el(I.appConfig.senderId);if(Z)return yield Hu(I,Z),Z}})).apply(this,arguments)}function Hu(I,A){return So.apply(this,arguments)}function So(){return(So=(0,L.Z)(function*(I,A){const M=Is(I),Z=(yield ju()).transaction(jn,"readwrite");return yield Z.objectStore(jn).put(A,M),yield Z.done,A})).apply(this,arguments)}function Jt(I){return to.apply(this,arguments)}function to(){return(to=(0,L.Z)(function*(I){const A=Is(I),U=(yield ju()).transaction(jn,"readwrite");yield U.objectStore(jn).delete(A),yield U.done})).apply(this,arguments)}function Is({appConfig:I}){return I.appId}const Vt=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vd(I,A){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,L.Z)(function*(I,A){var M;const U=yield ir(I),Z=ru(A),ie={method:"POST",headers:U,body:JSON.stringify(Z)};let be;try{be=yield(yield fetch(no(I.appConfig),ie)).json()}catch(Ue){throw Vt.create("token-subscribe-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(be.error)throw Vt.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw Vt.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Cs(I,A){return ti.apply(this,arguments)}function ti(){return(ti=(0,L.Z)(function*(I,A){var M;const U=yield ir(I),Z=ru(A.subscriptionOptions),ie={method:"PATCH",headers:U,body:JSON.stringify(Z)};let be;try{be=yield(yield fetch(`${no(I.appConfig)}/${A.token}`,ie)).json()}catch(Ue){throw Vt.create("token-update-failed",{errorInfo:null===(M=Ue)||void 0===M?void 0:M.toString()})}if(be.error)throw Vt.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw Vt.create("token-update-no-token");return be.token})).apply(this,arguments)}function $u(I,A){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,L.Z)(function*(I,A){var M;const Z={method:"DELETE",headers:yield ir(I)};try{const be=yield(yield fetch(`${no(I.appConfig)}/${A}`,Z)).json();if(be.error)throw Vt.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ie){throw Vt.create("token-unsubscribe-failed",{errorInfo:null===(M=ie)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function no({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function ir(I){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function ru({p256dh:I,auth:A,endpoint:M,vapidKey:U}){const Z={web:{endpoint:M,auth:A,p256dh:I}};return U!==Ja&&(Z.web.applicationPubKey=U),Z}const Bd=6048e5;function is(I){return xo.apply(this,arguments)}function xo(){return(xo=(0,L.Z)(function*(I){const A=yield ma(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:rs(A.getKey("auth")),p256dh:rs(A.getKey("p256dh"))},U=yield ga(I.firebaseDependencies);if(U){if(nl(U.subscriptionOptions,M))return Date.now()>=U.createTime+Bd?Pm(I,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield $u(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return Ro(I.firebaseDependencies,M)}return Ro(I.firebaseDependencies,M)})).apply(this,arguments)}function iu(I){return ft.apply(this,arguments)}function ft(){return(ft=(0,L.Z)(function*(I){const A=yield ga(I.firebaseDependencies);A&&(yield $u(I.firebaseDependencies,A.token),yield Jt(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Pm(I,A){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,L.Z)(function*(I,A){try{const M=yield Cs(I.firebaseDependencies,A),U=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Hu(I.firebaseDependencies,U),M}catch(M){throw yield iu(I),M}})).apply(this,arguments)}function Ro(I,A){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,L.Z)(function*(I,A){const U={token:yield Vd(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Hu(I,U),U.token})).apply(this,arguments)}function ma(I,A){return As.apply(this,arguments)}function As(){return(As=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ui(A)})})).apply(this,arguments)}function nl(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ee(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const U=A.notification.body;U&&(I.notification.body=U);const Z=A.notification.image;Z&&(I.notification.image=Z)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){var M,U,Z,ie,be;if(!A.fcmOptions&&!(null===(M=A.notification)||void 0===M?void 0:M.click_action))return;I.fcmOptions={};const Ue=null!==(Z=null===(U=A.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Z?Z:null===(ie=A.notification)||void 0===ie?void 0:ie.click_action;Ue&&(I.fcmOptions.link=Ue);const st=null===(be=A.fcmOptions)||void 0===be?void 0:be.analytics_label;st&&(I.fcmOptions.analyticsLabel=st)}(A,I),A}function Gu(I){return"object"==typeof I&&!!I&&Xa in I}function No(I,A){const M=[];for(let U=0;U<I.length;U++)M.push(I.charAt(U)),U<A.length&&M.push(A.charAt(U));return M.join("")}function ya(I){return Vt.create("missing-app-config-values",{valueName:I})}No("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),No("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ro{constructor(A,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(I){if(!I||!I.options)throw ya("App Configuration Object");if(!I.name)throw ya("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const U of A)if(!M[U])throw ya(U);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:Z,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function jd(I){return qu.apply(this,arguments)}function qu(){return(qu=(0,L.Z)(function*(I){var A;try{I.swRegistration=yield navigator.serviceWorker.register(Nd,{scope:km}),I.swRegistration.update().catch(()=>{})}catch(M){throw Vt.create("failed-service-worker-registration",{browserErrorMessage:null===(A=M)||void 0===A?void 0:A.message})}})).apply(this,arguments)}function _a(I,A){return ss.apply(this,arguments)}function ss(){return(ss=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield jd(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Vt.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function sr(I,A){return zr.apply(this,arguments)}function zr(){return(zr=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Ja)})).apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(I,A){if(!navigator)throw Vt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vt.create("permission-blocked");return yield sr(I,null==A?void 0:A.vapidKey),yield _a(I,null==A?void 0:A.serviceWorkerRegistration),is(I)})).apply(this,arguments)}function Hi(I,A,M){return rl.apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(I,A,M){const U=zu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Xa],message_name:M[kd],message_time:M[Pd],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zu(I){switch(I){case qr.NOTIFICATION_CLICKED:return"notification_open";case qr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function va(){return(va=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===qr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ee(M)):I.onMessageHandler.next(Ee(M)));const U=M.data;Gu(U)&&"1"===U[eu]&&(yield Hi(I,M.messageType,U))})).apply(this,arguments)}const ou="@firebase/messaging";function Zu(){return ko.apply(this,arguments)}function ko(){return(ko=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new ne.wA("messaging",I=>{const A=new ro(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return va.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new ne.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,A){return io.apply(this,arguments)}(A,U)}},"PRIVATE")),(0,ae.registerVersion)(ou,"0.9.19"),(0,ae.registerVersion)(ou,"0.9.19","esm2017");const ni="analytics",bn="firebase_id",uu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qd="https://www.googletagmanager.com/gtag/js",Hn=new _e.Yd("@firebase/analytics");function zd(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function wa(I,A){const M=document.createElement("script");M.src=`${qd}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function ol(I,A,M,U,Z,ie){return cu.apply(this,arguments)}function cu(){return(cu=(0,L.Z)(function*(I,A,M,U,Z,ie){const be=U[Z];try{if(be)yield A[be];else{const st=(yield zd(M)).find(bt=>bt.measurementId===Z);st&&(yield A[st.appId])}}catch(Ue){Hn.error(Ue)}I("config",Z,ie)})).apply(this,arguments)}function Qu(I,A,M,U,Z){return al.apply(this,arguments)}function al(){return(al=(0,L.Z)(function*(I,A,M,U,Z){try{let ie=[];if(Z&&Z.send_to){let be=Z.send_to;Array.isArray(be)||(be=[be]);const Ue=yield zd(M);for(const st of be){const bt=Ue.find(ct=>ct.measurementId===st),At=bt&&A[bt.appId];if(!At){ie=[];break}ie.push(At)}}0===ie.length&&(ie=Object.values(A)),yield Promise.all(ie),I("event",U,Z||{})}catch(ie){Hn.error(ie)}})).apply(this,arguments)}function Lm(I){const A=window.document.getElementsByTagName("script");for(const M of Object.values(A))if(M.src&&M.src.includes(qd)&&M.src.includes(I))return M;return null}const hr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Wf=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Vm(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function lu(I){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:U}=I,Z={method:"GET",headers:Vm(U)},ie=uu.replace("{app-id}",M),be=yield fetch(ie,Z);if(200!==be.status&&304!==be.status){let Ue="";try{const st=yield be.json();(null===(A=st.error)||void 0===A?void 0:A.message)&&(Ue=st.error.message)}catch(st){}throw hr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Ue})}return be.json()})).apply(this,arguments)}function Zf(I){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,L.Z)(function*(I,A=Wf,M){const{appId:U,apiKey:Z,measurementId:ie}=I.options;if(!U)throw hr.create("no-app-id");if(!Z){if(ie)return{measurementId:ie,appId:U};throw hr.create("no-api-key")}const be=A.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ue=new du;return setTimeout((0,L.Z)(function*(){Ue.abort()}),void 0!==M?M:6e4),Kf({appId:U,apiKey:Z,measurementId:ie},be,Ue,A)})).apply(this,arguments)}function Kf(I,A,M){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},U,Z=Wf){var ie,be;const{appId:Ue,measurementId:st}=I;try{yield $i(U,A)}catch(bt){if(st)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${null===(ie=bt)||void 0===ie?void 0:ie.message}]`),{appId:Ue,measurementId:st};throw bt}try{const bt=yield lu(I);return Z.deleteThrottleMetadata(Ue),bt}catch(bt){const At=bt;if(!ul(At)){if(Z.deleteThrottleMetadata(Ue),st)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${null==At?void 0:At.message}]`),{appId:Ue,measurementId:st};throw bt}const ct=503===Number(null===(be=null==At?void 0:At.customData)||void 0===be?void 0:be.httpStatus)?(0,re.$s)(M,Z.intervalMillis,30):(0,re.$s)(M,Z.intervalMillis),$n={throttleEndTimeMillis:Date.now()+ct,backoffCount:M+1};return Z.setThrottleMetadata(Ue,$n),Hn.debug(`Calling attemptFetch again in ${ct} millis`),Kf(I,$n,U,Z)}})).apply(this,arguments)}function $i(I,A){return new Promise((M,U)=>{const Z=Math.max(A-Date.now(),0),ie=setTimeout(M,Z);I.addEventListener(()=>{clearTimeout(ie),U(hr.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function ul(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class du{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}let ec,Ar;function Zd(){return(Zd=(0,L.Z)(function*(I,A,M,U,Z){if(Z&&Z.global)I("event",M,U);else{const ie=yield A;I("event",M,Object.assign(Object.assign({},U),{send_to:ie}))}})).apply(this,arguments)}function hu(I){Ar=I}function Kd(I){ec=I}function Ss(){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,L.Z)(function*(){var I;if(!(0,re.hl)())return Hn.warn(hr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(A){return Hn.warn(hr.create("indexeddb-unavailable",{errorInfo:null===(I=A)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Lo(){return(Lo=(0,L.Z)(function*(I,A,M,U,Z,ie,be){var Ue;const st=Zf(I);st.then(lt=>{M[lt.measurementId]=lt.appId,I.options.measurementId&&lt.measurementId!==I.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${lt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lt=>Hn.error(lt)),A.push(st);const bt=Ss().then(lt=>{if(lt)return U.getId()}),[At,ct]=yield Promise.all([st,bt]);Lm(ie)||wa(ie,At.measurementId),Ar&&(Z("consent","default",Ar),hu(void 0)),Z("js",new Date);const $n=null!==(Ue=null==be?void 0:be.config)&&void 0!==Ue?Ue:{};return $n.origin="firebase",$n.update=!0,null!=ct&&($n[bn]=ct),Z("config",At.measurementId,$n),ec&&(Z("set",ec),Kd(void 0)),At.measurementId})).apply(this,arguments)}class Qd{constructor(A){this.app=A}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},Da=[];const nc={};let os,as,rc="dataLayer",ao=!1;function Vo(I,A,M){!function(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),M=hr.create("invalid-analytics-context",{errorInfo:A});Hn.warn(M.message)}}();const U=I.options.appId;if(!U)throw hr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw hr.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[U])throw hr.create("already-exists",{id:U});if(!ao){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(rc);const{wrappedGtag:ie,gtagCore:be}=function(I,A,M,U,Z){let ie=function(...be){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ie=window[Z]),window[Z]=function(I,A,M,U){function ie(){return(ie=(0,L.Z)(function*(be,Ue,st){try{"event"===be?yield Qu(I,A,M,Ue,st):"config"===be?yield ol(I,A,M,U,Ue,st):"consent"===be?I("consent","update",st):I("set",Ue)}catch(bt){Hn.error(bt)}})).apply(this,arguments)}return function(be,Ue,st){return ie.apply(this,arguments)}}(ie,I,A,M),{gtagCore:ie,wrappedGtag:window[Z]}}(Xt,Da,nc,rc,"gtag");as=ie,os=be,ao=!0}return Xt[U]=function(I,A,M,U,Z,ie,be){return Lo.apply(this,arguments)}(I,Da,nc,A,os,rc,M),new Qd(I)}function Yn(){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const Ta="@firebase/analytics";(0,ae._registerComponent)(new ne.wA(ni,(A,{options:M})=>Vo(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ne.wA("analytics-internal",function(A){try{const M=A.getProvider(ni).getImmediate();return{logEvent:(U,Z,ie)=>function(I,A,M,U){I=(0,re.m9)(I),function(I,A,M,U,Z){return Zd.apply(this,arguments)}(as,Xt[I.app.options.appId],A,M,U).catch(Z=>Hn.error(Z))}(M,U,Z,ie)}}catch(M){throw hr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(Ta,"0.8.3"),(0,ae.registerVersion)(Ta,"0.8.3","esm2017");var Rs=P(7771),Hm=P(3637),Jd=P(3342),Sa=P(3101),Jf=P(309);const Xf=new p.GfV("7.4.1"),fr="__angularfire_symbol__analyticsIsSupportedValue",vi="__angularfire_symbol__analyticsIsSupported",Uo="__angularfire_symbol__remoteConfigIsSupportedValue",An="__angularfire_symbol__remoteConfigIsSupported",xa="__angularfire_symbol__messagingIsSupportedValue",Bo="__angularfire_symbol__messagingIsSupported";function sc(I,A,M){if(A){if(1===A.length)return A[0];const ie=A.filter(be=>be.app===M);if(1===ie.length)return ie[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[vi]||(globalThis[vi]=Yn().then(I=>globalThis[fr]=I).catch(()=>globalThis[fr]=!1)),globalThis[Bo]||(globalThis[Bo]=Zu().then(I=>globalThis[xa]=I).catch(()=>globalThis[xa]=!1)),globalThis[An]||(globalThis[An]=Xc().then(I=>globalThis[Uo]=I).catch(()=>globalThis[Uo]=!1));const jo=(I,A)=>{const M=A?[A]:(0,X.C6)(),U=[];return M.forEach(Z=>{Z.container.getProvider(I).instances.forEach(be=>{U.includes(be)||U.push(be)})}),U};function xr(){}class fl{constructor(A,M=Rs.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,U){const Z=this.zone;return this.delegate.schedule(function(be){Z.runGuarded(()=>{A.apply(this,[be])})},M,U)}}class Ho{constructor(A){this.zone=A,this.task=null}call(A,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xr,{},xr,xr)),M.pipe((0,Jd.b)({next:U,complete:U,error:U})).subscribe(A).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let oi=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new fl(Zone.current)),this.insideAngular=M.run(()=>new fl(Zone.current,Hm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(p.LFG(p.R0b))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function uo(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Rr(I){return uo(),function(I){return function(M){return(M=M.lift(new Ho(I.ngZone))).pipe((0,Sa.R)(I.outsideAngular),(0,Jf.QV)(I.insideAngular))}}(uo())(I)}},3854:(qe,ge,P)=>{"use strict";P.d(ge,{BH:()=>Vr,LL:()=>fi,ZR:()=>br,zI:()=>Fe,US:()=>ne,tV:()=>te,L:()=>ce,$s:()=>Re,r3:()=>Un,Sg:()=>zc,ne:()=>Hr,vZ:()=>Cn,ZB:()=>V,pd:()=>Qe,aH:()=>Xr,Pz:()=>Fi,m9:()=>Wt,z$:()=>K,jU:()=>pe,ru:()=>he,xb:()=>xe,w1:()=>De,hl:()=>Ft,uI:()=>le,UG:()=>we,b$:()=>Ae,G6:()=>Be,xO:()=>Qs,zd:()=>bs,eu:()=>Dt});const ae=function($){const j=[];let W=0;for(let me=0;me<$.length;me++){let se=$.charCodeAt(me);se<128?j[W++]=se:se<2048?(j[W++]=se>>6|192,j[W++]=63&se|128):55296==(64512&se)&&me+1<$.length&&56320==(64512&$.charCodeAt(me+1))?(se=65536+((1023&se)<<10)+(1023&$.charCodeAt(++me)),j[W++]=se>>18|240,j[W++]=se>>12&63|128,j[W++]=se>>6&63|128,j[W++]=63&se|128):(j[W++]=se>>12|224,j[W++]=se>>6&63|128,j[W++]=63&se|128)}return j},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let se=0;se<$.length;se+=3){const ze=$[se],Nt=se+1<$.length,tn=Nt?$[se+1]:0,Wn=se+2<$.length,Zn=Wn?$[se+2]:0;let lr=(15&tn)<<2|Zn>>6,la=63&Zn;Wn||(la=64,Nt||(lr=64)),me.push(W[ze>>2],W[(3&ze)<<4|tn>>4],W[lr],W[la])}return me.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(ae($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let W=0,me=0;for(;W<$.length;){const se=$[W++];if(se<128)j[me++]=String.fromCharCode(se);else if(se>191&&se<224){const ze=$[W++];j[me++]=String.fromCharCode((31&se)<<6|63&ze)}else if(se>239&&se<365){const Wn=((7&se)<<18|(63&$[W++])<<12|(63&$[W++])<<6|63&$[W++])-65536;j[me++]=String.fromCharCode(55296+(Wn>>10)),j[me++]=String.fromCharCode(56320+(1023&Wn))}else{const ze=$[W++],Nt=$[W++];j[me++]=String.fromCharCode((15&se)<<12|(63&ze)<<6|63&Nt)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const W=j?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let se=0;se<$.length;){const ze=W[$.charAt(se++)],tn=se<$.length?W[$.charAt(se)]:0;++se;const Zn=se<$.length?W[$.charAt(se)]:64;++se;const Ut=se<$.length?W[$.charAt(se)]:64;if(++se,null==ze||null==tn||null==Zn||null==Ut)throw Error();me.push(ze<<2|tn>>4),64!==Zn&&(me.push(tn<<4&240|Zn>>2),64!==Ut&&me.push(Zn<<6&192|Ut))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ce=function($){return function($){const j=ae($);return ne.encodeByteArray(j,!0)}($).replace(/\./g,"")},te=function($){try{return ne.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function V($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const W in j)!j.hasOwnProperty(W)||!Y(W)||($[W]=V($[W],j[W]));return $}function Y($){return"__proto__"!==$}function K(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(K())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function pe(){return"object"==typeof self&&self.self===self}function he(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function De(){const $=K();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Be(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ft(){return"object"==typeof indexedDB}function Dt(){return new Promise(($,j)=>{try{let W=!0;const me="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(me);se.onsuccess=()=>{se.result.close(),W||self.indexedDB.deleteDatabase(me),$(!0)},se.onupgradeneeded=()=>{W=!1},se.onerror=()=>{var ze;j((null===(ze=se.error)||void 0===ze?void 0:ze.message)||"")}}catch(W){j(W)}})}function Fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const xt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if("undefined"==typeof document)return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const j=$&&te($[1]);return j&&JSON.parse(j)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},Xr=()=>{var $;return null===($=xt())||void 0===$?void 0:$.config},Fi=$=>{var j;return null===(j=xt())||void 0===j?void 0:j[`_${$}`]};class Vr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,W)=>{this.resolve=j,this.reject=W})}wrapCallback(j){return(W,me)=>{W?this.reject(W):this.resolve(me),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(W):j(W,me))}}}function zc($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=j||"demo-project",se=$.iat||0,ze=$.sub||$.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:se,exp:se+3600,auth_time:se,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Nt)),""].join(".")}class br extends Error{constructor(j,W,me){super(W),this.code=j,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fi.prototype.create)}}class fi{constructor(j,W,me){this.service=j,this.serviceName=W,this.errors=me}create(j,...W){const me=W[0]||{},se=`${this.service}/${j}`,ze=this.errors[j],Nt=ze?function($,j){return $.replace(fn,(W,me)=>{const se=j[me];return null!=se?String(se):`<${me}?>`})}(ze,me):"Error";return new br(se,`${this.serviceName}: ${Nt} (${se}).`,me)}}const fn=/\{\$([^}]+)}/g;function Un($,j){return Object.prototype.hasOwnProperty.call($,j)}function xe($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function Cn($,j){if($===j)return!0;const W=Object.keys($),me=Object.keys(j);for(const se of W){if(!me.includes(se))return!1;const ze=$[se],Nt=j[se];if(cn(ze)&&cn(Nt)){if(!Cn(ze,Nt))return!1}else if(ze!==Nt)return!1}for(const se of me)if(!W.includes(se))return!1;return!0}function cn($){return null!==$&&"object"==typeof $}function Qs($){const j=[];for(const[W,me]of Object.entries($))Array.isArray(me)?me.forEach(se=>{j.push(encodeURIComponent(W)+"="+encodeURIComponent(se))}):j.push(encodeURIComponent(W)+"="+encodeURIComponent(me));return j.length?"&"+j.join("&"):""}function bs($){const j={};return $.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[se,ze]=me.split("=");j[decodeURIComponent(se)]=decodeURIComponent(ze)}}),j}function Qe($){const j=$.indexOf("?");if(!j)return"";const W=$.indexOf("#",j);return $.substring(j,W>0?W:void 0)}function Hr($,j){const W=new ei($,j);return W.subscribe.bind(W)}class ei{constructor(j,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{j(this)}).catch(me=>{this.error(me)})}next(j){this.forEachObserver(W=>{W.next(j)})}error(j){this.forEachObserver(W=>{W.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,W,me){let se;if(void 0===j&&void 0===W&&void 0===me)throw new Error("Missing Observer.");se=function($,j){if("object"!=typeof $||null===$)return!1;for(const W of["next","error","complete"])if(W in $&&"function"==typeof $[W])return!0;return!1}(j)?j:{next:j,error:W,complete:me},void 0===se.next&&(se.next=tt),void 0===se.error&&(se.error=tt),void 0===se.complete&&(se.complete=tt);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(Nt){}}),this.observers.push(se),ze}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,j)}sendOne(j,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{W(this.observers[j])}catch(me){"undefined"!=typeof console&&console.error&&console.error(me)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tt(){}function Re($,j=1e3,W=2){const me=j*Math.pow(W,$),se=Math.round(.5*me*(Math.random()-.5)*2);return Math.min(144e5,me+se)}function Wt($){return $&&$._delegate?$._delegate:$}},2329:(qe,ge,P)=>{"use strict";P.d(ge,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=P(8026);(0,p.registerVersion)("firebase","9.12.1","app")},7841:(qe,ge,P)=>{"use strict";P.d(ge,{Z:()=>p.Z});var p=P(3394);p.Z.registerVersion("firebase","9.12.1","app-compat")},8241:(qe,ge,P)=>{"use strict";P.r(ge);var p=P(8239),X=P(3394),L=P(3854),ae=P(8026),re=P(5422);function te(_,f){var g={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&f.indexOf(E)<0&&(g[E]=_[E]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(E=Object.getOwnPropertySymbols(_);T<E.length;T++)f.indexOf(E[T])<0&&Object.prototype.propertyIsEnumerable.call(_,E[T])&&(g[E[T]]=_[E[T]])}return g}var On=P(3910);const Ys=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},fn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Gt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),es=new re.Yd("@firebase/auth");function Li(_,...f){es.logLevel<=re.in.ERROR&&es.error(`Auth (${ae.SDK_VERSION}): ${_}`,...f)}function vt(_,...f){throw Br(_,...f)}function Vn(_,...f){return Br(_,...f)}function Es(_,f,g){const E=Object.assign(Object.assign({},fn()),{[f]:g});return new L.LL("auth","Firebase",E).create(f,{appName:_.name})}function Un(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&vt(_,"argument-error"),Es(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Br(_,...f){if("string"!=typeof _){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(g,...E)}return Gt.create(_,...f)}function xe(_,f,...g){if(!_)throw Br(f,...g)}function wr(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Li(f),new Error(f)}function Cn(_,f){_||wr(f)}const cn=new Map;function vn(_){Cn(_ instanceof Function,"Expected a class definition");let f=cn.get(_);return f?(Cn(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,cn.set(_,f),f)}function Qe(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function jr(){return"http:"===Hr()||"https:"===Hr()}function Hr(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class nt{constructor(f,g){this.shortDelay=f,this.longDelay=g,Cn(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jr()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tt(_,f){Cn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class zn{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gi=new nt(3e4,6e4);function Rt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Yt(_,f,g,E){return Io.apply(this,arguments)}function Io(){return(Io=(0,p.Z)(function*(_,f,g,E,T={}){return ln(_,T,(0,p.Z)(function*(){let x={},B={};E&&("GET"===f?B=E:x={body:JSON.stringify(E)});const J=(0,L.xO)(Object.assign({key:_.config.apiKey},B)).slice(1),Se=yield _._getAdditionalHeaders();return Se["Content-Type"]="application/json",_.languageCode&&(Se["X-Firebase-Locale"]=_.languageCode),zn.fetch()(Ge(_,_.config.apiHost,g,J),Object.assign({method:f,headers:Se,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function ln(_,f,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,p.Z)(function*(_,f,g){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},pi),f);try{const T=new ve(_),x=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const B=yield x.json();if("needConfirmation"in B)throw Re(_,"account-exists-with-different-credential",B);if(x.ok&&!("errorMessage"in B))return B;{const J=x.ok?B.errorMessage:B.error.message,[Se,Ie]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Se)throw Re(_,"credential-already-in-use",B);if("EMAIL_EXISTS"===Se)throw Re(_,"email-already-in-use",B);if("USER_DISABLED"===Se)throw Re(_,"user-disabled",B);const Ze=E[Se]||Se.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw Es(_,Ze,Ie);vt(_,Ze)}}catch(T){if(T instanceof L.ZR)throw T;vt(_,"network-request-failed")}})).apply(this,arguments)}function Ke(_,f,g,E){return Js.apply(this,arguments)}function Js(){return(Js=(0,p.Z)(function*(_,f,g,E,T={}){const x=yield Yt(_,f,g,E,T);return"mfaPendingCredential"in x&&vt(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Ge(_,f,g,E){const T=`${f}${g}?${E}`;return _.config.emulator?tt(_.config,T):`${_.config.apiScheme}://${T}`}class ve{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(Vn(this.auth,"network-request-failed")),gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Re(_,f,g){const E={appName:_.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const T=Vn(_,f,E);return T.customData._tokenResponse=g,T}function Tt(){return(Tt=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Wt(_,f){return $.apply(this,arguments)}function $(){return($=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function j(_,f){return W.apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function me(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Nt(){return(Nt=(0,p.Z)(function*(_,f=!1){const g=(0,L.m9)(_),E=yield g.getIdToken(f),T=Wn(E);xe(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,B=null==x?void 0:x.sign_in_provider;return{claims:T,token:E,authTime:me(tn(T.auth_time)),issuedAtTime:me(tn(T.iat)),expirationTime:me(tn(T.exp)),signInProvider:B||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function tn(_){return 1e3*Number(_)}function Wn(_){var f;const[g,E,T]=_.split(".");if(void 0===g||void 0===E||void 0===T)return Li("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,L.tV)(E);return x?JSON.parse(x):(Li("Failed to decode base64 JWT payload"),null)}catch(x){return Li("Caught error parsing JWT payload as JSON",null===(f=x)||void 0===f?void 0:f.toString()),null}}function Dn(_,f){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof L.ZR&&lr(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function lr({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class la{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class Co{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=me(this.lastLoginAt),this.creationTime=me(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kn(_){return ts.apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(_){var f;const g=_.auth,E=yield _.getIdToken(),T=yield Dn(_,j(g,{idToken:E}));xe(null==T?void 0:T.users.length,g,"internal-error");const x=T.users[0];_._notifyReloadListener(x);const B=(null===(f=x.providerUserInfo)||void 0===f?void 0:f.length)?mi(x.providerUserInfo):[],J=Dd(_.providerData,B),Ze=!!_.isAnonymous&&!(_.email&&x.passwordHash||(null==J?void 0:J.length)),Ye={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:J,metadata:new Co(x.createdAt,x.lastLoginAt),isAnonymous:Ze};Object.assign(_,Ye)})).apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(_){const f=(0,L.m9)(_);yield kn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Dd(_,f){return[..._.filter(E=>!f.some(T=>T.providerId===E.providerId)),...f]}function mi(_){return _.map(f=>{var{providerId:g}=f,E=te(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ot(){return(Ot=(0,p.Z)(function*(_,f){const g=yield ln(_,{},(0,p.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:x}=_.config,B=Ge(_,T,"/v1/token",`key=${x}`),J=yield _._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",zn.fetch()(B,{method:"POST",headers:J,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class nn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){xe(f.idToken,"internal-error"),xe(void 0!==f.idToken,"internal-error"),xe(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=Wn(_);return xe(f,"internal-error"),xe(void 0!==f.exp,"internal-error"),xe(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,p.Z)(function*(){return xe(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,p.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:B}=yield function(_,f){return Ot.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(T,x,Number(B))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:T,expirationTime:x}=g,B=new nn;return E&&(xe("string"==typeof E,"internal-error",{appName:f}),B.refreshToken=E),T&&(xe("string"==typeof T,"internal-error",{appName:f}),B.accessToken=T),x&&(xe("number"==typeof x,"internal-error",{appName:f}),B.expirationTime=x),B}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new nn,this.toJSON())}_performRefresh(){return wr("not implemented")}}function En(_,f){xe("string"==typeof _||void 0===_,"internal-error",{appName:f})}class $r{constructor(f){var{uid:g,auth:E,stsTokenManager:T}=f,x=te(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new la(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Co(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,p.Z)(function*(){const E=yield Dn(g,g.stsTokenManager.getToken(g.auth,f));return xe(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function(_){return Nt.apply(this,arguments)}(this,f)}reload(){return function(_){return Kn.apply(this,arguments)}(this)}_assign(f){this!==f&&(xe(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new $r(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,p.Z)(function*(){let T=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield kn(E)),yield E.auth._persistUserIfCurrent(E),T&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const g=yield f.getIdToken();return yield Dn(f,function(_,f){return Tt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,T,x,B,J,Se,Ie,Ze;const Ye=null!==(E=g.displayName)&&void 0!==E?E:void 0,qt=null!==(T=g.email)&&void 0!==T?T:void 0,Jn=null!==(x=g.phoneNumber)&&void 0!==x?x:void 0,qo=null!==(B=g.photoURL)&&void 0!==B?B:void 0,vh=null!==(J=g.tenantId)&&void 0!==J?J:void 0,La=null!==(Se=g._redirectEventId)&&void 0!==Se?Se:void 0,fy=null!==(Ie=g.createdAt)&&void 0!==Ie?Ie:void 0,Ap=null!==(Ze=g.lastLoginAt)&&void 0!==Ze?Ze:void 0,{uid:Sl,emailVerified:Sp,isAnonymous:xl,providerData:xp,stsTokenManager:py}=g;xe(Sl&&py,f,"internal-error");const Mr=nn.fromJSON(this.name,py);xe("string"==typeof Sl,f,"internal-error"),En(Ye,f.name),En(qt,f.name),xe("boolean"==typeof Sp,f,"internal-error"),xe("boolean"==typeof xl,f,"internal-error"),En(Jn,f.name),En(qo,f.name),En(vh,f.name),En(La,f.name),En(fy,f.name),En(Ap,f.name);const Eh=new $r({uid:Sl,auth:f,email:qt,emailVerified:Sp,displayName:Ye,isAnonymous:xl,photoURL:qo,phoneNumber:Jn,tenantId:vh,stsTokenManager:Mr,createdAt:fy,lastLoginAt:Ap});return xp&&Array.isArray(xp)&&(Eh.providerData=xp.map(mo=>Object.assign({},mo))),La&&(Eh._redirectEventId=La),Eh}static _fromIdTokenResponse(f,g,E=!1){return(0,p.Z)(function*(){const T=new nn;T.updateFromServerResponse(g);const x=new $r({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:E});return yield kn(x),x})()}}const dr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(g,E){var T=this;return(0,p.Z)(function*(){T.storage[g]=E})()}_get(g){var E=this;return(0,p.Z)(function*(){const T=E.storage[g];return void 0===T?null:T})()}_remove(g){var E=this;return(0,p.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return _.type="NONE",_})();function rn(_,f,g){return`firebase:${_}:${f}:${g}`}class gn{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:T,name:x}=this.auth;this.fullUserKey=rn(this.userKey,T.apiKey,x),this.fullPersistenceKey=rn("persistence",T.apiKey,x),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?$r._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,p.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,p.Z)(function*(){if(!g.length)return new gn(vn(dr),f,E);const T=(yield Promise.all(g.map(function(){var Ie=(0,p.Z)(function*(Ze){if(yield Ze._isAvailable())return Ze});return function(Ze){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let x=T[0]||vn(dr);const B=rn(E,f.config.apiKey,f.name);let J=null;for(const Ie of g)try{const Ze=yield Ie._get(B);if(Ze){const Ye=$r._fromJSON(f,Ze);Ie!==x&&(J=Ye),x=Ie;break}}catch(Ze){}const Se=T.filter(Ie=>Ie._shouldAllowMigration);return x._shouldAllowMigration&&Se.length?(x=Se[0],J&&(yield x._set(B,J.toJSON())),yield Promise.all(g.map(function(){var Ie=(0,p.Z)(function*(Ze){if(Ze!==x)try{yield Ze._remove(B)}catch(Ye){}});return function(Ze){return Ie.apply(this,arguments)}}())),new gn(x,f,E)):new gn(x,f,E)})()}}function da(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Lu(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Mt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ir(f))return"Blackberry";if(fa(f))return"Webos";if(ha(f))return"Safari";if((f.includes("chrome/")||Xs(f))&&!f.includes("edge/"))return"Chrome";if(Gr(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Mt(_=(0,L.z$)()){return/firefox\//i.test(_)}function ha(_=(0,L.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Xs(_=(0,L.z$)()){return/crios\//i.test(_)}function Lu(_=(0,L.z$)()){return/iemobile/i.test(_)}function Gr(_=(0,L.z$)()){return/android/i.test(_)}function Ir(_=(0,L.z$)()){return/blackberry/i.test(_)}function fa(_=(0,L.z$)()){return/webos/i.test(_)}function Cr(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Wc(_=(0,L.z$)()){return Cr(_)||Gr(_)||fa(_)||Ir(_)||/windows phone/i.test(_)||Lu(_)}function Kc(_,f=[]){let g;switch(_){case"Browser":g=da((0,L.z$)());break;case"Worker":g=`${da((0,L.z$)())}-${_}`;break;default:g=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${E}`}class Yc{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=x=>new Promise((B,J)=>{try{B(f(x))}catch(Se){J(Se)}});E.onAbort=g,this.queue.push(E);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,p.Z)(function*(){var E;if(g.auth.currentUser===f)return;const T=[];try{for(const x of g.queue)yield x(f),x.onAbort&&T.push(x.onAbort)}catch(x){T.reverse();for(const B of T)try{B()}catch(J){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=x)||void 0===E?void 0:E.message})}})()}}class eo{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rr(this),this.idTokenSubscription=new rr(this),this.beforeStateQueue=new Yc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=vn(g)),this._initializationPromise=this.queue((0,p.Z)(function*(){var T,x;if(!E._deleted&&(E.persistenceManager=yield gn.create(E,f),!E._deleted)){if(null===(T=E._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(B){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,p.Z)(function*(){var E;const T=yield g.assertedPersistence.getCurrentUser();let x=T,B=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const J=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,Se=null==x?void 0:x._redirectEventId,Ie=yield g.tryRedirectSignIn(f);(!J||J===Se)&&(null==Ie?void 0:Ie.user)&&(x=Ie.user,B=!0)}if(!x)return g.directlySetCurrentUser(null);if(!x._redirectEventId){if(B)try{yield g.beforeStateQueue.runMiddleware(x)}catch(J){x=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(J))}return x?g.reloadAndSetCurrentUserOrClear(x):g.directlySetCurrentUser(null)}return xe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===x._redirectEventId?g.directlySetCurrentUser(x):g.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var g=this;return(0,p.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,p.Z)(function*(){var E;try{yield kn(f)}catch(T){if("auth/network-request-failed"!==(null===(E=T)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,p.Z)(function*(){const E=f?(0,L.m9)(f):null;return E&&xe(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&xe(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,p.Z)(function*(){yield g.assertedPersistence.setPersistence(vn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,p.Z)(function*(){const T=yield E.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,p.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&vn(f)||g._popupRedirectResolver;xe(E,g,"argument-error"),g.redirectPersistenceManager=yield gn.create(g,[vn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,p.Z)(function*(){var E,T;return g._isInitialized&&(yield g.queue((0,p.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,p.Z)(function*(){if(f===g.currentUser)return g.queue((0,p.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,T){if(this._deleted)return()=>{};const x="function"==typeof g?g:g.next.bind(g),B=this._isInitialized?Promise.resolve():this._initializationPromise;return xe(B,this,"internal-error"),B.then(()=>x(this.currentUser)),"function"==typeof g?f.addObserver(g,E,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,p.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Kc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(E["X-Firebase-Client"]=T),E})()}}function mn(_){return(0,L.m9)(_)}class rr{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ns(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Vu(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class ws{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return wr("not implemented")}_getIdTokenResponse(f){return wr("not implemented")}_linkToIdToken(f,g){return wr("not implemented")}_getReauthenticationResolver(f){return wr("not implemented")}}function yi(_,f){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:resetPassword",Rt(_,f))})).apply(this,arguments)}function Vf(_,f){return pa.apply(this,arguments)}function pa(){return(pa=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function To(_,f){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:update",Rt(_,f))})).apply(this,arguments)}function Sd(){return(Sd=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPassword",Rt(_,f))})).apply(this,arguments)}function Jc(_,f){return xd.apply(this,arguments)}function xd(){return(xd=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:sendOobCode",Rt(_,f))})).apply(this,arguments)}function Om(_,f){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,p.Z)(function*(_,f){return Jc(_,f)})).apply(this,arguments)}function Rd(_,f){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,p.Z)(function*(_,f){return Jc(_,f)})).apply(this,arguments)}function Md(_,f){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,p.Z)(function*(_,f){return Jc(_,f)})).apply(this,arguments)}function km(_,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(_,f){return Jc(_,f)})).apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",Rt(_,f))})).apply(this,arguments)}function Pd(){return(Pd=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithEmailLink",Rt(_,f))})).apply(this,arguments)}class eu extends ws{constructor(f,g,E,T=null){super("password",E),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new eu(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new eu(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,p.Z)(function*(){switch(g.signInMethod){case"password":return function(_,f){return Sd.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,f){return Xa.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:vt(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return Vf(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(_,f){return Pd.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:vt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ao(_,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithIdp",Rt(_,f))})).apply(this,arguments)}class Ui extends ws{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ui(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):vt("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T}=g,x=te(g,["providerId","signInMethod"]);if(!E||!T)return null;const B=new Ui(E,T);return B.idToken=x.idToken||void 0,B.accessToken=x.accessToken||void 0,B.secret=x.secret,B.nonce=x.nonce,B.pendingToken=x.pendingToken||null,B}_getIdTokenResponse(f){return Ao(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Ao(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ao(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function tu(_,f){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:sendVerificationCode",Rt(_,f))})).apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,f))})).apply(this,arguments)}function tl(){return(tl=(0,p.Z)(function*(_,f){const g=yield Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,f));if(g.temporaryProof)throw Re(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Bu={USER_NOT_FOUND:"user-not-found"};function jn(){return(jn=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithPhoneNumber",Rt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Bu)})).apply(this,arguments)}class Bi extends ws{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Bi({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Bi({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(_,f){return el.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(_,f){return tl.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return jn.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}=f;return E||g||T||x?new Bi({verificationId:g,verificationCode:E,phoneNumber:T,temporaryProof:x}):null}}class ji{constructor(f){var g,E,T,x,B,J;const Se=(0,L.zd)((0,L.pd)(f)),Ie=null!==(g=Se.apiKey)&&void 0!==g?g:null,Ze=null!==(E=Se.oobCode)&&void 0!==E?E:null,Ye=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Se.mode)&&void 0!==T?T:null);xe(Ie&&Ze&&Ye,"argument-error"),this.apiKey=Ie,this.operation=Ye,this.code=Ze,this.continueUrl=null!==(x=Se.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(B=Se.languageCode)&&void 0!==B?B:null,this.tenantId=null!==(J=Se.tenantId)&&void 0!==J?J:null}static parseLink(f){const g=function(_){const f=(0,L.zd)((0,L.pd)(_)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||g||f||_}(f);try{return new ji(g)}catch(E){return null}}}let So=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,E){return eu._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const T=ji.parseLink(E);return xe(T,"argument-error"),eu._fromEmailAndCode(g,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Jt{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class to extends Jt{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Is extends to{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return xe("providerId"in g&&"signInMethod"in g,"argument-error"),Ui._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return xe(f.idToken||f.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Is.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Is.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:T,pendingToken:x,nonce:B,providerId:J}=f;if(!E&&!T&&!g&&!x||!J)return null;try{return new Is(J)._credential({idToken:g,accessToken:E,nonce:B,pendingToken:x})}catch(Se){return null}}}let Ld=(()=>{class _ extends to{constructor(){super("facebook.com")}static credential(g){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Vt=(()=>{class _ extends to{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:T}=g;if(!E&&!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Vd=(()=>{class _ extends to{constructor(){super("github.com")}static credential(g){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Cs extends ws{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ao(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,Ao(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ao(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:T,pendingToken:x}=g;return E&&T&&x&&E===T?new Cs(E,x):null}static _create(f,g){return new Cs(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $u extends Jt{constructor(f){xe(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return $u.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return $u.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Cs.fromJSON(f);return xe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return Cs._create(E,g)}catch(T){return null}}}let Ds=(()=>{class _ extends to{constructor(){super("twitter.com")}static credential(g,E){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:T}=g;if(!E||!T)return null;try{return _.credential(E,T)}catch(x){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function no(_,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signUp",Rt(_,f))})).apply(this,arguments)}class Dr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,T=!1){return(0,p.Z)(function*(){const x=yield $r._fromIdTokenResponse(f,E,T),B=ru(E);return new Dr({user:x,providerId:B,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const T=ru(E);return new Dr({user:f,providerId:T,_tokenResponse:E,operationType:g})})()}}function ru(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function is(){return(is=(0,p.Z)(function*(_){var f;const g=mn(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Dr({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield no(g,{returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class xo extends L.ZR{constructor(f,g,E,T){var x;super(g.code,g.message),this.operationType=E,this.user=T,Object.setPrototypeOf(this,xo.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,T){return new xo(f,g,E,T)}}function iu(_,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?xo._fromErrorAndOperation(_,x,f,E):x})}function ft(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ts(){return(Ts=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_);yield ma(!0,g,f);const{providerUserInfo:E}=yield Wt(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=ft(E||[]);return g.providerData=g.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Ro(_,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,p.Z)(function*(_,f,g=!1){const E=yield Dn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Dr._forOperation(_,"link",E)})).apply(this,arguments)}function ma(_,f,g){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(_,f,g){yield kn(f);const T=!1===_?"provider-already-linked":"no-such-provider";xe(ft(f.providerData).has(g)===_,f.auth,T)})).apply(this,arguments)}function nl(_,f){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,p.Z)(function*(_,f,g=!1){var E;const{auth:T}=_,x="reauthenticate";try{const B=yield Dn(_,iu(T,x,f,_),g);xe(B.idToken,T,"internal-error");const J=Wn(B.idToken);xe(J,T,"internal-error");const{sub:Se}=J;return xe(_.uid===Se,T,"user-mismatch"),Dr._forOperation(_,x,B)}catch(B){throw"auth/user-not-found"===(null===(E=B)||void 0===E?void 0:E.code)&&vt(T,"user-mismatch"),B}})).apply(this,arguments)}function jt(_,f){return su.apply(this,arguments)}function su(){return(su=(0,p.Z)(function*(_,f,g=!1){const E="signIn",T=yield iu(_,E,f),x=yield Dr._fromIdTokenResponse(_,E,T);return g||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function yn(_,f){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,p.Z)(function*(_,f){return jt(mn(_),f)})).apply(this,arguments)}function No(_,f){return _i.apply(this,arguments)}function _i(){return(_i=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_);return yield ma(!1,g,f.providerId),Ro(g,f)})).apply(this,arguments)}function ya(_,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,p.Z)(function*(_,f){return nl((0,L.m9)(_),f)})).apply(this,arguments)}function jd(_,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(_,f){return Ke(_,"POST","/v1/accounts:signInWithCustomToken",Rt(_,f))})).apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(_,f){const g=mn(_),E=yield jd(g,{token:f,returnSecureToken:!0}),T=yield Dr._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class sr{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?zr._fromServerResponse(f,g):vt(f,"internal-error")}}class zr extends sr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new zr(g)}}function Oo(_,f,g){var E;xe((null===(E=g.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),xe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(xe(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(xe(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Hi(){return(Hi=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T={requestType:"PASSWORD_RESET",email:f};g&&Oo(E,T,g),yield Rd(E,T)})).apply(this,arguments)}function zu(){return(zu=(0,p.Z)(function*(_,f,g){yield yi((0,L.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function va(){return(va=(0,p.Z)(function*(_,f){yield To((0,L.m9)(_),{oobCode:f})})).apply(this,arguments)}function ou(_,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_),E=yield yi(g,{oobCode:f}),T=E.requestType;switch(xe(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(E.mfaInfo,g,"internal-error");default:xe(E.email,g,"internal-error")}let x=null;return E.mfaInfo&&(x=sr._fromServerResponse(mn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Wu(){return(Wu=(0,p.Z)(function*(_,f){const{data:g}=yield ou((0,L.m9)(_),f);return g.email})).apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(_,f,g){const E=mn(_),T=yield no(E,{returnSecureToken:!0,email:f,password:g}),x=yield Dr._fromIdTokenResponse(E,"signIn",T);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function ba(){return(ba=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};xe(g.handleCodeInApp,E,"argument-error"),g&&Oo(E,T,g),yield Md(E,T)})).apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T=So.credentialWithLink(f,g||Qe());return xe(T._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),yn(E,T)})).apply(this,arguments)}function Gd(_,f){return $f.apply(this,arguments)}function $f(){return($f=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:createAuthUri",Rt(_,f))})).apply(this,arguments)}function ni(){return(ni=(0,p.Z)(function*(_,f){const E={identifier:f,continueUri:jr()?Qe():"http://localhost"},{signinMethods:T}=yield Gd((0,L.m9)(_),E);return T||[]})).apply(this,arguments)}function au(){return(au=(0,p.Z)(function*(_,f){const g=(0,L.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Oo(g.auth,T,f);const{email:x}=yield Om(g.auth,T);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function uu(){return(uu=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Oo(E.auth,x,g);const{email:B}=yield km(E.auth,x);B!==_.email&&(yield _.reload())})).apply(this,arguments)}function qd(_,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(_,f){return Yt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function wa(){return(wa=(0,p.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,L.m9)(_),x={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},B=yield Dn(E,qd(E.auth,x));E.displayName=B.displayName||null,E.photoURL=B.photoUrl||null;const J=E.providerData.find(({providerId:Se})=>"password"===Se);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary(B)})).apply(this,arguments)}function cu(_,f,g){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,p.Z)(function*(_,f,g){const{auth:E}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(x.email=f),g&&(x.password=g);const B=yield Dn(_,Vf(E,x));yield _._updateTokensIfNecessary(B,!0)})).apply(this,arguments)}class ri{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Ia extends ri{constructor(f,g,E,T){super(f,g,E),this.username=T}}class Lm extends ri{constructor(f,g){super(f,"facebook.com",g)}}class qf extends Ia{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class hr extends ri{constructor(f,g){super(f,"google.com",g)}}class Wd extends Ia{constructor(f,g,E){super(f,"twitter.com",g,E)}}function zf(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,g;if(!_)return null;const{providerId:E}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const B=null===(g=null===(f=Wn(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(B)return new ri(x,"anonymous"!==B&&"custom"!==B?B:null)}if(!E)return null;switch(E){case"facebook.com":return new Lm(x,T);case"github.com":return new qf(x,T);case"google.com":return new hr(x,T);case"twitter.com":return new Wd(x,T,_.screenName||null);case"custom":case"anonymous":return new ri(x,null);default:return new ri(x,E,T)}}(g)}class $i{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new $i("enroll",f,g)}static _fromMfaPendingCredential(f){return new $i("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return $i._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return $i._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ul{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=mn(f),T=g.customData._serverResponse,x=(T.mfaInfo||[]).map(J=>sr._fromServerResponse(E,J));xe(T.mfaPendingCredential,E,"internal-error");const B=$i._fromMfaPendingCredential(T.mfaPendingCredential);return new ul(B,x,function(){var J=(0,p.Z)(function*(Se){const Ie=yield Se._process(E,B);delete T.mfaInfo,delete T.mfaPendingCredential;const Ze=Object.assign(Object.assign({},T),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(g.operationType){case"signIn":const Ye=yield Dr._fromIdTokenResponse(E,g.operationType,Ze);return yield E._updateCurrentUser(Ye.user),Ye;case"reauthenticate":return xe(g.user,E,"internal-error"),Dr._forOperation(g.user,g.operationType,Ze);default:vt(E,"internal-error")}});return function(Se){return J.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,p.Z)(function*(){return g.signInResolver(f)})()}}function ec(_,f){return Yt(_,"POST","/v2/accounts/mfaEnrollment:start",Rt(_,f))}class ll{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>sr._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new ll(f)}getSession(){var f=this;return(0,p.Z)(function*(){return $i._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,p.Z)(function*(){const T=f,x=yield E.getSession(),B=yield Dn(E.user,T._process(E.user.auth,x,g));return yield E.user._updateTokensIfNecessary(B),E.user.reload()})()}unenroll(f){var g=this;return(0,p.Z)(function*(){var E;const T="string"==typeof f?f:f.uid,x=yield g.user.getIdToken(),B=yield Dn(g.user,function(_,f){return Yt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(_,f))}(g.user.auth,{idToken:x,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:J})=>J!==T),yield g.user._updateTokensIfNecessary(B);try{yield g.user.reload()}catch(J){if("auth/user-token-expired"!==(null===(E=J)||void 0===E?void 0:E.code))throw J}})()}}const on=new WeakMap,ii="__sak";class Fo{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ii,"1"),this.storage.removeItem(ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const hu=(()=>{class _ extends Fo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,L.z$)();return ha(_)||Cr(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Wc(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const T=this.storage.getItem(E),x=this.localCache[E];T!==x&&g(E,x,T)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((J,Se,Ie)=>{this.notifyListeners(J,Ie)});const T=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(T);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!E)return}const x=()=>{const J=this.storage.getItem(T);!E&&this.localCache[T]===J||this.notifyListeners(T,J)},B=this.storage.getItem(T);(0,L.w1)()&&10===document.documentMode&&B!==g.newValue&&g.newValue!==g.oldValue?setTimeout(x,10):x()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var T=()=>super._set,x=this;return(0,p.Z)(function*(){yield T().call(x,g,E),x.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,T=this;return(0,p.Z)(function*(){const x=yield E().call(T,g);return T.localCache[g]=JSON.stringify(x),x})()}_remove(g){var E=()=>super._remove,T=this;return(0,p.Z)(function*(){yield E().call(T,g),delete T.localCache[g]})()}}return _.type="LOCAL",_})(),Ss=(()=>{class _ extends Fo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return _.type="SESSION",_})();let Yd=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(x=>x.isListeningto(g));if(E)return E;const T=new _(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,p.Z)(function*(){const T=g,{eventId:x,eventType:B,data:J}=T.data,Se=E.handlersMap[B];if(!(null==Se?void 0:Se.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:B});const Ie=Array.from(Se).map(function(){var Ye=(0,p.Z)(function*(qt){return qt(T.origin,J)});return function(qt){return Ye.apply(this,arguments)}}()),Ze=yield function(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(Ie);T.ports[0].postMessage({status:"done",eventId:x,eventType:B,response:Ze})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Lo(_="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return _+g}class Qd{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var T=this;return(0,p.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let B,J;return new Promise((Se,Ie)=>{const Ze=Lo("",20);x.port1.start();const Ye=setTimeout(()=>{Ie(new Error("unsupported_event"))},E);J={messageChannel:x,onMessage(qt){const Jn=qt;if(Jn.data.eventId===Ze)switch(Jn.data.status){case"ack":clearTimeout(Ye),B=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(B),Se(Jn.data.response);break;default:clearTimeout(Ye),clearTimeout(B),Ie(new Error("invalid_response"))}}},T.handlers.add(J),x.port1.addEventListener("message",J.onMessage),T.target.postMessage({eventType:f,eventId:Ze,data:g},[x.port2])}).finally(()=>{J&&T.removeMessageHandler(J)})})()}}function Xt(){return window}function nc(){return void 0!==Xt().WorkerGlobalScope&&"function"==typeof Xt().importScripts}function oo(){return(oo=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ao="firebaseLocalStorageDb",us="firebaseLocalStorage",Vo="fbase_key";class ut{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function si(_,f){return _.transaction([us],f?"readwrite":"readonly").objectStore(us)}function Gi(){const _=indexedDB.open(ao,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(us,{keyPath:Vo})}catch(T){g(T)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(us)?f(E):(E.close(),yield function(){const _=indexedDB.deleteDatabase(ao);return new ut(_).toPromise()}(),f(yield Gi()))}))})}function Um(_,f,g){return Bm.apply(this,arguments)}function Bm(){return(Bm=(0,p.Z)(function*(_,f,g){const E=si(_,!0).put({[Vo]:f,value:g});return new ut(E).toPromise()})).apply(this,arguments)}function dl(){return(dl=(0,p.Z)(function*(_,f){const g=si(_,!1).get(f),E=yield new ut(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Qf(_,f){const g=si(_,!0).delete(f);return new ut(g).toPromise()}const Aa=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,p.Z)(function*(){return g.db||(g.db=yield Gi()),g.db})()}_withRetries(g){var E=this;return(0,p.Z)(function*(){let T=0;for(;;)try{const x=yield E._openDb();return yield g(x)}catch(x){if(T++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,p.Z)(function*(){return nc()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,p.Z)(function*(){g.receiver=Yd._getInstance(nc()?self:null),g.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(T,x){return{keyProcessed:(yield g._poll()).includes(x.key)}});return function(T,x){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,p.Z)(function*(){var E,T;if(g.activeServiceWorker=yield function(){return oo.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Qd(g.activeServiceWorker);const x=yield g.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Gi();return yield Um(g,ii,"1"),yield Qf(g,ii),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var T=this;return(0,p.Z)(function*(){return T._withPendingWrite((0,p.Z)(function*(){return yield T._withRetries(x=>Um(x,g,E)),T.localCache[g]=E,T.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,p.Z)(function*(){const T=yield E._withRetries(x=>function(_,f){return dl.apply(this,arguments)}(x,g));return E.localCache[g]=T,T})()}_remove(g){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(T=>Qf(T,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,p.Z)(function*(){const E=yield g._withRetries(B=>{const J=si(B,!1).getAll();return new ut(J).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:B,value:J}of E)x.add(B),JSON.stringify(g.localCache[B])!==JSON.stringify(J)&&(g.notifyListeners(B,J),T.push(B));for(const B of Object.keys(g.localCache))g.localCache[B]&&!x.has(B)&&(g.notifyListeners(B,null),T.push(B));return T})()}notifyListeners(g,E){this.localCache[g]=E;const T=this.listeners[g];if(T)for(const x of Array.from(T))x(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function jm(_,f){return Yt(_,"POST","/v2/accounts/mfaSignIn:start",Rt(_,f))}function Jd(){return(Jd=(0,p.Z)(function*(_){return(yield Yt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jf(_){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=T=>{const x=Vn("internal-error");x.customData=T,g(x)},E.type="text/javascript",E.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function Xf(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Uo=1e12;class An{constructor(f){this.auth=f,this.counter=Uo,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new xa(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||Uo;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Uo))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,p.Z)(function*(){var E;return null===(E=g._widgets.get(f||Uo))||void 0===E||E.execute(),""})()}}class xa{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;xe(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ic=Xf("rcb"),$m=new nt(3e4,6e4);class cs{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=Xt().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return xe((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Xt().grecaptcha):new Promise((E,T)=>{const x=Xt().setTimeout(()=>{T(Vn(f,"network-request-failed"))},$m.get());Xt()[ic]=()=>{Xt().clearTimeout(x),delete Xt()[ic];const J=Xt().grecaptcha;if(!J)return void T(Vn(f,"internal-error"));const Se=J.render;J.render=(Ie,Ze)=>{const Ye=Se(Ie,Ze);return this.counter++,Ye},this.hostLanguage=g,E(J)},Jf(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ic,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(x),T(Vn(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=Xt().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class jo{load(f){return(0,p.Z)(function*(){return new An(f)})()}clearedOneInstance(){}}const xr="recaptcha",fl={theme:"light",type:"image"};class Ho{constructor(f,g=Object.assign({},fl),E){this.parameters=g,this.type=xr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(E),this.isInvisible="invisible"===this.parameters.size,xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;xe(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jo:new cs,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(x=>{const B=J=>{!J||(f.tokenChangeListeners.delete(B),x(J))};f.tokenChangeListeners.add(B),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=Xt()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){xe(jr()&&!nc(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(_){return Jd.apply(this,arguments)}(f.auth);xe(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class uo{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Bi._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ls(){return(ls=(0,p.Z)(function*(_,f,g){const E=mn(_),T=yield Ms(E,f,(0,L.m9)(g));return new uo(T,x=>yn(E,x))})).apply(this,arguments)}function oc(){return(oc=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);yield ma(!1,E,"phone");const T=yield Ms(E.auth,f,(0,L.m9)(g));return new uo(T,x=>No(E,x))})).apply(this,arguments)}function ac(){return(ac=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_),T=yield Ms(E.auth,f,(0,L.m9)(g));return new uo(T,x=>ya(E,x))})).apply(this,arguments)}function Ms(_,f,g){return pl.apply(this,arguments)}function pl(){return(pl=(0,p.Z)(function*(_,f,g){var E;const T=yield g.verify();try{let x;if(xe("string"==typeof T,_,"argument-error"),xe(g.type===xr,_,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const B=x.session;if("phoneNumber"in x)return xe("enroll"===B.type,_,"internal-error"),(yield ec(_,{idToken:B.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{xe("signin"===B.type,_,"internal-error");const J=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return xe(J,_,"missing-multi-factor-info"),(yield jm(_,{mfaPendingCredential:B.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:B}=yield tu(_,{phoneNumber:x.phoneNumber,recaptchaToken:T});return B}}finally{g._reset()}})).apply(this,arguments)}function A(){return(A=(0,p.Z)(function*(_,f){yield Ro((0,L.m9)(_),f)})).apply(this,arguments)}let M=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=mn(g)}verifyPhoneNumber(g,E){return Ms(this.auth,g,(0,L.m9)(E))}static credential(g,E){return Bi._fromVerification(g,E)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:T}=g;return E&&T?Bi._fromTokenResponse(E,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function U(_,f){return f?vn(f):(xe(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Z extends ws{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ao(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ao(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ao(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function ie(_){return jt(_.auth,new Z(_),_.bypassAuthState)}function be(_){const{auth:f,user:g}=_;return xe(g,f,"internal-error"),nl(g,new Z(_),_.bypassAuthState)}function Ue(_){return st.apply(this,arguments)}function st(){return(st=(0,p.Z)(function*(_){const{auth:f,user:g}=_;return xe(g,f,"internal-error"),Ro(g,new Z(_),_.bypassAuthState)})).apply(this,arguments)}class bt{constructor(f,g,E,T,x=!1){this.auth=f,this.resolver=E,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,p.Z)(function*(E,T){f.pendingPromise={resolve:E,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(E,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:T,postBody:x,tenantId:B,error:J,type:Se}=f;if(J)return void g.reject(J);const Ie={auth:g.auth,requestUri:E,sessionId:T,tenantId:B||void 0,postBody:x||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Se)(Ie))}catch(Ze){g.reject(Ze)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ie;case"linkViaPopup":case"linkViaRedirect":return Ue;case"reauthViaPopup":case"reauthViaRedirect":return be;default:vt(this.auth,"internal-error")}}resolve(f){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const At=new nt(2e3,1e4);function $n(){return($n=(0,p.Z)(function*(_,f,g){const E=mn(_);Un(_,f,Jt);const T=U(E,g);return new Os(E,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Jt);const T=U(E.auth,g);return new Os(E.auth,"reauthViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}function zi(){return(zi=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Jt);const T=U(E.auth,g);return new Os(E.auth,"linkViaPopup",f,T,E).executeNotNull()})).apply(this,arguments)}let Os=(()=>{class _ extends bt{constructor(g,E,T,x,B){super(g,E,x,B),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,p.Z)(function*(){const E=yield g.execute();return xe(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,p.Z)(function*(){Cn(1===g.filter.length,"Popup operations only handle one event");const E=Lo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Vn(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,T;this.pollId=(null===(T=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,At.get())};g()}}return _.currentPopupAction=null,_})();const ks=new Map;class dn extends bt{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,p.Z)(function*(){let E=ks.get(g.auth._key());if(!E){try{const x=(yield function(_,f){return uc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(x)}catch(T){E=()=>Promise.reject(T)}ks.set(g.auth._key(),E)}return g.bypassAuthState||ks.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const T=yield E.auth._redirectUserForId(f.eventId);if(T)return E.user=T,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function uc(){return(uc=(0,p.Z)(function*(_,f){const g=Tv(f),E=ds(_);if(!(yield E._isAvailable()))return!1;const T="true"===(yield E._get(g));return yield E._remove(g),T})).apply(this,arguments)}function ho(_,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(_,f){return ds(_)._set(Tv(f),"true")})).apply(this,arguments)}function Qn(_,f){ks.set(_._key(),f)}function ds(_){return vn(_._redirectPersistence)}function Tv(_){return rn("pendingRedirect",_.config.apiKey,_.name)}function fu(){return(fu=(0,p.Z)(function*(_,f,g){const E=mn(_);Un(_,f,Jt);const T=U(E,g);return yield ho(T,E),T._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Xd(){return(Xd=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Jt);const T=U(E.auth,g);yield ho(T,E.auth);const x=yield Na(E);return T._openRedirect(E.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function pu(){return(pu=(0,p.Z)(function*(_,f,g){const E=(0,L.m9)(_);Un(E.auth,f,Jt);const T=U(E.auth,g);yield ma(!1,E,f.providerId),yield ho(T,E.auth);const x=yield Na(E);return T._openRedirect(E.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function $t(){return($t=(0,p.Z)(function*(_,f){return yield mn(_)._initializationPromise,Wi(_,f,!1)})).apply(this,arguments)}function Wi(_,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,p.Z)(function*(_,f,g=!1){const E=mn(_),T=U(E,f),B=yield new dn(E,T,g).execute();return B&&!g&&(delete B.user._redirectEventId,yield E._persistUserIfCurrent(B.user),yield E._setRedirectUser(null,f)),B})).apply(this,arguments)}function Na(_){return qm.apply(this,arguments)}function qm(){return(qm=(0,p.Z)(function*(_){const f=Lo(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class tp{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ml(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!ml(f)){const T=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(Vn(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Av(f))}saveEventToCache(f){this.cachedEventUids.add(Av(f)),this.lastProcessedEventTime=Date.now()}}function Av(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function ml({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function np(_){return $o.apply(this,arguments)}function $o(){return($o=(0,p.Z)(function*(_,f={}){return Yt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const rp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oa=/^https?/;function rh(){return(rh=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield np(_);for(const g of f)try{if(Sv(g))return}catch(E){}vt(_,"unauthorized-domain")})).apply(this,arguments)}function Sv(_){const f=Qe(),{protocol:g,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const B=new URL(_);return""===B.hostname&&""===E?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&B.hostname===E}if(!Oa.test(g))return!1;if(rp.test(_))return E===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(E)}const ih=new nt(3e4,6e4);function sh(){const _=Xt().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let ka=null;function Wm(_){return ka=ka||function(_){return new Promise((f,g)=>{var E,T,x;function B(){sh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{sh(),g(Vn(_,"network-request-failed"))},timeout:ih.get()})}if(null===(T=null===(E=Xt().gapi)||void 0===E?void 0:E.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(x=Xt().gapi)||void 0===x?void 0:x.load)){const J=Xf("iframefcb");return Xt()[J]=()=>{gapi.load?B():g(Vn(_,"network-request-failed"))},Jf(`https://apis.google.com/js/api.js?onload=${J}`).catch(Se=>g(Se))}B()}}).catch(f=>{throw ka=null,f})}(_),ka}const yu=new nt(5e3,15e3),Mv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ip(_){const f=_.config;xe(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?tt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:ae.SDK_VERSION},T=Zm.get(_.config.apiHost);T&&(E.eid=T);const x=_._getFrameworks();return x.length&&(E.fw=x.join(",")),`${g}?${(0,L.xO)(E).slice(1)}`}function Zr(){return Zr=(0,p.Z)(function*(_){const f=yield Wm(_),g=Xt().gapi;return xe(g,_,"internal-error"),f.open({where:document.body,url:ip(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mv,dontclear:!0},E=>new Promise(function(){var T=(0,p.Z)(function*(x,B){yield E.restyle({setHideOnLeave:!1});const J=Vn(_,"network-request-failed"),Se=Xt().setTimeout(()=>{B(J)},yu.get());function Ie(){Xt().clearTimeout(Se),x(E)}E.ping(Ie).then(Ie,()=>{B(J)})});return function(x,B){return T.apply(this,arguments)}}()))}),Zr.apply(this,arguments)}const lc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ah(_,f,g,E,T,x){xe(_.config.authDomain,_,"auth-domain-config-required"),xe(_.config.apiKey,_,"invalid-api-key");const B={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:E,v:ae.SDK_VERSION,eventId:T};if(f instanceof Jt){f.setDefaultLanguage(_.languageCode),B.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(B.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Se,Ie]of Object.entries(x||{}))B[Se]=Ie}if(f instanceof to){const Se=f.getScopes().filter(Ie=>""!==Ie);Se.length>0&&(B.scopes=Se.join(","))}_.tenantId&&(B.tid=_.tenantId);const J=B;for(const Se of Object.keys(J))void 0===J[Se]&&delete J[Se];return`${function({config:_}){return _.emulator?tt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(J).slice(1)}`}const _l="webStorageSupport";class _u extends class{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return wr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new _u(f)}_finalizeEnroll(f,g,E){return function(_,f){return Yt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(_,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(_,f){return Yt(_,"POST","/v2/accounts/mfaSignIn:finalize",Rt(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ey=(()=>{class _{constructor(){}static assertion(g){return _u._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,ap="@firebase/auth",fc="0.20.10";class uh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,p.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{var T;f((null===(T=E)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Pa(){return window}function cp(){return cp=(0,p.Z)(function*(_,f,g){var E;const{BuildInfo:T}=Pa();Cn(f.sessionId,"AuthEvent did not contain a session ID");const x=yield Sn(f.sessionId),B={};return Cr()?B.ibi=T.packageName:Gr()?B.apn=T.packageName:vt(_,"operation-not-supported-in-this-environment"),T.displayName&&(B.appDisplayName=T.displayName),B.sessionId=x,ah(_,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,B)}),cp.apply(this,arguments)}function dh(){return dh=(0,p.Z)(function*(_){const{BuildInfo:f}=Pa(),g={};Cr()?g.iosBundleId=f.packageName:Gr()?g.androidPackageName=f.packageName:vt(_,"operation-not-supported-in-this-environment"),yield np(_,g)}),dh.apply(this,arguments)}function bl(){return bl=(0,p.Z)(function*(_,f,g){const{cordova:E}=Pa();let T=()=>{};try{yield new Promise((x,B)=>{let J=null;function Se(){var Ye;x();const qt=null===(Ye=E.plugins.browsertab)||void 0===Ye?void 0:Ye.close;"function"==typeof qt&&qt(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ie(){J||(J=window.setTimeout(()=>{B(Vn(_,"redirect-cancelled-by-user"))},2e3))}function Ze(){"visible"===(null==document?void 0:document.visibilityState)&&Ie()}f.addPassiveListener(Se),document.addEventListener("resume",Ie,!1),Gr()&&document.addEventListener("visibilitychange",Ze,!1),T=()=>{f.removePassiveListener(Se),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Ze,!1),J&&window.clearTimeout(J)}})}finally{T()}}),bl.apply(this,arguments)}function Sn(_){return hp.apply(this,arguments)}function hp(){return hp=(0,p.Z)(function*(_){const f=fp(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")}),hp.apply(this,arguments)}function fp(_){if(Cn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let E=0;E<_.length;E++)g[E]=_.charCodeAt(E);return g}(0,L.Pz)("authIdTokenMaxAge"),_="Browser",(0,ae._registerComponent)(new On.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:x,authDomain:B}=E.options;return((J,Se)=>{xe(x&&!x.includes(":"),"invalid-api-key",{appName:J.name}),xe(!(null==B?void 0:B.includes(":")),"argument-error",{appName:J.name});const Ie={apiKey:x,authDomain:B,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kc(_)},Ze=new eo(J,Se,Ie);return function(_,f){const g=(null==f?void 0:f.persistence)||[],E=(Array.isArray(g)?g:[g]).map(vn);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(Ze,g),Ze})(E,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new On.wA("auth-internal",f=>{const g=mn(f.getProvider("auth").getImmediate());return new uh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(ap,fc,void 0),(0,ae.registerVersion)(ap,fc,"esm2017");class ry extends tp{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function iy(_){return pp.apply(this,arguments)}function pp(){return pp=(0,p.Z)(function*(_){const f=yield gc()._get(Fa(_));return f&&(yield gc()._remove(Fa(_))),f}),pp.apply(this,arguments)}function hh(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function gc(){return vn(hu)}function Fa(_){return rn("authEvent",_.config.apiKey,_.name)}function wl(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,L.zd)(g.join("?"))}function Il(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vn("no-auth-event")}}function yc(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function _c(_=(0,L.z$)()){return!("file:"!==yc()&&"ionic:"!==yc()&&"capacitor:"!==yc()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Eu(){try{const _=self.localStorage,f=Lo();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,L.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,L.hl)()}catch(_){return Dl()&&(0,L.hl)()}return!1}function Dl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function yp(){return("http:"===yc()||"https:"===yc()||(0,L.ru)()||_c())&&!((0,L.b$)()||(0,L.UG)())&&Eu()&&!Dl()}function Uv(){return _c()&&"undefined"!=typeof document}function vc(){return vc=(0,p.Z)(function*(){return!!Uv()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})}),vc.apply(this,arguments)}const ai={LOCAL:"local",NONE:"none",SESSION:"session"},go=xe,_p="persistence";function vp(_){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,p.Z)(function*(_){yield _._initializationPromise;const f=Tl(),g=rn(_p,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())}),Ep.apply(this,arguments)}function Tl(){var _;try{return(null===(_="undefined"!=typeof window?window:null)||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const Yr=xe;class Go{constructor(){this.browserResolver=vn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ss,this._completeRedirectFn=Wi,this._overrideRedirectResult=Qn}_openPopup(f,g,E,T){var x=this;return(0,p.Z)(function*(){var B;Cn(null===(B=x.eventManagers[f._key()])||void 0===B?void 0:B.manager,"_initialize() not called before _openPopup()");const J=ah(f,g,E,Qe(),T);return function(_,f,g,E=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),B=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const Se=Object.assign(Object.assign({},lc),{width:E.toString(),height:T.toString(),top:x,left:B}),Ie=(0,L.z$)().toLowerCase();g&&(J=Xs(Ie)?"_blank":g),Mt(Ie)&&(f=f||"http://localhost",Se.scrollbars="yes");const Ze=Object.entries(Se).reduce((qt,[Jn,qo])=>`${qt}${Jn}=${qo},`,"");if(function(_=(0,L.z$)()){var f;return Cr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ie)&&"_self"!==J)return function(_,f){const g=document.createElement("a");g.href=_,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",J),new sp(null);const Ye=window.open(f||"",J,Ze);xe(Ye,_,"popup-blocked");try{Ye.focus()}catch(qt){}return new sp(Ye)}(f,J,Lo())})()}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x._originValidation(f),_=ah(f,g,E,Qe(),T),Xt().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:x}=this.eventManagers[g];return T?Promise.resolve(T):(Cn(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,p.Z)(function*(){const E=yield function(_){return Zr.apply(this,arguments)}(f),T=new tp(f);return E.register("authEvent",x=>(xe(null==x?void 0:x.authEvent,f,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=E,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(_l,{type:_l},T=>{var x;const B=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[_l];void 0!==B&&g(!!B),vt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return rh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Wc()||ha()||Cr()}}),this.cordovaResolver=vn(class{constructor(){this._redirectPersistence=Ss,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wi,this._overrideRedirectResult=Qn}_initialize(f){var g=this;return(0,p.Z)(function*(){const E=f._key();let T=g.eventManagers.get(E);return T||(T=new ry(f),g.eventManagers.set(E,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){vt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){!function(_){var f,g,E,T,x,B,J,Se,Ie,Ze;const Ye=Pa();xe("function"==typeof(null===(f=null==Ye?void 0:Ye.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),xe(void 0!==(null===(g=null==Ye?void 0:Ye.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),xe("function"==typeof(null===(x=null===(T=null===(E=null==Ye?void 0:Ye.cordova)||void 0===E?void 0:E.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(Se=null===(J=null===(B=null==Ye?void 0:Ye.cordova)||void 0===B?void 0:B.plugins)||void 0===J?void 0:J.browsertab)||void 0===Se?void 0:Se.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),xe("function"==typeof(null===(Ze=null===(Ie=null==Ye?void 0:Ye.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Ze?void 0:Ze.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const B=yield x._initialize(f);yield B.initialized(),B.resetRedirect(),ks.clear(),yield x._originValidation(f);const J=function(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:hh(),postBody:null,tenantId:_.tenantId,error:Vn(_,"no-auth-event")}}(f,E,T);yield function(_,f){return gc()._set(Fa(_),f)}(f,J);const Se=yield function(_,f,g){return cp.apply(this,arguments)}(f,J,g),Ie=yield function(_){const{cordova:f}=Pa();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let T=null;E?f.plugins.browsertab.openUrl(_):T=f.InAppBrowser.open(_,function(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(T)})})}(Se);return function(_,f,g){return bl.apply(this,arguments)}(f,B,Ie)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return dh.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:T,BuildInfo:x}=Pa(),B=setTimeout((0,p.Z)(function*(){yield iy(f),g.onEvent(Il())}),500),J=function(){var Ze=(0,p.Z)(function*(Ye){clearTimeout(B);const qt=yield iy(f);let Jn=null;qt&&(null==Ye?void 0:Ye.url)&&(Jn=function(_,f){var g,E;const T=function(_){const f=wl(_),g=f.link?decodeURIComponent(f.link):void 0,E=wl(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return wl(T).link||T||E||g||_}(f);if(T.includes("/__/auth/callback")){const x=wl(T),B=x.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(x.firebaseError)):null,J=null===(E=null===(g=null==B?void 0:B.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],Se=J?Vn(J):null;return Se?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Se,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:T,postBody:null}}return null}(qt,Ye.url)),g.onEvent(Jn||Il())});return function(qt){return Ze.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,J);const Se=T,Ie=`${x.packageName.toLowerCase()}://`;Pa().handleOpenURL=function(){var Ze=(0,p.Z)(function*(Ye){if(Ye.toLowerCase().startsWith(Ie)&&J({url:Ye}),"function"==typeof Se)try{Se(Ye)}catch(qt){console.error(qt)}});return function(Ye){return Ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ss,this._completeRedirectFn=Wi,this._overrideRedirectResult=Qn}_initialize(f){var g=this;return(0,p.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,g,E,T)})()}_openRedirect(f,g,E,T){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,g,E,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Uv()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Yr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return vc.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function cy(_){return _.unwrap()}function ly(_){return bp(_)}function bp(_){const{_tokenResponse:f}=_ instanceof L.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return M.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Vt;break;case"facebook.com":E=Ld;break;case"github.com":E=Vd;break;case"twitter.com":E=Ds;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:B,pendingToken:J,nonce:Se}=f;return x||B||T||J?J?g.startsWith("saml.")?Cs._create(g,J):Ui._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:T,accessToken:x}):new Is(g).credential({idToken:T,accessToken:x,rawNonce:Se}):null}return _ instanceof L.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function bi(_,f){return f.catch(g=>{throw g instanceof L.ZR&&function(_,f){var g,E;const T=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new Ec(_,function(_,f){var g;const E=(0,L.m9)(_),T=f;return xe(f.customData.operationType,E,"argument-error"),xe(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),ul._fromError(E,T)}(_,f));else if(T){const x=bp(f),B=f;x&&(B.credential=x,B.tenantId=T.tenantId||void 0,B.email=T.email||void 0,B.phoneNumber=T.phoneNumber||void 0)}}(_,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:ly(g),additionalUserInfo:zf(g),user:gr.getOrCreate(T)}})}function wp(_,f){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,p.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>bi(_,g.confirm(E))}}),Ip.apply(this,arguments)}class Ec{constructor(f,g){this.resolver=g,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return bi(cy(this.auth),this.resolver.resolveSignIn(f))}}class gr{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,L.m9)(_);return on.has(f)||on.set(f,ll._fromUser(f)),on.get(f)}(f)}static getOrCreate(f){return gr.USER_MAP.has(f)||gr.USER_MAP.set(f,new gr(f)),gr.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,p.Z)(function*(){return bi(g.auth,No(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,p.Z)(function*(){return wp(E.auth,function(_,f,g){return oc.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,p.Z)(function*(){return bi(g.auth,function(_,f,g){return zi.apply(this,arguments)}(g._delegate,f,Go))})()}linkWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield vp(mn(g.auth)),function(_,f,g){return function(_,f,g){return pu.apply(this,arguments)}(_,f,g)}(g._delegate,f,Go)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,p.Z)(function*(){return bi(g.auth,ya(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return wp(this.auth,function(_,f,g){return ac.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return bi(this.auth,function(_,f,g){return co.apply(this,arguments)}(this._delegate,f,Go))}reauthenticateWithRedirect(f){var g=this;return(0,p.Z)(function*(){return yield vp(mn(g.auth)),function(_,f,g){return function(_,f,g){return Xd.apply(this,arguments)}(_,f,g)}(g._delegate,f,Go)})()}sendEmailVerification(f){return function(_,f){return au.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,p.Z)(function*(){return yield function(_,f){return Ts.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(_,f){return cu((0,L.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return cu((0,L.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return A.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return wa.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(_,f,g){return uu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}gr.USER_MAP=new WeakMap;const _h=xe;let dy=(()=>{class _{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;_h(T,"invalid-api-key",{appName:g.name}),_h(T,"invalid-api-key",{appName:g.name});const x="undefined"!=typeof window?Go:void 0;this._delegate=E.initialize({options:{persistence:fw(T,g.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ys),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function(_,f,g){const E=mn(_);xe(E._canInitEmulator,E,"emulator-config-failed"),xe(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),x=ns(f),{host:B,port:J}=function(_){const f=ns(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(E);if(T){const x=T[1];return{host:x,port:Vu(E.substr(x.length+1))}}{const[x,B]=E.split(":");return{host:x,port:Vu(B)}}}(f);E.config.emulator={url:`${x}//${B}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:B,port:J,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,E)}applyActionCode(g){return function(_,f){return va.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ou(this._delegate,g)}confirmPasswordReset(g,E){return function(_,f,g){return zu.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var T=this;return(0,p.Z)(function*(){return bi(T._delegate,function(_,f,g){return Zu.apply(this,arguments)}(T._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(_,f){return ni.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(_,f){const g=ji.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,p.Z)(function*(){_h(yp(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function(_,f){return $t.apply(this,arguments)}(g._delegate,Go);return E?bi(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(_,f){mn(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,T){const{next:x,error:B,complete:J}=Cp(g,E,T);return this._delegate.onAuthStateChanged(x,B,J)}onIdTokenChanged(g,E,T){const{next:x,error:B,complete:J}=Cp(g,E,T);return this._delegate.onIdTokenChanged(x,B,J)}sendSignInLinkToEmail(g,E){return function(_,f,g){return ba.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function(_,f,g){return Hi.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,p.Z)(function*(){let T;switch(function(_,f){go(Object.values(ai).includes(f),_,"invalid-persistence-type"),(0,L.b$)()?go(f!==ai.SESSION,_,"unsupported-persistence-type"):(0,L.UG)()?go(f===ai.NONE,_,"unsupported-persistence-type"):Dl()?go(f===ai.NONE||f===ai.LOCAL&&(0,L.hl)(),_,"unsupported-persistence-type"):go(f===ai.NONE||Eu(),_,"unsupported-persistence-type")}(E._delegate,g),g){case ai.SESSION:T=Ss;break;case ai.LOCAL:T=(yield vn(Aa)._isAvailable())?Aa:hu;break;case ai.NONE:T=dr;break;default:return vt("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return bi(this._delegate,function(_){return is.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return bi(this._delegate,yn(this._delegate,g))}signInWithCustomToken(g){return bi(this._delegate,function(_,f){return ss.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return bi(this._delegate,function(_,f,g){return yn((0,L.m9)(_),So.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return bi(this._delegate,function(_,f,g){return Ku.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return wp(this._delegate,function(_,f,g){return ls.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,p.Z)(function*(){return _h(yp(),E._delegate,"operation-not-supported-in-this-environment"),bi(E._delegate,function(_,f,g){return $n.apply(this,arguments)}(E._delegate,g,Go))})()}signInWithRedirect(g){var E=this;return(0,p.Z)(function*(){return _h(yp(),E._delegate,"operation-not-supported-in-this-environment"),yield vp(E._delegate),function(_,f,g){return function(_,f,g){return fu.apply(this,arguments)}(_,f,g)}(E._delegate,g,Go)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(_,f){return Wu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ai,_})();function Cp(_,f,g){let E=_;"function"!=typeof _&&({next:E,error:f,complete:g}=_);const T=E;return{next:B=>T(B&&gr.getOrCreate(B)),error:f,complete:g}}function fw(_,f){const g=function(_,f){const g=Tl();if(!g)return[];const E=rn(_p,_,f);switch(g.getItem(E)){case ai.NONE:return[dr];case ai.LOCAL:return[Aa,Ss];case ai.SESSION:return[Ss];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(Aa)&&g.push(Aa),"undefined"!=typeof window)for(const E of[hu,Ss])g.includes(E)||g.push(E);return g.includes(dr)||g.push(dr),g}class hs{constructor(){this.providerId="phone",this._delegate=new M(cy(X.Z.auth()))}static credential(f,g){return M.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}hs.PHONE_SIGN_IN_METHOD=M.PHONE_SIGN_IN_METHOD,hs.PROVIDER_ID=M.PROVIDER_ID;const Dp=xe;class Tp{constructor(f,g,E=X.Z.app()){var T;Dp(null===(T=E.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ho(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new On.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new dy(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:So,FacebookAuthProvider:Ld,GithubAuthProvider:Vd,GoogleAuthProvider:Vt,OAuthProvider:Is,SAMLAuthProvider:$u,PhoneAuthProvider:hs,PhoneMultiFactorGenerator:ey,RecaptchaVerifier:Tp,TwitterAuthProvider:Ds,Auth:dy,AuthCredential:ws,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(X.Z)},7574:(qe,ge,P)=>{"use strict";P.d(ge,{y:()=>V});var p=P(7393),L=P(9181),ae=P(6490),ne=P(6554),_e=P(4487);var F=P(2494);let V=(()=>{class K{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const pe=new K;return pe.source=this,pe.operator=we,pe}subscribe(we,pe,he){const{operator:Ae}=this,Me=function(K,le,we){if(K){if(K instanceof p.L)return K;if(K[L.b])return K[L.b]()}return K||le||we?new p.L(K,le,we):new p.L(ae.c)}(we,pe,he);if(Me.add(Ae?Ae.call(Me,this.source):this.source||F.v.useDeprecatedSynchronousErrorHandling&&!Me.syncErrorThrowable?this._subscribe(Me):this._trySubscribe(Me)),F.v.useDeprecatedSynchronousErrorHandling&&Me.syncErrorThrowable&&(Me.syncErrorThrowable=!1,Me.syncErrorThrown))throw Me.syncErrorValue;return Me}_trySubscribe(we){try{return this._subscribe(we)}catch(pe){F.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=pe),function(K){for(;K;){const{closed:le,destination:we,isStopped:pe}=K;if(le||pe)return!1;K=we&&we instanceof p.L?we:null}return!0}(we)?we.error(pe):console.warn(pe)}}forEach(we,pe){return new(pe=Y(pe))((he,Ae)=>{let Me;Me=this.subscribe(De=>{try{we(De)}catch(We){Ae(We),Me&&Me.unsubscribe()}},Ae,he)})}_subscribe(we){const{source:pe}=this;return pe&&pe.subscribe(we)}[ne.L](){return this}pipe(...we){return 0===we.length?this:function(K){return 0===K.length?_e.y:1===K.length?K[0]:function(we){return K.reduce((pe,he)=>he(pe),we)}}(we)(this)}toPromise(we){return new(we=Y(we))((pe,he)=>{let Ae;this.subscribe(Me=>Ae=Me,Me=>he(Me),()=>pe(Ae))})}}return K.create=le=>new K(le),K})();function Y(K){if(K||(K=F.v.Promise||Promise),!K)throw new Error("no Promise impl found");return K}},6490:(qe,ge,P)=>{"use strict";P.d(ge,{c:()=>L});var p=P(2494),X=P(4449);const L={closed:!0,next(ae){},error(ae){if(p.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},9765:(qe,ge,P)=>{"use strict";P.d(ge,{Yc:()=>_e,xQ:()=>ce});var p=P(7574),X=P(7393),L=P(5319),ae=P(7971),re=P(8858),ne=P(9181);class _e extends X.L{constructor(V){super(V),this.destination=V}}let ce=(()=>{class F extends p.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne.b](){return new _e(this)}lift(Y){const K=new te(this,this);return K.operator=Y,K}next(Y){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:K}=this,le=K.length,we=K.slice();for(let pe=0;pe<le;pe++)we[pe].next(Y)}}error(Y){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=Y,this.isStopped=!0;const{observers:K}=this,le=K.length,we=K.slice();for(let pe=0;pe<le;pe++)we[pe].error(Y);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:Y}=this,K=Y.length,le=Y.slice();for(let we=0;we<K;we++)le[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Y){if(this.closed)throw new ae.N;return super._trySubscribe(Y)}_subscribe(Y){if(this.closed)throw new ae.N;return this.hasError?(Y.error(this.thrownError),L.w.EMPTY):this.isStopped?(Y.complete(),L.w.EMPTY):(this.observers.push(Y),new re.W(this,Y))}asObservable(){const Y=new p.y;return Y.source=this,Y}}return F.create=(V,Y)=>new te(V,Y),F})();class te extends ce{constructor(V,Y){super(),this.destination=V,this.source=Y}next(V){const{destination:Y}=this;Y&&Y.next&&Y.next(V)}error(V){const{destination:Y}=this;Y&&Y.error&&this.destination.error(V)}complete(){const{destination:V}=this;V&&V.complete&&this.destination.complete()}_subscribe(V){const{source:Y}=this;return Y?this.source.subscribe(V):L.w.EMPTY}}},8858:(qe,ge,P)=>{"use strict";P.d(ge,{W:()=>X});var p=P(5319);class X extends p.w{constructor(ae,re){super(),this.subject=ae,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,re=ae.observers;if(this.subject=null,!re||0===re.length||ae.isStopped||ae.closed)return;const ne=re.indexOf(this.subscriber);-1!==ne&&re.splice(ne,1)}}},7393:(qe,ge,P)=>{"use strict";P.d(ge,{L:()=>_e});var p=P(9105),X=P(6490),L=P(5319),ae=P(9181),re=P(2494),ne=P(4449);class _e extends L.w{constructor(F,V,Y){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!F){this.destination=X.c;break}if("object"==typeof F){F instanceof _e?(this.syncErrorThrowable=F.syncErrorThrowable,this.destination=F,F.add(this)):(this.syncErrorThrowable=!0,this.destination=new ce(this,F));break}default:this.syncErrorThrowable=!0,this.destination=new ce(this,F,V,Y)}}[ae.b](){return this}static create(F,V,Y){const K=new _e(F,V,Y);return K.syncErrorThrowable=!1,K}next(F){this.isStopped||this._next(F)}error(F){this.isStopped||(this.isStopped=!0,this._error(F))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(F){this.destination.next(F)}_error(F){this.destination.error(F),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:F}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=F,this}}class ce extends _e{constructor(F,V,Y,K){super(),this._parentSubscriber=F;let le,we=this;(0,p.m)(V)?le=V:V&&(le=V.next,Y=V.error,K=V.complete,V!==X.c&&(we=Object.create(V),(0,p.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=le,this._error=Y,this._complete=K}next(F){if(!this.isStopped&&this._next){const{_parentSubscriber:V}=this;re.v.useDeprecatedSynchronousErrorHandling&&V.syncErrorThrowable?this.__tryOrSetError(V,this._next,F)&&this.unsubscribe():this.__tryOrUnsub(this._next,F)}}error(F){if(!this.isStopped){const{_parentSubscriber:V}=this,{useDeprecatedSynchronousErrorHandling:Y}=re.v;if(this._error)Y&&V.syncErrorThrowable?(this.__tryOrSetError(V,this._error,F),this.unsubscribe()):(this.__tryOrUnsub(this._error,F),this.unsubscribe());else if(V.syncErrorThrowable)Y?(V.syncErrorValue=F,V.syncErrorThrown=!0):(0,ne.z)(F),this.unsubscribe();else{if(this.unsubscribe(),Y)throw F;(0,ne.z)(F)}}}complete(){if(!this.isStopped){const{_parentSubscriber:F}=this;if(this._complete){const V=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&F.syncErrorThrowable?(this.__tryOrSetError(F,V),this.unsubscribe()):(this.__tryOrUnsub(V),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(F,V){try{F.call(this._context,V)}catch(Y){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw Y;(0,ne.z)(Y)}}__tryOrSetError(F,V,Y){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{V.call(this._context,Y)}catch(K){return re.v.useDeprecatedSynchronousErrorHandling?(F.syncErrorValue=K,F.syncErrorThrown=!0,!0):((0,ne.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:F}=this;this._context=null,this._parentSubscriber=null,F.unsubscribe()}}},5319:(qe,ge,P)=>{"use strict";P.d(ge,{w:()=>ne});var p=P(9796),X=P(1555),L=P(9105);const re=(()=>{function ce(te){return Error.call(this),this.message=te?`${te.length} errors occurred during unsubscription:\n${te.map((F,V)=>`${V+1}) ${F.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=te,this}return ce.prototype=Object.create(Error.prototype),ce})();class ne{constructor(te){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,te&&(this._ctorUnsubscribe=!0,this._unsubscribe=te)}unsubscribe(){let te;if(this.closed)return;let{_parentOrParents:F,_ctorUnsubscribe:V,_unsubscribe:Y,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,F instanceof ne)F.remove(this);else if(null!==F)for(let le=0;le<F.length;++le)F[le].remove(this);if((0,L.m)(Y)){V&&(this._unsubscribe=void 0);try{Y.call(this)}catch(le){te=le instanceof re?_e(le.errors):[le]}}if((0,p.k)(K)){let le=-1,we=K.length;for(;++le<we;){const pe=K[le];if((0,X.K)(pe))try{pe.unsubscribe()}catch(he){te=te||[],he instanceof re?te=te.concat(_e(he.errors)):te.push(he)}}}if(te)throw new re(te)}add(te){let F=te;if(!te)return ne.EMPTY;switch(typeof te){case"function":F=new ne(te);case"object":if(F===this||F.closed||"function"!=typeof F.unsubscribe)return F;if(this.closed)return F.unsubscribe(),F;if(!(F instanceof ne)){const K=F;F=new ne,F._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+te+" added to Subscription.")}let{_parentOrParents:V}=F;if(null===V)F._parentOrParents=this;else if(V instanceof ne){if(V===this)return F;F._parentOrParents=[V,this]}else{if(-1!==V.indexOf(this))return F;V.push(this)}const Y=this._subscriptions;return null===Y?this._subscriptions=[F]:Y.push(F),F}remove(te){const F=this._subscriptions;if(F){const V=F.indexOf(te);-1!==V&&F.splice(V,1)}}}var ce;function _e(ce){return ce.reduce((te,F)=>te.concat(F instanceof re?F.errors:F),[])}ne.EMPTY=((ce=new ne).closed=!0,ce)},2494:(qe,ge,P)=>{"use strict";P.d(ge,{v:()=>X});let p=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else p&&console.log("RxJS: Back to a better error behavior. Thank you. <3");p=L},get useDeprecatedSynchronousErrorHandling(){return p}}},5345:(qe,ge,P)=>{"use strict";P.d(ge,{IY:()=>ae,Ds:()=>ne,ft:()=>ce});var p=P(7393),X=P(7574),L=P(7444);class ae extends p.L{constructor(F){super(),this.parent=F}_next(F){this.parent.notifyNext(F)}_error(F){this.parent.notifyError(F),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ne extends p.L{notifyNext(F){this.destination.next(F)}notifyError(F){this.destination.error(F)}notifyComplete(){this.destination.complete()}}function ce(te,F){if(F.closed)return;if(te instanceof X.y)return te.subscribe(F);let V;try{V=(0,L.s)(te)(F)}catch(Y){F.error(Y)}return V}},2441:(qe,ge,P)=>{"use strict";P.d(ge,{c:()=>re,N:()=>ne});var p=P(9765),X=P(7574),L=P(5319),ae=P(1307);class re extends X.y{constructor(V,Y){super(),this.source=V,this.subjectFactory=Y,this._refCount=0,this._isComplete=!1}_subscribe(V){return this.getSubject().subscribe(V)}getSubject(){const V=this._subject;return(!V||V.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let V=this._connection;return V||(this._isComplete=!1,V=this._connection=new L.w,V.add(this.source.subscribe(new _e(this.getSubject(),this))),V.closed&&(this._connection=null,V=L.w.EMPTY)),V}refCount(){return(0,ae.x)()(this)}}const ne=(()=>{const F=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:F._subscribe},_isComplete:{value:F._isComplete,writable:!0},getSubject:{value:F.getSubject},connect:{value:F.connect},refCount:{value:F.refCount}}})();class _e extends p.Yc{constructor(V,Y){super(V),this.connectable=Y}_error(V){this._unsubscribe(),super._error(V)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const V=this.connectable;if(V){this.connectable=null;const Y=V._connection;V._refCount=0,V._subject=null,V._connection=null,Y&&Y.unsubscribe()}}}},9193:(qe,ge,P)=>{"use strict";P.d(ge,{E:()=>X,c:()=>L});var p=P(7574);const X=new p.y(re=>re.complete());function L(re){return re?function(re){return new p.y(ne=>re.schedule(()=>ne.complete()))}(re):X}},4402:(qe,ge,P)=>{"use strict";P.d(ge,{D:()=>we});var p=P(7574),X=P(7444),L=P(5319),ae=P(6554),_e=P(4087),ce=P(377),V=P(4072),Y=P(9489);function we(pe,he){return he?function(pe,he){if(null!=pe){if(function(pe){return pe&&"function"==typeof pe[ae.L]}(pe))return function(pe,he){return new p.y(Ae=>{const Me=new L.w;return Me.add(he.schedule(()=>{const De=pe[ae.L]();Me.add(De.subscribe({next(We){Me.add(he.schedule(()=>Ae.next(We)))},error(We){Me.add(he.schedule(()=>Ae.error(We)))},complete(){Me.add(he.schedule(()=>Ae.complete()))}}))})),Me})}(pe,he);if((0,V.t)(pe))return function(pe,he){return new p.y(Ae=>{const Me=new L.w;return Me.add(he.schedule(()=>pe.then(De=>{Me.add(he.schedule(()=>{Ae.next(De),Me.add(he.schedule(()=>Ae.complete()))}))},De=>{Me.add(he.schedule(()=>Ae.error(De)))}))),Me})}(pe,he);if((0,Y.z)(pe))return(0,_e.r)(pe,he);if(function(pe){return pe&&"function"==typeof pe[ce.hZ]}(pe)||"string"==typeof pe)return function(pe,he){if(!pe)throw new Error("Iterable cannot be null");return new p.y(Ae=>{const Me=new L.w;let De;return Me.add(()=>{De&&"function"==typeof De.return&&De.return()}),Me.add(he.schedule(()=>{De=pe[ce.hZ](),Me.add(he.schedule(function(){if(Ae.closed)return;let We,ot;try{const Be=De.next();We=Be.value,ot=Be.done}catch(Be){return void Ae.error(Be)}ot?Ae.complete():(Ae.next(We),this.schedule())}))})),Me})}(pe,he)}throw new TypeError((null!==pe&&typeof pe||pe)+" is not observable")}(pe,he):pe instanceof p.y?pe:new p.y((0,X.s)(pe))}},6693:(qe,ge,P)=>{"use strict";P.d(ge,{n:()=>ae});var p=P(7574),X=P(5015),L=P(4087);function ae(re,ne){return ne?(0,L.r)(re,ne):new p.y((0,X.V)(re))}},6682:(qe,ge,P)=>{"use strict";P.d(ge,{T:()=>re});var p=P(7574),X=P(4869),L=P(3282),ae=P(6693);function re(...ne){let _e=Number.POSITIVE_INFINITY,ce=null,te=ne[ne.length-1];return(0,X.K)(te)?(ce=ne.pop(),ne.length>1&&"number"==typeof ne[ne.length-1]&&(_e=ne.pop())):"number"==typeof te&&(_e=ne.pop()),null===ce&&1===ne.length&&ne[0]instanceof p.y?ne[0]:(0,L.J)(_e)((0,ae.n)(ne,ce))}},5917:(qe,ge,P)=>{"use strict";P.d(ge,{of:()=>ae});var p=P(4869),X=P(6693),L=P(4087);function ae(...re){let ne=re[re.length-1];return(0,p.K)(ne)?(re.pop(),(0,L.r)(re,ne)):(0,X.n)(re)}},8002:(qe,ge,P)=>{"use strict";P.d(ge,{U:()=>X});var p=P(7393);function X(re,ne){return function(ce){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ce.lift(new L(re,ne))}}class L{constructor(ne,_e){this.project=ne,this.thisArg=_e}call(ne,_e){return _e.subscribe(new ae(ne,this.project,this.thisArg))}}class ae extends p.L{constructor(ne,_e,ce){super(ne),this.project=_e,this.count=0,this.thisArg=ce||this}_next(ne){let _e;try{_e=this.project.call(this.thisArg,ne,this.count++)}catch(ce){return void this.destination.error(ce)}this.destination.next(_e)}}},3282:(qe,ge,P)=>{"use strict";P.d(ge,{J:()=>L});var p=P(9773),X=P(4487);function L(ae=Number.POSITIVE_INFINITY){return(0,p.zg)(X.y,ae)}},9773:(qe,ge,P)=>{"use strict";P.d(ge,{zg:()=>ae});var p=P(8002),X=P(4402),L=P(5345);function ae(ce,te,F=Number.POSITIVE_INFINITY){return"function"==typeof te?V=>V.pipe(ae((Y,K)=>(0,X.D)(ce(Y,K)).pipe((0,p.U)((le,we)=>te(Y,le,K,we))),F)):("number"==typeof te&&(F=te),V=>V.lift(new re(ce,F)))}class re{constructor(te,F=Number.POSITIVE_INFINITY){this.project=te,this.concurrent=F}call(te,F){return F.subscribe(new ne(te,this.project,this.concurrent))}}class ne extends L.Ds{constructor(te,F,V=Number.POSITIVE_INFINITY){super(te),this.project=F,this.concurrent=V,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(te){this.active<this.concurrent?this._tryNext(te):this.buffer.push(te)}_tryNext(te){let F;const V=this.index++;try{F=this.project(te,V)}catch(Y){return void this.destination.error(Y)}this.active++,this._innerSub(F)}_innerSub(te){const F=new L.IY(this),V=this.destination;V.add(F);const Y=(0,L.ft)(te,F);Y!==F&&V.add(Y)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(te){this.destination.next(te)}notifyComplete(){const te=this.buffer;this.active--,te.length>0?this._next(te.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(qe,ge,P)=>{"use strict";P.d(ge,{ht:()=>V,QV:()=>te});var p=P(7393),X=P(9193),L=P(5917),ae=P(7574);class ce{constructor(le,we,pe){this.kind=le,this.value=we,this.error=pe,this.hasValue="N"===le}observe(le){switch(this.kind){case"N":return le.next&&le.next(this.value);case"E":return le.error&&le.error(this.error);case"C":return le.complete&&le.complete()}}do(le,we,pe){switch(this.kind){case"N":return le&&le(this.value);case"E":return we&&we(this.error);case"C":return pe&&pe()}}accept(le,we,pe){return le&&"function"==typeof le.next?this.observe(le):this.do(le,we,pe)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return K=this.error,new ae.y(we=>we.error(K));case"C":return(0,X.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(le){return void 0!==le?new ce("N",le):ce.undefinedValueNotification}static createError(le){return new ce("E",void 0,le)}static createComplete(){return ce.completeNotification}}function te(K,le=0){return function(pe){return pe.lift(new F(K,le))}}ce.completeNotification=new ce("C"),ce.undefinedValueNotification=new ce("N",void 0);class F{constructor(le,we=0){this.scheduler=le,this.delay=we}call(le,we){return we.subscribe(new V(le,this.scheduler,this.delay))}}class V extends p.L{constructor(le,we,pe=0){super(le),this.scheduler=we,this.delay=pe}static dispatch(le){const{notification:we,destination:pe}=le;we.observe(pe),this.unsubscribe()}scheduleMessage(le){this.destination.add(this.scheduler.schedule(V.dispatch,this.delay,new Y(le,this.destination)))}_next(le){this.scheduleMessage(ce.createNext(le))}_error(le){this.scheduleMessage(ce.createError(le)),this.unsubscribe()}_complete(){this.scheduleMessage(ce.createComplete()),this.unsubscribe()}}class Y{constructor(le,we){this.notification=le,this.destination=we}}},1307:(qe,ge,P)=>{"use strict";P.d(ge,{x:()=>X});var p=P(7393);function X(){return function(ne){return ne.lift(new L(ne))}}class L{constructor(ne){this.connectable=ne}call(ne,_e){const{connectable:ce}=this;ce._refCount++;const te=new ae(ne,ce),F=_e.subscribe(te);return te.closed||(te.connection=ce.connect()),F}}class ae extends p.L{constructor(ne,_e){super(ne),this.connectable=_e}_unsubscribe(){const{connectable:ne}=this;if(!ne)return void(this.connection=null);this.connectable=null;const _e=ne._refCount;if(_e<=0)return void(this.connection=null);if(ne._refCount=_e-1,_e>1)return void(this.connection=null);const{connection:ce}=this,te=ne._connection;this.connection=null,te&&(!ce||te===ce)&&te.unsubscribe()}}},3101:(qe,ge,P)=>{"use strict";P.d(ge,{R:()=>he});var p=P(7574);let X=1;const L=Promise.resolve(),ae={};function re(Me){return Me in ae&&(delete ae[Me],!0)}const ne={setImmediate(Me){const De=X++;return ae[De]=!0,L.then(()=>re(De)&&Me()),De},clearImmediate(Me){re(Me)}};var ce=P(6465),F=P(6102);const K=new class extends F.v{flush(De){this.active=!0,this.scheduled=void 0;const{actions:We}=this;let ot,Be=-1,Ft=We.length;De=De||We.shift();do{if(ot=De.execute(De.state,De.delay))break}while(++Be<Ft&&(De=We.shift()));if(this.active=!1,ot){for(;++Be<Ft&&(De=We.shift());)De.unsubscribe();throw ot}}}(class extends ce.o{constructor(De,We){super(De,We),this.scheduler=De,this.work=We}requestAsyncId(De,We,ot=0){return null!==ot&&ot>0?super.requestAsyncId(De,We,ot):(De.actions.push(this),De.scheduled||(De.scheduled=ne.setImmediate(De.flush.bind(De,null))))}recycleAsyncId(De,We,ot=0){if(null!==ot&&ot>0||null===ot&&this.delay>0)return super.recycleAsyncId(De,We,ot);0===De.actions.length&&(ne.clearImmediate(We),De.scheduled=void 0)}});var le=P(9796);class pe extends p.y{constructor(De,We=0,ot=K){var Me;super(),this.source=De,this.delayTime=We,this.scheduler=ot,(!(!(0,le.k)(Me=We)&&Me-parseFloat(Me)+1>=0)||We<0)&&(this.delayTime=0),(!ot||"function"!=typeof ot.schedule)&&(this.scheduler=K)}static create(De,We=0,ot=K){return new pe(De,We,ot)}static dispatch(De){const{source:We,subscriber:ot}=De;return this.add(We.subscribe(ot))}_subscribe(De){return this.scheduler.schedule(pe.dispatch,this.delayTime,{source:this.source,subscriber:De})}}function he(Me,De=0){return function(ot){return ot.lift(new Ae(Me,De))}}class Ae{constructor(De,We){this.scheduler=De,this.delay=We}call(De,We){return new pe(We,this.delay,this.scheduler).subscribe(De)}}},3342:(qe,ge,P)=>{"use strict";P.d(ge,{b:()=>ae});var p=P(7393);function X(){}var L=P(9105);function ae(_e,ce,te){return function(V){return V.lift(new re(_e,ce,te))}}class re{constructor(ce,te,F){this.nextOrObserver=ce,this.error=te,this.complete=F}call(ce,te){return te.subscribe(new ne(ce,this.nextOrObserver,this.error,this.complete))}}class ne extends p.L{constructor(ce,te,F,V){super(ce),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=F||X,this._tapComplete=V||X,(0,L.m)(te)?(this._context=this,this._tapNext=te):te&&(this._context=te,this._tapNext=te.next||X,this._tapError=te.error||X,this._tapComplete=te.complete||X)}_next(ce){try{this._tapNext.call(this._context,ce)}catch(te){return void this.destination.error(te)}this.destination.next(ce)}_error(ce){try{this._tapError.call(this._context,ce)}catch(te){return void this.destination.error(te)}this.destination.error(ce)}_complete(){try{this._tapComplete.call(this._context)}catch(ce){return void this.destination.error(ce)}return this.destination.complete()}}},4087:(qe,ge,P)=>{"use strict";P.d(ge,{r:()=>L});var p=P(7574),X=P(5319);function L(ae,re){return new p.y(ne=>{const _e=new X.w;let ce=0;return _e.add(re.schedule(function(){ce!==ae.length?(ne.next(ae[ce++]),ne.closed||_e.add(this.schedule())):ne.complete()})),_e})}},6465:(qe,ge,P)=>{"use strict";P.d(ge,{o:()=>L});var p=P(5319);class X extends p.w{constructor(re,ne){super()}schedule(re,ne=0){return this}}class L extends X{constructor(re,ne){super(re,ne),this.scheduler=re,this.work=ne,this.pending=!1}schedule(re,ne=0){if(this.closed)return this;this.state=re;const _e=this.id,ce=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(ce,_e,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(ce,this.id,ne),this}requestAsyncId(re,ne,_e=0){return setInterval(re.flush.bind(re,this),_e)}recycleAsyncId(re,ne,_e=0){if(null!==_e&&this.delay===_e&&!1===this.pending)return ne;clearInterval(ne)}execute(re,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(re,ne);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ne){let ce,_e=!1;try{this.work(re)}catch(te){_e=!0,ce=!!te&&te||new Error(te)}if(_e)return this.unsubscribe(),ce}_unsubscribe(){const re=this.id,ne=this.scheduler,_e=ne.actions,ce=_e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ce&&_e.splice(ce,1),null!=re&&(this.id=this.recycleAsyncId(ne,re,null)),this.delay=null}}},6102:(qe,ge,P)=>{"use strict";P.d(ge,{v:()=>X});let p=(()=>{class L{constructor(re,ne=L.now){this.SchedulerAction=re,this.now=ne}schedule(re,ne=0,_e){return new this.SchedulerAction(this,re).schedule(_e,ne)}}return L.now=()=>Date.now(),L})();class X extends p{constructor(ae,re=p.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,re=0,ne){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,re,ne):super.schedule(ae,re,ne)}flush(ae){const{actions:re}=this;if(this.active)return void re.push(ae);let ne;this.active=!0;do{if(ne=ae.execute(ae.state,ae.delay))break}while(ae=re.shift());if(this.active=!1,ne){for(;ae=re.shift();)ae.unsubscribe();throw ne}}}},3637:(qe,ge,P)=>{"use strict";P.d(ge,{z:()=>L});var p=P(6465);const L=new(P(6102).v)(p.o)},7771:(qe,ge,P)=>{"use strict";P.d(ge,{c:()=>ne,N:()=>re});var p=P(6465),L=P(6102);const re=new class extends L.v{}(class extends p.o{constructor(ce,te){super(ce,te),this.scheduler=ce,this.work=te}schedule(ce,te=0){return te>0?super.schedule(ce,te):(this.delay=te,this.state=ce,this.scheduler.flush(this),this)}execute(ce,te){return te>0||this.closed?super.execute(ce,te):this._execute(ce,te)}requestAsyncId(ce,te,F=0){return null!==F&&F>0||null===F&&this.delay>0?super.requestAsyncId(ce,te,F):ce.flush(this)}}),ne=re},377:(qe,ge,P)=>{"use strict";P.d(ge,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(qe,ge,P)=>{"use strict";P.d(ge,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(qe,ge,P)=>{"use strict";P.d(ge,{b:()=>p});const p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(qe,ge,P)=>{"use strict";P.d(ge,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(qe,ge,P)=>{"use strict";function p(X){setTimeout(()=>{throw X},0)}P.d(ge,{z:()=>p})},4487:(qe,ge,P)=>{"use strict";function p(X){return X}P.d(ge,{y:()=>p})},9796:(qe,ge,P)=>{"use strict";P.d(ge,{k:()=>p});const p=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(qe,ge,P)=>{"use strict";P.d(ge,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(qe,ge,P)=>{"use strict";function p(X){return"function"==typeof X}P.d(ge,{m:()=>p})},1555:(qe,ge,P)=>{"use strict";function p(X){return null!==X&&"object"==typeof X}P.d(ge,{K:()=>p})},4072:(qe,ge,P)=>{"use strict";function p(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}P.d(ge,{t:()=>p})},4869:(qe,ge,P)=>{"use strict";function p(X){return X&&"function"==typeof X.schedule}P.d(ge,{K:()=>p})},7444:(qe,ge,P)=>{"use strict";P.d(ge,{s:()=>V});var p=P(5015),X=P(4449),ae=P(377),ne=P(6554),ce=P(9489),te=P(4072),F=P(1555);const V=Y=>{if(Y&&"function"==typeof Y[ne.L])return(Y=>K=>{const le=Y[ne.L]();if("function"!=typeof le.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return le.subscribe(K)})(Y);if((0,ce.z)(Y))return(0,p.V)(Y);if((0,te.t)(Y))return(Y=>K=>(Y.then(le=>{K.closed||(K.next(le),K.complete())},le=>K.error(le)).then(null,X.z),K))(Y);if(Y&&"function"==typeof Y[ae.hZ])return(Y=>K=>{const le=Y[ae.hZ]();for(;;){let we;try{we=le.next()}catch(pe){return K.error(pe),K}if(we.done){K.complete();break}if(K.next(we.value),K.closed)break}return"function"==typeof le.return&&K.add(()=>{le.return&&le.return()}),K})(Y);{const le=`You provided ${(0,F.K)(Y)?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(le)}}},5015:(qe,ge,P)=>{"use strict";P.d(ge,{V:()=>p});const p=X=>L=>{for(let ae=0,re=X.length;ae<re&&!L.closed;ae++)L.next(X[ae]);L.complete()}},7621:(qe,ge,P)=>{"use strict";var p=P(3018);let X=null;function L(){return X}const _e=new p.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:te,token:n,providedIn:"platform"}),n})();function te(){return(0,p.LFG)(V)}const F=new p.OlP("Location Initialized");let V=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,a){Y()?this._history.pushState(t,r,a):this.location.hash=a}replaceState(t,r,a){Y()?this._history.replaceState(t,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=(0,p.Yz7)({factory:K,token:n,providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function K(){return new V((0,p.LFG)(_e))}function le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pe(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:Ae,token:n,providedIn:"root"}),n})();function Ae(n){const e=(0,p.LFG)(_e).location;return new De((0,p.LFG)(ce),e&&e.origin||"")}const Me=new p.OlP("appBaseHref");let De=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pe(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${r}${a}`:r}pushState(t,r,a,c){const h=this.prepareExternalUrl(a+pe(c));this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){const h=this.prepareExternalUrl(a+pe(c));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce),p.LFG(Me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,a,c){let h=this.prepareExternalUrl(a+pe(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,a,c){let h=this.prepareExternalUrl(a+pe(c));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ce),p.LFG(Me,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ot=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=we(Dt(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",a=null){this._platformStrategy.pushState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),a)}replaceState(t,r="",a=null){this._platformStrategy.replaceState(a,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(a=>a(t,r))}subscribe(t,r,a){return this._subject.subscribe({next:t,error:r,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(he),p.LFG(ce))},n.normalizeQueryParams=pe,n.joinWithSlash=le,n.stripTrailingSlash=we,n.\u0275prov=(0,p.Yz7)({factory:Be,token:n,providedIn:"root"}),n})();function Be(){return new ot((0,p.LFG)(he),(0,p.LFG)(ce))}function Dt(n){return n.replace(/\/index.html$/,"")}var je=(()=>((je=je||{})[je.Zero=0]="Zero",je[je.One=1]="One",je[je.Two=2]="Two",je[je.Few=3]="Few",je[je.Many=4]="Many",je[je.Other=5]="Other",je))();const Un=p.kL8;class dr{}let gn=(()=>{class n extends dr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Un(r||this.locale)(t)){case je.Zero:return"zero";case je.One:return"one";case je.Two:return"two";case je.Few:return"few";case je.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Mt(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[a,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}class Lu{constructor(e,t,r,a){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class n{constructor(t,r,a){this._viewContainer=t,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((a,c,h)=>{if(null==a.previousIndex){const y=this._viewContainer.createEmbeddedView(this._template,new Lu(null,this._ngForOf,-1,-1),null===h?void 0:h),w=new Ir(a,y);r.push(w)}else if(null==h)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const y=this._viewContainer.get(c);this._viewContainer.move(y,h);const w=new Ir(a,y);r.push(w)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const h=this._viewContainer.get(a);h.context.index=a,h.context.count=c,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ir{constructor(e,t){this.record=e,this.view=t}}let Cr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Vi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sn("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sn("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Vi{constructor(){this.$implicit=null,this.ngIf=null}}function sn(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Pd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:dr,useClass:gn}]}),n})();function tu(n){return"server"===n}let nu=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new tl((0,p.LFG)(_e),window)}),n})();class tl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const c=a.shadowRoot;if(c){const h=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(h)return h}a=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],a-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Bu(this.window.history)||Bu(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Bu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Bi{}class ga extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ga,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null);return null==t?null:function(n){So=So||document.createElement("a"),So.setAttribute("href",n);const e=So.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Mt(document.cookie,e)}}let So,ji=null;const to=new p.OlP("TRANSITION_ID"),Ld=[{provide:p.ip1,useFactory:function(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=L(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[to,_e,p.zs3],multi:!0}];class Vt{static init(){(0,p.VLi)(new Vt)}addToWindow(e){p.dqk.getAngularTestability=(r,a=!0)=>{const c=e.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const a=p.dqk.getAllAngularTestabilities();let c=a.length,h=!1;const y=function(w){h=h||w,c--,0==c&&r(h)};a.forEach(function(w){w.whenStable(y)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Vd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ts=new p.OlP("EventManagerPlugins");let Ro=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,a){return this._findPluginFor(r).addEventListener(t,r,a)}addGlobalEventListener(t,r,a){return this._findPluginFor(r).addGlobalEventListener(t,r,a)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const h=a[c];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ts),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Mo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const a=L().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,r)}}let ma=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),As=(()=>{class n extends ma{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,a){t.forEach(c=>{const h=this._doc.createElement("style");h.textContent=c,a.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(nl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(t,a,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(nl))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function nl(n){L().remove(n)}const Ee={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jt=/%COMP%/g;function ro(n,e,t){for(let r=0;r<e.length;r++){let a=e[r];Array.isArray(a)?ro(n,a,t):(a=a.replace(jt,n),t.push(a))}return t}function jd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _a=(()=>{class n{constructor(t,r,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new ss(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new io(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(t),a}case 1:case p.ifc.ShadowDom:return new Hi(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const a=ro(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ro),p.LFG(As),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class ss{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ee[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,a){if(a){t=a+":"+t;const c=Ee[a];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const a=Ee[r];a?e.removeAttributeNS(a,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,a){a&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,a&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jd(r)):this.eventManager.addEventListener(e,t,jd(r))}}class io extends ss{constructor(e,t,r,a){super(e),this.component=r;const c=ro(a+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(jt,a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(jt,n)}(a+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hi extends ss{constructor(e,t,r,a){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=ro(a.id,a.styles,[]);for(let h=0;h<c.length;h++){const y=document.createElement("style");y.textContent=c[h],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rl=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,a){return t.addEventListener(r,a,!1),()=>this.removeEventListener(t,r,a)}removeEventListener(t,r,a){return t.removeEventListener(r,a)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ko=["alt","control","meta","shift"],ba={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ni=(()=>{class n extends Mo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,a){const c=n.parseEventName(r),h=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,c.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(r.pop());let h="";if(ko.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),h+=w+".")}),h+=c,0!=r.length||0===c.length)return null;const y={};return y.domEventName=a,y.fullKey=h,y}static getEventFullKey(t){let r="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&sl.hasOwnProperty(e)&&(e=sl[e]))}return ba[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),ko.forEach(c=>{c!=a&&Wr[c](t)&&(r+=c+".")}),r+=a,r}static eventCallback(t,r,a){return c=>{n.getEventFullKey(c)===t&&a.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const al=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function(){ga.makeCurrent(),Vt.init()},multi:!0},{provide:_e,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),ri=[[],{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:Ts,useClass:rl,multi:!0,deps:[_e,p.R0b,p.Lbi]},{provide:Ts,useClass:ni,multi:!0,deps:[_e]},[],{provide:_a,useClass:_a,deps:[Ro,As,p.AFp]},{provide:p.FYo,useExisting:_a},{provide:ma,useExisting:As},{provide:As,useClass:As,deps:[_e]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:Ro,useClass:Ro,deps:[Ts,p.R0b]},{provide:Bi,useClass:Vd,deps:[]},[]];let Ia=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:to,useExisting:p.AFp},Ld]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:ri,imports:[Pd,p.hGG]}),n})();"undefined"!=typeof window&&window;var on=P(4402),ht=P(5917),ii=P(9765),Fo=P(7971);class Tr extends ii.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Fo.N;return this._value}next(e){super.next(this._value=e)}}var tc=P(4869),so=P(9796),Ar=P(7393);class hu extends Ar.L{notifyNext(e,t,r,a,c){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Kd extends Ar.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ss=P(7444),Sr=P(7574);function Yd(n,e,t,r,a=new Kd(n,t,r)){if(!a.closed)return e instanceof Sr.y?e.subscribe(a):(0,Ss.s)(e)(a)}var Lo=P(6693);const Qd={};class Da{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new nc(e,this.resultSelector))}}class nc extends hu{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Qd),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Yd(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const a=this.values,h=this.toRespond?a[r]===Qd?--this.toRespond:this.toRespond:0;a[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const oo=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var os=P(3282);function ao(...n){return(0,os.J)(1)((0,ht.of)(...n))}var xs=P(9193);function us(n){return new Sr.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,on.D)(t):(0,xs.c)()).subscribe(e)})}var Vo=P(2441),ut=P(8002),si=P(5345);function Yn(n,e){return"function"==typeof e?t=>t.pipe(Yn((r,a)=>(0,on.D)(n(r,a)).pipe((0,ut.U)((c,h)=>e(r,c,a,h))))):t=>t.lift(new Gi(n))}class Gi{constructor(e){this.project=e}call(e,t){return t.subscribe(new Um(e,this.project))}}class Um extends si.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new si.IY(this),a=this.destination;a.add(r),this.innerSubscription=(0,si.ft)(e,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Yf=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function dl(n){return e=>0===n?(0,xs.c)():e.lift(new Qf(n))}class Qf{constructor(e){if(this.total=e,this.total<0)throw new Yf}call(e,t){return t.subscribe(new wn(e,this.total))}}class wn extends Ar.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function hl(...n){const e=n[n.length-1];return(0,tc.K)(e)?(n.pop(),t=>ao(n,t,e)):t=>ao(n,t)}function Ta(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new Aa(n,e,t))}}class Aa{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new jm(e,this.accumulator,this.seed,this.hasSeed))}}class jm extends Ar.L{constructor(e,t,r,a){super(e),this.accumulator=t,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function Rs(n,e){return function(r){return r.lift(new Hm(n,e))}}class Hm{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Jd(e,this.predicate,this.thisArg))}}class Jd extends Ar.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Sa(n){return function(t){const r=new Jf(n),a=t.lift(r);return r.caught=a}}class Jf{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Xf(e,this.selector,this.caught))}}class Xf extends si.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const r=new si.IY(this);this.add(r);const a=(0,si.ft)(t,r);a!==r&&this.add(a)}}}var fr=P(9773);function vi(n,e){return(0,fr.zg)(n,e,1)}function Uo(n){return function(t){return 0===n?(0,xs.c)():t.lift(new An(n))}}class An{constructor(e){if(this.total=e,this.total<0)throw new Yf}call(e,t){return t.subscribe(new xa(e,this.total))}}class xa extends Ar.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,a=this.count++;t.length<r?t.push(e):t[a%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<r;c++){const h=t++%r;e.next(a[h])}}e.complete()}}function Bo(n=qi){return e=>e.lift(new ic(n))}class ic{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new $m(e,this.errorFactory))}}class $m extends Ar.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function qi(){return new oo}function cs(n=null){return e=>e.lift(new sc(n))}class sc{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new jo(e,this.defaultValue))}}class jo extends Ar.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var xr=P(4487);function Ho(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rs((a,c)=>n(a,c,r)):xr.y,dl(1),t?cs(e):Bo(()=>new oo))}var oi=P(3342),uo=P(1307),ep=P(5319);class Ei{constructor(e){this.callback=e}call(e,t){return t.subscribe(new oc(e,this.callback))}}class oc extends Ar.L{constructor(e,t){super(e),this.add(new ep.w(t))}}class Rr{constructor(e,t){this.id=e,this.url=t}}class ac extends Rr{constructor(e,t,r="imperative",a=null){super(e,t),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ms extends Rr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pl extends Rr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class I extends Rr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class A extends Rr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M extends Rr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U extends Rr{constructor(e,t,r,a,c){super(e,t),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Z extends Rr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie extends Rr{constructor(e,t,r,a){super(e,t),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class be{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ue{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class st{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bt{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ct{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class co{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ns(n){return new co(n)}const zi="ngNavigationCancelingError";function Os(n){const e=Error("NavigationCancelingError: "+n);return e[zi]=!0,e}function ks(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const a={};for(let c=0;c<r.length;c++){const h=r[c],y=n[c];if(h.startsWith(":"))a[h.substring(1)]=y;else if(h!==y.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function pr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let a;for(let c=0;c<t.length;c++)if(a=t[c],!uc(n[a],e[a]))return!1;return!0}function uc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((a,c)=>r[c]===a)}return n===e}function ho(n){return Array.prototype.concat.apply([],n)}function Ra(n){return n.length>0?n[n.length-1]:null}function Qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ds(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,on.D)(Promise.resolve(n)):(0,ht.of)(n)}const cc={exact:function Gm(n,e,t){if(!Na(n.segments,e.segments)||!pu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Gm(n.children[r],e.children[r],t))return!1;return!0},subset:eh},fo={exact:function(n,e){return pr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uc(n[t],e[t]))},ignored:()=>!0};function fu(n,e,t){return cc[t.paths](n.root,e.root,t.matrixParams)&&fo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function eh(n,e,t){return gl(n,e,e.segments,t)}function gl(n,e,t,r){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!Na(a,t)||e.hasChildren()||!pu(a,t,r))}if(n.segments.length===t.length){if(!Na(n.segments,t)||!pu(n.segments,t,r))return!1;for(const a in e.children)if(!n.children[a]||!eh(n.children[a],e.children[a],r))return!1;return!0}{const a=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(Na(n.segments,a)&&pu(n.segments,a,r)&&n.children[lt])&&gl(n.children[lt],e,c,r)}}function pu(n,e,t){return e.every((r,a)=>fo[t](n[a].parameters,r.parameters))}class gu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ns(this.queryParams)),this._queryParamMap}toString(){return Av.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Qn(t,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ml(this)}}class Wi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ns(this.parameters)),this._parameterMap}toString(){return Sv(this)}}function Na(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class th{}class tp{parse(e){const t=new Mv(e);return new gu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yl(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(a=>`${$o(t)}=${$o(a)}`).join("&"):`${$o(t)}=${$o(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Av=new tp;function ml(n){return n.segments.map(e=>Sv(e)).join("/")}function yl(n,e){if(!n.hasChildren())return ml(n);if(e){const t=n.children[lt]?yl(n.children[lt],!1):"",r=[];return Qn(n.children,(a,c)=>{c!==lt&&r.push(`${c}:${yl(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Qn(n.children,(r,a)=>{a===lt&&(t=t.concat(e(r,a)))}),Qn(n.children,(r,a)=>{a!==lt&&(t=t.concat(e(r,a)))}),t}(n,(r,a)=>a===lt?[yl(n.children[lt],!1)]:[`${a}:${yl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[lt]?`${ml(n)}/${t[0]}`:`${ml(n)}/(${t.join("//")})`}}function np(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $o(n){return np(n).replace(/%3B/gi,";")}function Oa(n){return np(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nh(n){return decodeURIComponent(n)}function rh(n){return nh(n.replace(/\+/g,"%20"))}function Sv(n){return`${Oa(n.path)}${function(n){return Object.keys(n).map(e=>`;${Oa(e)}=${Oa(n[e])}`).join("")}(n.parameters)}`}const zm=/^[^\/()?;=#]+/;function ka(n){const e=n.match(zm);return e?e[0]:""}const Wm=/^[^=?&#]+/,xv=/^[^?&#]+/;class Mv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[lt]=new $t(e,t)),r}parseSegment(){const e=ka(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Wi(nh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ka(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=ka(this.remaining);a&&(r=a,this.capture(r))}e[nh(t)]=nh(r)}parseQueryParam(e){const t=function(n){const e=n.match(Wm);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(xv);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const a=rh(t),c=rh(r);if(e.hasOwnProperty(a)){let h=e[a];Array.isArray(h)||(h=[h],e[a]=h),h.push(c)}else e[a]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ka(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=lt);const h=this.parseChildren();t[c]=1===Object.keys(h).length?h[lt]:new $t([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Zm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ip(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ip(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ps(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return Ps(e,this._root).map(t=>t.value)}}function ip(n,e){if(n===e.value)return e;for(const t of e.children){const r=ip(n,t);if(r)return r}return null}function Ps(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ps(n,t);if(r.length)return r.unshift(e),r}return[]}class Zr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function lc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Km extends Zm{constructor(e,t){super(e),this.snapshot=t,op(this,e)}toString(){return this.snapshot.toString()}}function Ym(n,e){const t=function(n,e){const h=new oh([],{},{},"",{},lt,e,null,n.root,-1,{});return new Jm("",new Zr(h,[]))}(n,e),r=new Tr([new Wi("",{})]),a=new Tr({}),c=new Tr({}),h=new Tr({}),y=new Tr(""),w=new dc(r,a,h,y,c,lt,e,t.root);return w.snapshot=t.root,new Km(new Zr(w,[]),t)}class dc{constructor(e,t,r,a,c,h,y,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(e=>Ns(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(e=>Ns(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const a=t[r],c=t[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class oh{constructor(e,t,r,a,c,h,y,w,D,R,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=a,this.data=c,this.outlet=h,this.component=y,this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=R,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ns(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ns(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jm extends Zm{constructor(e,t){super(t),this.url=e,op(this,t)}toString(){return ah(this._root)}}function op(n,e){e.value._routerState=n,e.children.forEach(t=>op(n,t))}function ah(n){const e=n.children.length>0?` { ${n.children.map(ah).join(", ")} } `:"";return`${n.value}${e}`}function Xm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),pr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),pr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function _l(n,e){const t=pr(n.params,e.params)&&function(n,e){return Na(n,e)&&n.every((t,r)=>pr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_l(n.parent,e.parent))}function hc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(r=>{for(const a of t.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return hc(n,r,a);return hc(n,r)})}(n,e,t);return new Zr(r,a)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const h=c.route;return Fs(e,h),h}}const r=function(n){return new dc(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(c=>hc(n,c));return new Zr(r,a)}}function Fs(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Fs(n.children[t],e.children[t])}function fc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function uh(n){return"object"==typeof n&&null!=n&&n.outlets}function ty(n,e,t,r,a){let c={};return r&&Qn(r,(h,y)=>{c[y]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),new gu(t.root===n?e:Ov(t.root,n,e),c,a)}function Ov(n,e,t){const r={};return Qn(n.children,(a,c)=>{r[c]=a===e?t:Ov(a,e,t)}),new $t(n.segments,r)}class ch{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fc(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(uh);if(a&&a!==Ra(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ny(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return lh(n,e,t);const r=function(n,e,t){let r=0,a=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=t.length)return c;const h=n.segments[a],y=t[r];if(uh(y))break;const w=`${y}`,D=r<t.length-1?t[r+1]:null;if(a>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!dp(w,D,h))return c;r+=2}else{if(!dp(w,{},h))return c;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,e,t),a=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new $t(n.segments.slice(0,r.pathIndex),{});return c.children[lt]=new $t(n.segments.slice(r.pathIndex),n.children),lh(c,0,a)}return r.match&&0===a.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?lp(n,e,t):r.match?lh(n,0,a):lp(n,e,t)}function lh(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function(n){return uh(n[0])?n[0].outlets:{[lt]:n}}(t),a={};return Qn(r,(c,h)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[h]=ny(n.children[h],e,c))}),Qn(n.children,(c,h)=>{void 0===r[h]&&(a[h]=c)}),new $t(n.segments,a)}}function lp(n,e,t){const r=n.segments.slice(0,e);let a=0;for(;a<t.length;){const c=t[a];if(uh(c)){const w=dh(c.outlets);return new $t(r,w)}if(0===a&&fc(t[0])){r.push(new Wi(n.segments[e].path,El(t[0]))),a++;continue}const h=uh(c)?c.outlets[lt]:`${c}`,y=a<t.length-1?t[a+1]:null;h&&y&&fc(y)?(r.push(new Wi(h,El(y))),a+=2):(r.push(new Wi(h,{})),a++)}return new $t(r,{})}function dh(n){const e={};return Qn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=lp(new $t([],{}),0,t))}),e}function El(n){const e={};return Qn(n,(t,r)=>e[r]=`${t}`),e}function dp(n,e,t){return n==t.path&&pr(e,t.parameters)}class kv{constructor(e,t,r,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=a}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const a=lc(t);e.children.forEach(c=>{const h=c.value.outlet;this.deactivateRoutes(c,a[h],r),delete a[h]}),Qn(a,(c,h)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(a===c)if(a.component){const h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),a=r&&e.value.component?r.children:t,c=lc(e);for(const h of Object.keys(c))this.deactivateRouteAndItsChildren(c[h],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const a=lc(t);e.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],r),this.forwardEvent(new ct(c.value.snapshot))}),e.children.length&&this.forwardEvent(new bt(e.value.snapshot))}activateRoutes(e,t,r){const a=e.value,c=t?t.value:null;if(Xm(a),a===c)if(a.component){const h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(a.component){const h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const y=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(y.contexts),h.attachRef=y.componentRef,h.route=y.route.value,h.outlet&&h.outlet.attach(y.componentRef,y.route.value),Sn(y.route)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),w=y?y.module.componentFactoryResolver:null;h.attachRef=null,h.route=a,h.resolver=w,h.outlet&&h.outlet.activateWith(a,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function Sn(n){Xm(n.value),n.children.forEach(Sn)}class fp{constructor(e,t){this.routes=e,this.module=t}}function po(n){return"function"==typeof n}function vu(n){return n instanceof gu}const hh=Symbol("INITIAL_VALUE");function gc(){return Yn(n=>function(...n){let e,t;return(0,tc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,so.k)(n[0])&&(n=n[0]),(0,Lo.n)(n,t).lift(new Da(e))}(n.map(e=>e.pipe(dl(1),hl(hh)))).pipe(Ta((e,t)=>{let r=!1;return t.reduce((a,c,h)=>a!==hh?a:(c===hh&&(r=!0),r||!1!==c&&h!==t.length-1&&!vu(c)?a:c),e)},hh),Rs(e=>e!==hh),(0,ut.U)(e=>vu(e)?e:!0===e),dl(1)))}let Fa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:function(){return[yy]},encapsulation:2}),n})();function Kr(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];gp(r,wl(e,r))}}function gp(n,e){n.children&&Kr(n.children,e)}function wl(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function fh(n){const e=n.children&&n.children.map(fh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==lt&&(t.component=Fa),t}function hn(n){return n.outlet||lt}function mc(n,e){const t=n.filter(r=>hn(r)===e);return t.push(...n.filter(r=>hn(r)!==e)),t}const Il={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ph(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Il):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(e.matcher||ks)(t,n,e);if(!c)return Object.assign({},Il);const h={};Qn(c.posParams,(w,D)=>{h[D]=w.path});const y=c.consumed.length>0?Object.assign(Object.assign({},h),c.consumed[c.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:y,positionalParamSegments:null!==(r=c.posParams)&&void 0!==r?r:{}}}function gh(n,e,t,r,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>_c(n,e,r)&&hn(r)!==lt)}(n,t,r)){const h=new $t(e,function(n,e,t,r){const a={};a[lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&hn(c)!==lt){const h=new $t([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[hn(c)]=h}return a}(n,e,r,new $t(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>_c(n,e,r))}(n,t,r)){const h=new $t(n.segments,function(n,e,t,r,a,c){const h={};for(const y of r)if(_c(n,t,y)&&!a[hn(y)]){const w=new $t([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===c?n.segments.length:e.length,h[hn(y)]=w}return Object.assign(Object.assign({},a),h)}(n,e,t,r,n.children,a));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const c=new $t(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function _c(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function oy(n,e,t,r){return!!(hn(n)===r||r!==lt&&_c(e,t,n))&&("**"===n.path||ph(e,n,t).matched)}function ay(n,e,t){return 0===e.length&&!n.children[t]}class Cl{constructor(e){this.segmentGroup=e||null}}class mp{constructor(e){this.urlTree=e}}function Eu(n){return new Sr.y(e=>e.error(new Cl(n)))}function Dl(n){return new Sr.y(e=>e.error(new mp(n)))}function yp(n){return new Sr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class vc{constructor(e,t,r,a,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=gh(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,lt).pipe((0,ut.U)(c=>this.createUrlTree(ai(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sa(c=>{if(c instanceof mp)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Cl?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,lt).pipe((0,ut.U)(a=>this.createUrlTree(ai(a),e.queryParams,e.fragment))).pipe(Sa(a=>{throw a instanceof Cl?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const a=e.segments.length>0?new $t([],{[lt]:e}):e;return new gu(a,t,r)}expandSegmentGroup(e,t,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ut.U)(c=>new $t([],c))):this.expandSegment(e,r,t,r.segments,a,!0)}expandChildren(e,t,r){const a=[];for(const c of Object.keys(r.children))"primary"===c?a.unshift(c):a.push(c);return(0,on.D)(a).pipe(vi(c=>{const h=r.children[c],y=mc(t,c);return this.expandSegmentGroup(e,y,h,c).pipe((0,ut.U)(w=>({segment:w,outlet:c})))}),Ta((c,h)=>(c[h.outlet]=h.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Rs((a,c)=>n(a,c,r)):xr.y,Uo(1),t?cs(e):Bo(()=>new oo))}())}expandSegment(e,t,r,a,c,h){return(0,on.D)(r).pipe(vi(y=>this.expandSegmentAgainstRoute(e,t,r,y,a,c,h).pipe(Sa(D=>{if(D instanceof Cl)return(0,ht.of)(null);throw D}))),Ho(y=>!!y),Sa((y,w)=>{if(y instanceof oo||"EmptyError"===y.name){if(ay(t,a,c))return(0,ht.of)(new $t([],{}));throw new Cl(t)}throw y}))}expandSegmentAgainstRoute(e,t,r,a,c,h,y){return oy(a,t,c,h)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,c,h):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h):Eu(t):Eu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,a,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,a){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Dl(c):this.lineralizeSegments(r,c).pipe((0,fr.zg)(h=>{const y=new $t(h,{});return this.expandSegment(e,y,t,h,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,a,c,h){const{matched:y,consumedSegments:w,lastChild:D,positionalParamSegments:R}=ph(t,a,c);if(!y)return Eu(t);const O=this.applyRedirectCommands(w,a.redirectTo,R);return a.redirectTo.startsWith("/")?Dl(O):this.lineralizeSegments(a,O).pipe((0,fr.zg)(G=>this.expandSegment(e,t,r,G.concat(c.slice(D)),h,!1)))}matchSegmentAgainstRoute(e,t,r,a,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ht.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ut.U)(G=>(r._loadedConfig=G,new $t(a,{})))):(0,ht.of)(new $t(a,{}));const{matched:h,consumedSegments:y,lastChild:w}=ph(t,r,a);if(!h)return Eu(t);const D=a.slice(w);return this.getChildConfig(e,r,a).pipe((0,fr.zg)(O=>{const G=O.module,q=O.routes,{segmentGroup:ee,slicedSegments:Te}=gh(t,y,D,q),Pe=new $t(ee.segments,ee.children);if(0===Te.length&&Pe.hasChildren())return this.expandChildren(G,q,Pe).pipe((0,ut.U)(Ct=>new $t(y,Ct)));if(0===q.length&&0===Te.length)return(0,ht.of)(new $t(y,{}));const rt=hn(r)===c;return this.expandSegment(G,Pe,q,Te,rt?lt:c,!0).pipe((0,ut.U)(_t=>new $t(y.concat(_t.segments),_t.children)))}))}getChildConfig(e,t,r){return t.children?(0,ht.of)(new fp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ht.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,fr.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,ut.U)(c=>(t._loadedConfig=c,c))):(n=t,new Sr.y(e=>e.error(Os(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ht.of)(new fp([],e))}runCanLoadGuards(e,t,r){const a=t.canLoad;if(!a||0===a.length)return(0,ht.of)(!0);const c=a.map(h=>{const y=e.get(h);let w;if((n=y)&&po(n.canLoad))w=y.canLoad(t,r);else{if(!po(y))throw new Error("Invalid CanLoad guard");w=y(t,r)}var n;return ds(w)});return(0,ht.of)(c).pipe(gc(),(0,oi.b)(h=>{if(!vu(h))return;const y=Os(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw y.url=h,y}),(0,ut.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],a=t.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return(0,ht.of)(r);if(a.numberOfChildren>1||!a.children[lt])return yp(e.redirectTo);a=a.children[lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,a){const c=this.createSegmentGroup(e,t.root,r,a);return new gu(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Qn(e,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const y=a.substring(1);r[c]=t[y]}else r[c]=a}),r}createSegmentGroup(e,t,r,a){const c=this.createSegments(e,t.segments,r,a);let h={};return Qn(t.children,(y,w)=>{h[w]=this.createSegmentGroup(e,y,r,a)}),new $t(c,h)}createSegments(e,t,r,a){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,a):this.findOrReturn(c,r))}findPosParam(e,t,r){const a=r[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let r=0;for(const a of t){if(a.path===e.path)return t.splice(r),a;r++}return e}}function ai(n){const e={};for(const r of Object.keys(n.children)){const c=ai(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[lt]){const e=n.children[lt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}class _p{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mh{constructor(e,t){this.component=e,this.route=t}}function vp(n,e,t){const r=n._root;return Yr(r,e?e._root:null,t,[r.value])}function yh(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Yr(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=lc(e);return n.children.forEach(h=>{(function(n,e,t,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,h=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(h&&c.routeConfig===h.routeConfig){const w=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Na(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Na(n.url,e.url)||!pr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_l(n,e)||!pr(n.queryParams,e.queryParams);default:return!_l(n,e)}}(h,c,c.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new _p(r)):(c.data=h.data,c._resolvedData=h._resolvedData),Yr(n,e,c.component?y?y.children:null:t,r,a),w&&y&&y.outlet&&y.outlet.isActivated&&a.canDeactivateChecks.push(new mh(y.outlet.component,h))}else h&&Al(e,y,a),a.canActivateChecks.push(new _p(r)),Yr(n,null,c.component?y?y.children:null:t,r,a)})(h,c[h.value.outlet],t,r.concat([h.value]),a),delete c[h.value.outlet]}),Qn(c,(h,y)=>Al(h,t.getContext(y),a)),a}function Al(n,e,t){const r=lc(n),a=n.value;Qn(r,(c,h)=>{Al(c,a.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new mh(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class _h{}function dy(n){return new Sr.y(e=>e.error(n))}class fw{constructor(e,t,r,a,c,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h}recognize(){const e=gh(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,lt);if(null===t)return null;const r=new oh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Zr(r,t),c=new Jm(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=sp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const h=t.children[c],y=mc(e,c),w=this.processSegmentGroup(y,h,c);if(null===w)return null;r.push(...w)}const a=hy(r);return a.sort((e,t)=>e.value.outlet===lt?-1:t.value.outlet===lt?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,r,a){for(const c of e){const h=this.processSegmentAgainstRoute(c,t,r,a);if(null!==h)return h}return ay(t,r,a)?[]:null}processSegmentAgainstRoute(e,t,r,a){if(e.redirectTo||!oy(e,t,r,a))return null;let c,h=[],y=[];if("**"===e.path){const q=r.length>0?Ra(r).parameters:{};c=new oh(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),hn(e),e.component,e,_(t),f(t)+r.length,E(e))}else{const q=ph(t,e,r);if(!q.matched)return null;h=q.consumedSegments,y=r.slice(q.lastChild),c=new oh(h,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,g(e),hn(e),e.component,e,_(t),f(t)+h.length,E(e))}const w=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:D,slicedSegments:R}=gh(t,h,y,w.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&D.hasChildren()){const q=this.processChildren(w,D);return null===q?null:[new Zr(c,q)]}if(0===w.length&&0===R.length)return[new Zr(c,[])];const O=hn(e)===a,G=this.processSegment(w,D,R,O?lt:a);return null===G?null:[new Zr(c,G)]}}function Tp(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hy(n){const e=[],t=new Set;for(const r of n){if(!Tp(r)){e.push(r);continue}const a=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...r.children),t.add(a)):e.push(r)}for(const r of t){const a=hy(r.children);e.push(new Zr(r.value,a))}return e.filter(r=>!t.has(r))}function _(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function f(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function g(n){return n.data||{}}function E(n){return n.resolve||{}}function Ie(n){return Yn(e=>{const t=n(e);return t?(0,on.D)(t).pipe((0,ut.U)(()=>e)):(0,ht.of)(e)})}class qt extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Jn=new p.OlP("ROUTES");class qo{constructor(e,t,r,a){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,ut.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=c.create(e);return new fp(ho(h.injector.get(Jn,void 0,p.XFs.Self|p.XFs.Optional)).map(fh),h)}),Sa(c=>{throw t._loader$=void 0,c}));return t._loader$=new Vo.c(a,()=>new ii.xQ).pipe((0,uo.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,on.D)(this.loader.load(e)):ds(e()).pipe((0,fr.zg)(t=>t instanceof p.YKP?(0,ht.of)(t):(0,on.D)(this.compiler.compileModuleAsync(t))))}}class vh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new La,this.attachRef=null}}class La{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new vh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Ap{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Sl(n){throw n}function Sp(n,e,t){return e.parse("/")}function xl(n,e){return(0,ht.of)(null)}const xp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},py={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class n{constructor(t,r,a,c,h,y,w,D){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=a,this.location=c,this.config=D,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ii.xQ,this.errorHandler=Sl,this.malformedUriErrorHandler=Sp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xl,afterPreactivation:xl},this.urlHandlingStrategy=new Ap,this.routeReuseStrategy=new qt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(p.h0i),this.console=h.get(p.c2e);const G=h.get(p.R0b);this.isNgZoneEnabled=G instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(D),this.currentUrlTree=new gu(new $t([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qo(y,w,q=>this.triggerEvent(new be(q)),q=>this.triggerEvent(new Ue(q))),this.routerState=Ym(this.currentUrlTree,this.rootComponentType),this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Rs(a=>0!==a.id),(0,ut.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Yn(a=>{let c=!1,h=!1;return(0,ht.of)(a).pipe((0,oi.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yn(y=>{const w=this.browserUrlTree.toString(),D=!this.navigated||y.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return mo(y.source)&&(this.browserUrlTree=y.extractedUrl),(0,ht.of)(y).pipe(Yn(O=>{const G=this.transitions.getValue();return r.next(new ac(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),G!==this.transitions.getValue()?xs.E:Promise.resolve(O)}),function(n,e,t,r){return Yn(a=>function(n,e,t,r,a){return new vc(n,e,t,r,a).apply()}(n,e,t,a.extractedUrl,r).pipe((0,ut.U)(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,oi.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,r,a){return(0,fr.zg)(c=>function(n,e,t,r,a="emptyOnly",c="legacy"){try{const h=new fw(n,e,t,r,a,c).recognize();return null===h?dy(new _h):(0,ht.of)(h)}catch(h){return dy(h)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,a).pipe((0,ut.U)(h=>Object.assign(Object.assign({},c),{targetSnapshot:h}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,oi.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const G=new A(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(G)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:q,source:ee,restoredState:Te,extras:Pe}=y,rt=new ac(G,this.serializeUrl(q),ee,Te);r.next(rt);const It=Ym(q,this.rootComponentType).snapshot;return(0,ht.of)(Object.assign(Object.assign({},y),{targetSnapshot:It,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,this.browserUrlTree=y.urlAfterRedirects,y.resolve(null),xs.E}),Ie(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.beforePreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,oi.b)(y=>{const w=new M(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),(0,ut.U)(y=>Object.assign(Object.assign({},y),{guards:vp(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,fr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:h}}=t;return 0===h.length&&0===c.length?(0,ht.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,on.D)(n).pipe((0,fr.zg)(a=>function(n,e,t,r,a){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!c||0===c.length)return(0,ht.of)(!0);const h=c.map(y=>{const w=yh(y,e,a);let D;if(function(n){return n&&po(n.canDeactivate)}(w))D=ds(w.canDeactivate(n,e,t,r));else{if(!po(w))throw new Error("Invalid CanDeactivate guard");D=ds(w(n,e,t,r))}return D.pipe(Ho())});return(0,ht.of)(h).pipe(gc())}(a.component,a.route,t,e,r)),Ho(a=>!0!==a,!0))}(h,r,a,n).pipe((0,fr.zg)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,r){return(0,on.D)(e).pipe(vi(a=>ao(function(n,e){return null!==n&&e&&e(new st(n)),(0,ht.of)(!0)}(a.route.parent,r),function(n,e){return null!==n&&e&&e(new At(n)),(0,ht.of)(!0)}(a.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>us(()=>{const y=h.guards.map(w=>{const D=yh(w,h.node,t);let R;if(function(n){return n&&po(n.canActivateChild)}(D))R=ds(D.canActivateChild(r,n));else{if(!po(D))throw new Error("Invalid CanActivateChild guard");R=ds(D(r,n))}return R.pipe(Ho())});return(0,ht.of)(y).pipe(gc())}));return(0,ht.of)(c).pipe(gc())}(n,a.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ht.of)(!0);const a=r.map(c=>us(()=>{const h=yh(c,e,t);let y;if(function(n){return n&&po(n.canActivate)}(h))y=ds(h.canActivate(e,n));else{if(!po(h))throw new Error("Invalid CanActivate guard");y=ds(h(e,n))}return y.pipe(Ho())}));return(0,ht.of)(a).pipe(gc())}(n,a.route,t))),Ho(a=>!0!==a,!0))}(r,c,n,e):(0,ht.of)(y)),(0,ut.U)(y=>Object.assign(Object.assign({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,oi.b)(y=>{if(vu(y.guardsResult)){const D=Os(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw D.url=y.guardsResult,D}const w=new U(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(w)}),Rs(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),Ie(y=>{if(y.guards.canActivateChecks.length)return(0,ht.of)(y).pipe((0,oi.b)(w=>{const D=new Z(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),Yn(w=>{let D=!1;return(0,ht.of)(w).pipe(function(n,e){return(0,fr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,ht.of)(t);let c=0;return(0,on.D)(a).pipe(vi(h=>function(n,e,t,r){return function(n,e,t,r){const a=Object.keys(n);if(0===a.length)return(0,ht.of)({});const c={};return(0,on.D)(a).pipe((0,fr.zg)(h=>function(n,e,t,r){const a=yh(n,e,r);return ds(a.resolve?a.resolve(e,t):a(e,t))}(n[h],e,t,r).pipe((0,oi.b)(y=>{c[h]=y}))),Uo(1),(0,fr.zg)(()=>Object.keys(c).length===a.length?(0,ht.of)(c):xs.E))}(n._resolve,n,e,r).pipe((0,ut.U)(c=>(n._resolvedData=c,n.data=Object.assign(Object.assign({},n.data),sp(n,t).resolve),null)))}(h.route,r,n,e)),(0,oi.b)(()=>c++),Uo(1),(0,fr.zg)(h=>c===a.length?(0,ht.of)(t):xs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,oi.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,oi.b)(w=>{const D=new ie(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),Ie(y=>{const{targetSnapshot:w,id:D,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:G,replaceUrl:q}}=y;return this.hooks.afterPreactivation(w,{navigationId:D,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!G,replaceUrl:!!q})}),(0,ut.U)(y=>{const w=function(n,e,t){const r=hc(n,e._root,t?t._root:void 0);return new Km(r,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return Object.assign(Object.assign({},y),{targetRouterState:w})}),(0,oi.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,ut.U)(r=>(new kv(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,oi.b)({next(){c=!0},complete(){c=!0}}),function(n){return e=>e.lift(new Ei(n))}(()=>{var y;if(!c&&!h){const w=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,w)):this.cancelNavigationTransition(a,w)}(null===(y=this.currentNavigation)||void 0===y?void 0:y.id)===a.id&&(this.currentNavigation=null)}),Sa(y=>{if(h=!0,function(n){return n&&n[zi]}(y)){const w=vu(y.url);w||(this.navigated=!0,this.restoreHistory(a,!0));const D=new pl(a.id,this.serializeUrl(a.extractedUrl),y.message);r.next(D),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),O={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mo(a.source)};this.scheduleNavigation(R,"imperative",null,O,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const w=new I(a.id,this.serializeUrl(a.extractedUrl),y);r.next(w);try{a.resolve(this.errorHandler(y))}catch(D){a.reject(D)}}return xs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:c,urlTree:h}=r,y={replaceUrl:!0};if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(y.state=w)}this.scheduleNavigation(h,a,c,y)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const a=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!a||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Kr(t),this.config=t.map(fh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:a,queryParams:c,fragment:h,queryParamsHandling:y,preserveFragment:w}=r,D=a||this.routerState.root,R=w?this.currentUrlTree.fragment:h;let O=null;switch(y){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,r,a){if(0===t.length)return ty(e.root,e.root,e,r,a);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ch(!0,0,n);let e=0,t=!1;const r=n.reduce((a,c,h)=>{if("object"==typeof c&&null!=c){if(c.outlets){const y={};return Qn(c.outlets,(w,D)=>{y[D]="string"==typeof w?w.split("/"):w}),[...a,{outlets:y}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===h?(c.split("/").forEach((y,w)=>{0==w&&"."===y||(0==w&&""===y?t=!0:".."===y?e++:""!=y&&a.push(y))}),a):[...a,c]},[]);return new ch(t,e,r)}(t);if(c.toRoot())return ty(e.root,new $t([],{}),e,r,a);const h=function(n,e,t){if(n.isAbsolute)return new pc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new pc(c,c===e.root,0)}const r=fc(n.commands[0])?0:1;return function(n,e,t){let r=n,a=e,c=t;for(;c>a;){if(c-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new pc(r,!1,a-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),y=h.processChildren?lh(h.segmentGroup,h.index,c.commands):ny(h.segmentGroup,h.index,c.commands);return ty(h.segmentGroup,y,e,r,a)}(D,this.currentUrlTree,t,O,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const a=vu(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return r}isActive(t,r){let a;if(a=!0===r?Object.assign({},xp):!1===r?Object.assign({},py):r,vu(t))return fu(this.currentUrlTree,t,a);const c=this.parseUrl(t);return fu(this.currentUrlTree,c,a)}removeEmptyProps(t){return Object.keys(t).reduce((r,a)=>{const c=t[a];return null!=c&&(r[a]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ms(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,a,c,h){var y,w;if(this.disposed)return Promise.resolve(!1);const D=this.getTransition(),R=mo(r)&&D&&!mo(D.source),q=(this.lastSuccessfulId===D.id||this.currentNavigation?D.rawUrl:D.urlAfterRedirects).toString()===t.toString();if(R&&q)return Promise.resolve(!0);let ee,Te,Pe;h?(ee=h.resolve,Te=h.reject,Pe=h.promise):Pe=new Promise((_t,Ct)=>{ee=_t,Te=Ct});const rt=++this.navigationId;let It;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),It=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(y=this.browserPageId)&&void 0!==y?y:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):It=0,this.setTransition({id:rt,targetPageId:It,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:ee,reject:Te,promise:Pe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Pe.catch(_t=>Promise.reject(_t))}setBrowserUrl(t,r){const a=this.urlSerializer.serialize(t),c=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(t,r=!1){var a,c;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===h?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const a=new pl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.DyG),p.LFG(th),p.LFG(La),p.LFG(ot),p.LFG(p.zs3),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function mo(n){return"imperative"!==n}let Rp=(()=>{class n{constructor(t,r,a){this.router=t,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new ii.xQ,this.subscription=t.events.subscribe(c=>{c instanceof Ms&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,a,c,h){if(0!==t||r||a||c||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const y={skipLocationChange:bh(this.skipLocationChange),replaceUrl:bh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,y),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:bh(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Mr),p.Y36(dc),p.Y36(he))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&(p.Ikx("href",r.href,p.LSH),p.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[p.TTD]}),n})();function bh(n){return""===n||!!n}let yy=(()=>{class n{constructor(t,r,a,c,h){this.parentContexts=t,this.location=r,this.resolver=a,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.name=c||lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,w=new pw(t,y,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(La),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class pw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===dc?this.route:e===La?this.childContexts:this.parent.get(e,t)}}class Hv{}class Gv{preload(e,t){return(0,ht.of)(null)}}let Mp=(()=>{class n{constructor(t,r,a,c,h){this.router=t,this.injector=c,this.preloadingStrategy=h,this.loader=new qo(r,a,D=>t.triggerEvent(new be(D)),D=>t.triggerEvent(new Ue(D)))}setUpPreloading(){this.subscription=this.router.events.pipe(Rs(t=>t instanceof Ms),vi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const a=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const h=c._loadedConfig;a.push(this.processRoutes(h.module,h.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(t,c)):c.children&&a.push(this.processRoutes(t,c.children));return(0,on.D)(a).pipe((0,os.J)(),(0,ut.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ht.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,fr.zg)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mr),p.LFG(p.v3s),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(Hv))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),wh=(()=>{class n{constructor(t,r,a={}){this.router=t,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ac?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ms&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $n&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $n(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mr),p.LFG(nu),p.LFG(void 0))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const bu=new p.OlP("ROUTER_CONFIGURATION"),qv=new p.OlP("ROUTER_FORROOT_GUARD"),Np=[ot,{provide:th,useClass:tp},{provide:Mr,useFactory:function(n,e,t,r,a,c,h,y={},w,D){const R=new Mr(null,n,e,t,r,a,c,ho(h));return w&&(R.urlHandlingStrategy=w),D&&(R.routeReuseStrategy=D),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(y,R),y.enableTracing&&R.events.subscribe(O=>{var G,q;null===(G=console.group)||void 0===G||G.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(q=console.groupEnd)||void 0===q||q.call(console)}),R},deps:[th,La,ot,p.zs3,p.v3s,p.Sil,Jn,bu,[class{},new p.FiY],[class{},new p.FiY]]},La,{provide:dc,useFactory:function(n){return n.routerState.root},deps:[Mr]},{provide:p.v3s,useClass:p.EAV},Mp,Gv,class{preload(e,t){return t().pipe(Sa(()=>(0,ht.of)(null)))}},{provide:bu,useValue:{enableTracing:!1}}];function mA(){return new p.PXZ("Router",Mr)}let Wv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Np,_y(t),{provide:qv,useFactory:gw,deps:[[Mr,new p.FiY,new p.tp0]]},{provide:bu,useValue:r||{}},{provide:he,useFactory:_A,deps:[ce,[new p.tBr(Me),new p.FiY],bu]},{provide:wh,useFactory:yA,deps:[Mr,nu,bu]},{provide:Hv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Gv},{provide:p.PXZ,multi:!0,useFactory:mA},[Zv,{provide:p.ip1,multi:!0,useFactory:_w,deps:[Zv]},{provide:vw,useFactory:vA,deps:[Zv]},{provide:p.tb,multi:!0,useExisting:vw}]]}}static forChild(t){return{ngModule:n,providers:[_y(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(qv,8),p.LFG(Mr,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function yA(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new wh(n,e,t)}function _A(n,e,t={}){return t.useHash?new We(n,e):new De(n,e)}function gw(n){return"guarded"}function _y(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:Jn,multi:!0,useValue:n}]}let Zv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ii.xQ}appInitializer(){return this.injector.get(F,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(y=>r=y),c=this.injector.get(Mr),h=this.injector.get(bu);return"disabled"===h.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?(0,ht.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),a})}bootstrapListener(t){const r=this.injector.get(bu),a=this.injector.get(Mp),c=this.injector.get(wh),h=this.injector.get(Mr),y=this.injector.get(p.z2F);t===y.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),a.setUpPreloading(),c.init(),h.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function _w(n){return n.appInitializer.bind(n)}function vA(n){return n.bootstrapListener.bind(n)}const vw=new p.OlP("Router Initializer");class Kv{}class Ew{}class wu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const a=t.slice(0,r),c=a.toLowerCase(),h=t.slice(r+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(h):this.headers.set(c,[h])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const a=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(t,a))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof wu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new wu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof wu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...r),this.headers.set(t,a);break;case"d":const c=e.value;if(c){let h=this.headers.get(t);if(!h)return;h=h.filter(y=>-1===c.indexOf(y)),0===h.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,h)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class EA{encodeKey(e){return ww(e)}encodeValue(e){return ww(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const bw=/%(\d[a-f0-9])/gi,wA={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ww(n){return encodeURIComponent(n).replace(bw,(e,t)=>{var r;return null!==(r=wA[t])&&void 0!==r?r:e})}function Iw(n){return`${n}`}class pt{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new EA,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[h,y]=-1==c?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,c)),e.decodeValue(a.slice(c+1))],w=t.get(h)||[];w.push(y),t.set(h,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(c=>{t.push({param:r,value:c,op:"a"})}):t.push({param:r,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new pt({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Iw(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const a=r.indexOf(Iw(e.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Cw{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function yo(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Yv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Dw(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ls{constructor(e,t,r,a){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,c=a):c=r,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new wu),this.context||(this.context=new Cw),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=t;else{const y=t.indexOf("?");this.urlWithParams=t+(-1===y?"?":y<t.length-1?"&":"")+h}}else this.params=new pt,this.urlWithParams=t}serializeBody(){return null===this.body?null:yo(this.body)||Yv(this.body)||Dw(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof pt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dw(this.body)?null:Yv(this.body)?this.body.type||null:yo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,a=e.url||this.url,c=e.responseType||this.responseType,h=void 0!==e.body?e.body:this.body,y=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let D=e.headers||this.headers,R=e.params||this.params;const O=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(D=Object.keys(e.setHeaders).reduce((G,q)=>G.set(q,e.setHeaders[q]),D)),e.setParams&&(R=Object.keys(e.setParams).reduce((G,q)=>G.set(q,e.setParams[q]),R)),new Ls(r,a,h,{params:R,headers:D,context:O,reportProgress:w,responseType:c,withCredentials:y})}}var Xn=(()=>((Xn=Xn||{})[Xn.Sent=0]="Sent",Xn[Xn.UploadProgress=1]="UploadProgress",Xn[Xn.ResponseHeader=2]="ResponseHeader",Xn[Xn.DownloadProgress=3]="DownloadProgress",Xn[Xn.Response=4]="Response",Xn[Xn.User=5]="User",Xn))();class Ey{constructor(e,t=200,r="OK"){this.headers=e.headers||new wu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Op extends Ey{constructor(e={}){super(e),this.type=Xn.ResponseHeader}clone(e={}){return new Op({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jv extends Ey{constructor(e={}){super(e),this.type=Xn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xv extends Ey{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Tw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Wo=(()=>{class n{constructor(t){this.handler=t}request(t,r,a={}){let c;if(t instanceof Ls)c=t;else{let w,D;w=a.headers instanceof wu?a.headers:new wu(a.headers),a.params&&(D=a.params instanceof pt?a.params:new pt({fromObject:a.params})),c=new Ls(t,r,void 0!==a.body?a.body:null,{headers:w,context:a.context,params:D,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const h=(0,ht.of)(c).pipe(vi(w=>this.handler.handle(w)));if(t instanceof Ls||"events"===a.observe)return h;const y=h.pipe(Rs(w=>w instanceof Jv));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return y.pipe((0,ut.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return y.pipe((0,ut.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return y.pipe((0,ut.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return y.pipe((0,ut.U)(w=>w.body))}case"response":return y;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new pt).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,a={}){return this.request("PATCH",t,Tw(a,r))}post(t,r,a={}){return this.request("POST",t,Tw(a,r))}put(t,r,a={}){return this.request("PUT",t,Tw(a,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Kv))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class kp{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Pp=new p.OlP("HTTP_INTERCEPTORS");let eE=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Aw=/^\)\]\}',?\n/;let by=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Sr.y(r=>{const a=this.xhrFactory.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((q,ee)=>a.setRequestHeader(q,ee.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const q=t.detectContentTypeHeader();null!==q&&a.setRequestHeader("Content-Type",q)}if(t.responseType){const q=t.responseType.toLowerCase();a.responseType="json"!==q?q:"text"}const c=t.serializeBody();let h=null;const y=()=>{if(null!==h)return h;const q=1223===a.status?204:a.status,ee=a.statusText||"OK",Te=new wu(a.getAllResponseHeaders()),Pe=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||t.url;return h=new Op({headers:Te,status:q,statusText:ee,url:Pe}),h},w=()=>{let{headers:q,status:ee,statusText:Te,url:Pe}=y(),rt=null;204!==ee&&(rt=void 0===a.response?a.responseText:a.response),0===ee&&(ee=rt?200:0);let It=ee>=200&&ee<300;if("json"===t.responseType&&"string"==typeof rt){const _t=rt;rt=rt.replace(Aw,"");try{rt=""!==rt?JSON.parse(rt):null}catch(Ct){rt=_t,It&&(It=!1,rt={error:Ct,text:rt})}}It?(r.next(new Jv({body:rt,headers:q,status:ee,statusText:Te,url:Pe||void 0})),r.complete()):r.error(new Xv({error:rt,headers:q,status:ee,statusText:Te,url:Pe||void 0}))},D=q=>{const{url:ee}=y(),Te=new Xv({error:q,status:a.status||0,statusText:a.statusText||"Unknown Error",url:ee||void 0});r.error(Te)};let R=!1;const O=q=>{R||(r.next(y()),R=!0);let ee={type:Xn.DownloadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),"text"===t.responseType&&!!a.responseText&&(ee.partialText=a.responseText),r.next(ee)},G=q=>{let ee={type:Xn.UploadProgress,loaded:q.loaded};q.lengthComputable&&(ee.total=q.total),r.next(ee)};return a.addEventListener("load",w),a.addEventListener("error",D),a.addEventListener("timeout",D),a.addEventListener("abort",D),t.reportProgress&&(a.addEventListener("progress",O),null!==c&&a.upload&&a.upload.addEventListener("progress",G)),a.send(c),r.next({type:Xn.Sent}),()=>{a.removeEventListener("error",D),a.removeEventListener("abort",D),a.removeEventListener("load",w),a.removeEventListener("timeout",D),t.reportProgress&&(a.removeEventListener("progress",O),null!==c&&a.upload&&a.upload.removeEventListener("progress",G)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Bi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Sw=new p.OlP("XSRF_COOKIE_NAME"),xw=new p.OlP("XSRF_HEADER_NAME");class AA{}let nM=(()=>{class n{constructor(t,r,a){this.doc=t,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Mt(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(_e),p.LFG(p.Lbi),p.LFG(Sw))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Rw=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const a=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(t);const c=this.tokenService.getToken();return null!==c&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,c)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(AA),p.LFG(xw))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),rM=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Pp,[]);this.chain=r.reduceRight((a,c)=>new kp(a,c),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ew),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),iM=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Rw,useClass:eE}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Sw,useValue:t.cookieName}:[],t.headerName?{provide:xw,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Rw,{provide:Pp,useExisting:Rw,multi:!0},{provide:AA,useClass:nM},{provide:Sw,useValue:"XSRF-TOKEN"},{provide:xw,useValue:"X-XSRF-TOKEN"}]}),n})(),sM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Wo,{provide:Kv,useClass:rM},by,{provide:Ew,useExisting:by}],imports:[[iM.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),Fp=(()=>{class n{constructor(t){this.http=t}isAuthenticated(t){return t?(this.isloggedin=!0,!0):(this.isloggedin=!1,!1)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Wo))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mw=(()=>{class n{constructor(t,r){this.router=t,this.dataservice=r}canActivate(t,r){return!!this.dataservice.isloggedin||this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Mr),p.LFG(Fp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Nw=P(1555);function Lp(n,e){return new Sr.y(t=>{const r=n.length;if(0===r)return void t.complete();const a=new Array(r);let c=0,h=0;for(let y=0;y<r;y++){const w=(0,on.D)(n[y]);let D=!1;t.add(w.subscribe({next:R=>{D||(D=!0,h++),a[y]=R},error:R=>t.error(R),complete:()=>{c++,(c===r||!D)&&(h===r&&t.next(e?e.reduce((R,O,G)=>(R[O]=a[G],R),{}):a),t.complete())}}))}})}let wy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Ml=(()=>{class n extends wy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const ui=new p.OlP("NgValueAccessor"),oM={provide:ui,useExisting:(0,p.Gpc)(()=>Ih),multi:!0},SA=new p.OlP("CompositionEventMode");let Ih=(()=>{class n extends wy{constructor(t,r,a){super(t,r),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(SA,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[p._Bn([oM]),p.qOj]}),n})();function bc(n){return null==n||0===n.length}function Pw(n){return null!=n&&"number"==typeof n.length}const mr=new p.OlP("NgValidators"),Vs=new p.OlP("NgAsyncValidators"),rE=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Nl{static min(e){return function(n){return e=>{if(bc(e.value)||bc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(bc(e.value)||bc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Fw(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return bc(n.value)||rE.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>bc(e.value)||!Pw(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>Pw(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return Zo;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(bc(r.value))return null;const a=r.value;return e.test(a)?null:{pattern:{requiredPattern:t,actualValue:a}}}}(e)}static nullValidator(e){return null}static compose(e){return cE(e)}static composeAsync(e){return Bw(e)}}function Fw(n){return bc(n.value)?{required:!0}:null}function Zo(n){return null}function Lw(n){return null!=n}function aE(n){const e=(0,p.QGY)(n)?(0,on.D)(n):n;return(0,p.CqO)(e),e}function xA(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function uE(n,e){return e.map(t=>t(n))}function Uw(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function cE(n){if(!n)return null;const e=n.filter(Lw);return 0==e.length?null:function(t){return xA(uE(t,e))}}function lE(n){return null!=n?cE(Uw(n)):null}function Bw(n){if(!n)return null;const e=n.filter(Lw);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,so.k)(e))return Lp(e,null);if((0,Nw.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Lp(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Lp(n=1===n.length&&(0,so.k)(n[0])?n[0]:n,null).pipe((0,ut.U)(t=>e(...t)))}return Lp(n,null)}(uE(t,e).map(aE)).pipe((0,ut.U)(xA))}}function Zi(n){return null!=n?Bw(Uw(n)):null}function jw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Hw(n){return n._rawValidators}function RA(n){return n._rawAsyncValidators}function $w(n){return n?Array.isArray(n)?n:[n]:[]}function Vp(n,e){return Array.isArray(n)?n.includes(e):n===e}function MA(n,e){const t=$w(e);return $w(n).forEach(a=>{Vp(t,a)||t.push(a)}),t}function Gw(n,e){return $w(e).filter(t=>!Vp(n,t))}let Dy=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=lE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Zi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n}),n})(),wi=(()=>{class n extends Dy{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();class wc extends Dy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qw{constructor(e){this._cd=e}is(e){var t,r,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===a?void 0:a[e])}}let dE=(()=>{class n extends qw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wc,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[p.qOj]}),n})(),Up=(()=>{class n extends qw{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wi,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[p.qOj]}),n})();function Bp(n,e){Th(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ry(n,e)})}(n,e),function(n,e){const t=(r,a)=>{e.valueAccessor.writeValue(r),a&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ry(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Dh(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ah(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Th(n,e){const t=Hw(n);null!==e.validator?n.setValidators(jw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=RA(n);null!==e.asyncValidator?n.setAsyncValidators(jw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();xy(e._rawValidators,a),xy(e._rawAsyncValidators,a)}function Ah(n,e){let t=!1;if(null!==n){if(null!==e.validator){const a=Hw(n);if(Array.isArray(a)&&a.length>0){const c=a.filter(h=>h!==e.validator);c.length!==a.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const a=RA(n);if(Array.isArray(a)&&a.length>0){const c=a.filter(h=>h!==e.asyncValidator);c.length!==a.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return xy(e._rawValidators,r),xy(e._rawAsyncValidators,r),t}function Ry(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jp(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Us="VALID",kl="INVALID",Sh="PENDING",Hp="DISABLED";function Ic(n){return(yE(n)?n.validators:n)||null}function mE(n){return Array.isArray(n)?lE(n):n||null}function Pl(n,e){return(yE(e)?e.asyncValidators:n)||null}function xh(n){return Array.isArray(n)?Zi(n):n||null}function yE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $p{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=mE(this._rawValidators),this._composedAsyncValidatorFn=xh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Us}get invalid(){return this.status===kl}get pending(){return this.status==Sh}get disabled(){return this.status===Hp}get enabled(){return this.status!==Hp}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=mE(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=xh(e)}addValidators(e){this.setValidators(MA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Gw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Gw(e,this._rawAsyncValidators))}hasValidator(e){return Vp(this._rawValidators,e)}hasAsyncValidator(e){return Vp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Sh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hp,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Us,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Us||this.status===Sh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hp:Us}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Sh,this._hasOwnPendingAsyncValidator=!0;const t=aE(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(a=>{r=r instanceof Gp?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof Ny&&r.at(a)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Hp:this.errors?kl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sh)?Sh:this._anyControlsHaveStatus(kl)?kl:Us}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fl extends $p{constructor(e=null,t,r){super(Ic(t),Pl(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Gp extends $p{constructor(e,t,r){super(Ic(t),Pl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Fl?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((a,c)=>{r=t(r,a,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Ny extends $p{constructor(e,t,r){super(Ic(t),Pl(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,a)=>{r.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Fl?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Oy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const tI={provide:ui,useExisting:(0,p.Gpc)(()=>In),multi:!0};let In=(()=>{class n extends Ml{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[p._Bn([tI]),p.qOj]}),n})(),Va=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const wE=new p.OlP("NgModelWithFormControlWarning"),iI={provide:wi,useExisting:(0,p.Gpc)(()=>Mh)};let Mh=(()=>{class n extends wi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ah(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Bp(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Dh(t.control||null,t,!1),jp(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,a=this.form.get(t.path);r!==a&&(Dh(r||null,t),a instanceof Fl&&(Bp(a,t),t.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){Th(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Ah(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Th(this.form,this),this._oldForm&&Ah(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(mr,10),p.Y36(Vs,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([iI]),p.qOj,p.TTD]}),n})();const sI={provide:wc,useExisting:(0,p.Gpc)(()=>Kp)};let Kp=(()=>{class n extends wc{constructor(t,r,a,c,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,r,a;return Array.isArray(e),e.forEach(c=>{c.constructor===Ih?t=c:function(n){return Object.getPrototypeOf(n.constructor)===Ml}(c)?r=c:a=c}),a||r||t||null}(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(wi,13),p.Y36(mr,10),p.Y36(Vs,10),p.Y36(ui,10),p.Y36(wE,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([sI]),p.qOj,p.TTD]}),n._ngModelWarningSentOnce=!1,n})();const oI={provide:ui,useExisting:(0,p.Gpc)(()=>TE),multi:!0};function aI(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let TE=(()=>{class n extends Ml{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const a=aI(r,t);this.setProperty("value",a)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([oI]),p.qOj]}),n})(),uI=(()=>{class n{constructor(t,r,a){this._element=t,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(aI(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(TE,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const cI={provide:ui,useExisting:(0,p.Gpc)(()=>AE),multi:!0};function zA(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let AE=(()=>{class n extends Ml{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const a=t.map(c=>this._getOptionId(c));r=(c,h)=>{c._setSelected(a.indexOf(h.toString())>-1)}}else r=(a,c)=>{a._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const a=[];if(void 0!==r.selectedOptions){const c=r.selectedOptions;for(let h=0;h<c.length;h++){const y=c.item(h),w=this._getOptionValue(y.value);a.push(w)}}else{const c=r.options;for(let h=0;h<c.length;h++){const y=c.item(h);if(y.selected){const w=this._getOptionValue(y.value);a.push(w)}}}this.value=a,t(a)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&p.NdJ("change",function(c){return r.onChange(c.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[p._Bn([cI]),p.qOj]}),n})(),WA=(()=>{class n{constructor(t,r,a){this._element=t,this._renderer=r,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(zA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(zA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(AE,9))},n.\u0275dir=p.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Ko={provide:mr,useExisting:(0,p.Gpc)(()=>Fy),multi:!0};let Fy=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Fw(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[p._Bn([Ko])]}),n})(),yI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Va]]}),n})(),_I=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:wE,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[yI]}),n})(),Yp=(()=>{class n{group(t,r=null){const a=this._reduceControls(t);let y,c=null,h=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(c=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,y=null!=r.updateOn?r.updateOn:void 0):(c=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new Gp(a,{asyncValidators:h,updateOn:y,validators:c})}control(t,r,a){return new Fl(t,r,a)}array(t,r,a){const c=t.map(h=>this._createControl(h));return new Ny(c,r,a)}_reduceControls(t){const r={};return Object.keys(t).forEach(a=>{r[a]=this._createControl(t[a])}),r}_createControl(t){return t instanceof Fl||t instanceof Gp||t instanceof Ny?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,p.Yz7)({factory:function(){return new n},token:n,providedIn:_I}),n})(),vI=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-home"]],decls:17,vars:0,consts:[[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"navbar-brand","fs-3","fw-bold",2,"color","white","margin-left","10px","padding","20px"],[1,"d-flex"],["routerLink","login"],["type","submit",1,"logout"],[1,"container"],[1,"log"],["routerLink","logtime"],["type","button","data-bs-toggle","tooltip","data-bs-placement","bottom","title","Logtime",1,"btn","btn-secondary","log-btn"],[1,"history"],["routerLink","showhistory"],["type","button","data-bs-toggle","tooltip","data-bs-placement","bottom","title","showhistory",1,"btn","btn-secondary","history-btn"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0),p.TgZ(1,"div",1),p.TgZ(2,"a",2),p._uU(3,"TimeSheet Application"),p.qZA(),p.TgZ(4,"form",3),p.TgZ(5,"a",4),p.TgZ(6,"button",5),p._uU(7,"Logout"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(8,"div",6),p.TgZ(9,"div",7),p.TgZ(10,"a",8),p.TgZ(11,"button",9),p._uU(12,"LogTime"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(13,"div",10),p.TgZ(14,"a",11),p.TgZ(15,"button",12),p._uU(16,"Show History"),p.qZA(),p.qZA(),p.qZA(),p.qZA())},directives:[Oy,Up,Rp],styles:[".container-fluid[_ngcontent-%COMP%]{margin-left:10px;background-color:#0000d399}.container[_ngcontent-%COMP%]{height:700px;display:flex;justify-content:center;align-items:center}.log-btn[_ngcontent-%COMP%], .history-btn[_ngcontent-%COMP%]{width:120px;height:50px}.logout[_ngcontent-%COMP%]{background-color:#fff;color:#000;border-radius:10px;padding:10px 20px;border:none}.logout[_ngcontent-%COMP%]:hover{background-color:#f08080;color:#fff;border:none}.log[_ngcontent-%COMP%]{margin-right:10px}"]}),n})(),Yo=(()=>{class n{constructor(){this.userdata=[]}pushdata(t){this.userdata.push(t)}retrievedata(){return this.userdata}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Jp=P(3637),Ii=P(5179);function NE(){return n=>n.lift(new OE)}class OE{call(e,t){return t.subscribe(new Ua(e))}}class Ua extends Ar.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class Ci{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ll(e,this.compare,this.keySelector))}}class Ll extends Ar.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}var Je,fs=P(8939),kE=(P(8241),P(3394)),fe=P(8239),_o=P(8026),Cu=P(3910),Bs=P(5422),Zt=P(3854),Nh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ps={},Cc=Cc||{},kt=Nh||self;function eg(){}function tg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Oh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ly="closure_uid_"+(1e9*Math.random()>>>0),bI=0;function wI(n,e,t){return n.call.apply(n.bind,arguments)}function II(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Di(n,e,t){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wI:II).apply(null,arguments)}function ng(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,a,c){for(var h=Array(arguments.length-2),y=2;y<arguments.length;y++)h[y-2]=arguments[y];return e.prototype[a].apply(r,h)}}function Du(){this.s=this.s,this.o=this.o}var XA={};Du.prototype.s=!1,Du.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Ly)&&n[Ly]||(n[Ly]=++bI)}(this);delete XA[n]}},Du.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function PE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function FE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tg(r)){const a=n.length||0,c=r.length||0;n.length=a+c;for(let h=0;h<c;h++)n[a+h]=r[h]}else n.push(r)}}function Ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ti.prototype.h=function(){this.defaultPrevented=!0};var DI=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",eg,e),kt.removeEventListener("test",eg,e)}catch(t){}return n}();function Vy(n){return/^[\s\xa0]*$/.test(n)}var TI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function AI(n,e){return n<e?-1:n>e?1:0}function Uy(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function Jo(n){return-1!=Uy().indexOf(n)}function SI(n){return SI[" "](n),n}SI[" "]=eg;var jy,n,IM=Jo("Opera"),kh=Jo("Trident")||Jo("MSIE"),tS=Jo("Edge"),LE=tS||kh,xI=Jo("Gecko")&&!(-1!=Uy().toLowerCase().indexOf("webkit")&&!Jo("Edge"))&&!(Jo("Trident")||Jo("MSIE"))&&!Jo("Edge"),VE=-1!=Uy().toLowerCase().indexOf("webkit")&&!Jo("Edge");function By(){var n=kt.document;return n?n.documentMode:void 0}e:{var RI="",MI=(n=Uy(),xI?/rv:([^\);]+)(\)|;)/.exec(n):tS?/Edge\/([\d\.]+)/.exec(n):kh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VE?/WebKit\/(\S+)/.exec(n):IM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(MI&&(RI=MI?MI[1]:""),kh){var NI=By();if(null!=NI&&NI>parseFloat(RI)){jy=String(NI);break e}}jy=RI}var nS={};function OI(){return e=nS,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=TI(String(jy)).split("."),t=TI("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var a=e[h]||"",c=t[h]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=AI(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||AI(0==a[2].length,0==c[2].length)||AI(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n}();var e}var Ph=kt.document&&kh&&(By()||parseInt(jy,10))||void 0;function rg(n,e){if(Ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xI){e:{try{SI(e.nodeName);var a=!0;break e}catch(c){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:FI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rg.X.h.call(this)}}ci(rg,Ti);var FI={2:"touch",3:"pen",4:"mouse"};rg.prototype.h=function(){rg.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ig="closure_listenable_"+(1e6*Math.random()|0),LI=0;function Hy(n,e,t,r,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=a,this.key=++LI,this.ba=this.ea=!1}function $y(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Gy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function VI(n){const e={};for(const t in n)e[t]=n[t];return e}const UI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BI(n,e){let t,r;for(let a=1;a<arguments.length;a++){for(t in r=arguments[a],r)n[t]=r[t];for(let c=0;c<UI.length;c++)t=UI[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qy(n){this.src=n,this.g={},this.h=0}function UE(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],a=eS(r,e);(c=0<=a)&&Array.prototype.splice.call(r,a,1),c&&($y(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zy(n,e,t,r){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==r)return a}return-1}qy.prototype.add=function(n,e,t,r,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var h=zy(n,e,r,a);return-1<h?(e=n[h],t||(e.ea=!1)):((e=new Hy(e,this.src,c,!!r,a)).ea=t,n.push(e)),e};var BE="closure_lm_"+(1e6*Math.random()|0),Wy={};function jE(n,e,t,r,a){if(r&&r.once)return Ky(n,e,t,r,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)jE(n,e[c],t,r,a);return null}return t=HE(t),n&&n[ig]?n.N(e,t,Oh(r)?!!r.capture:!!r,a):Zy(n,e,t,!1,r,a)}function Zy(n,e,t,r,a,c){if(!e)throw Error("Invalid event type");var h=Oh(a)?!!a.capture:!!a,y=sg(n);if(y||(n[BE]=y=new qy(n)),(t=y.add(e,t,r,h,c)).proxy)return t;if(r=function(){const e=rS;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)DI||(a=h),void 0===a&&(a=!1),n.addEventListener(e.toString(),r,a);else if(n.attachEvent)n.attachEvent(Fh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ky(n,e,t,r,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ky(n,e[c],t,r,a);return null}return t=HE(t),n&&n[ig]?n.O(e,t,Oh(r)?!!r.capture:!!r,a):Zy(n,e,t,!0,r,a)}function jI(n,e,t,r,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)jI(n,e[c],t,r,a);else r=Oh(r)?!!r.capture:!!r,t=HE(t),n&&n[ig]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zy(c=n.g[e],t,r,a))&&($y(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=sg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zy(e,t,r,a)),(t=-1<n?e[n]:null)&&HI(t))}function HI(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ig])UE(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sg(e))?(UE(t,n),0==t.h&&(t.src=null,e[BE]=null)):$y(n)}}}function Fh(n){return n in Wy?Wy[n]:Wy[n]="on"+n}function rS(n,e){if(n.ba)n=!0;else{e=new rg(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&HI(n),n=t.call(r,e)}return n}function sg(n){return(n=n[BE])instanceof qy?n:null}var og="__closure_events_fn_"+(1e9*Math.random()>>>0);function HE(n){return"function"==typeof n?n:(n[og]||(n[og]=function(e){return n.handleEvent(e)}),n[og])}function yr(){Du.call(this),this.i=new qy(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ti(e,n);else if(e instanceof Ti)e.target=e.target||n;else{var a=e;BI(e=new Ti(r,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var h=e.g=t[c];a=ag(h,r,!0,e)&&a}if(a=ag(h=e.g=n,r,!0,e)&&a,a=ag(h,r,!1,e)&&a,t)for(c=0;c<t.length;c++)a=ag(h=e.g=t[c],r,!1,e)&&a}function ag(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.ba&&h.capture==t){var y=h.listener,w=h.ha||h.src;h.ea&&UE(n.i,h),a=!1!==y.call(w,r)&&a}}return a&&!r.defaultPrevented}ci(yr,Du),yr.prototype[ig]=!0,yr.prototype.removeEventListener=function(n,e,t,r){jI(this,n,e,t,r)},yr.prototype.M=function(){if(yr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$y(t[r]);delete n.g[e],n.h--}}this.I=null},yr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $I=kt.JSON.stringify;function iS(){var n=qE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Qy,$E=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new sS,n=>n.reset());class sS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qI(n){kt.setTimeout(()=>{throw n},0)}function Yy(n,e){Qy||function(){var n=kt.Promise.resolve(void 0);Qy=function(){n.then(oS)}}(),ug||(Qy(),ug=!0),qE.add(n,e)}var ug=!1,qE=new class{constructor(){this.h=this.g=null}add(e,t){const r=$E.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function oS(){for(var n;n=iS();){try{n.h.call(n.g)}catch(t){qI(t)}var e=$E;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ug=!1}function cg(n,e){yr.call(this),this.h=n||1,this.g=e||kt,this.j=Di(this.lb,this),this.l=Date.now()}function Jy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function lg(n,e,t){if("function"==typeof n)t&&(n=Di(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Di(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function zE(n){n.g=lg(()=>{n.g=null,n.i&&(n.i=!1,zE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(cg,yr),(Je=cg.prototype).ca=!1,Je.R=null,Je.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nr(this,"tick"),this.ca&&(Jy(this),this.start()))}},Je.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){cg.X.M.call(this),Jy(this),delete this.g};class aS extends Du{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zE(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dg(n){Du.call(this),this.h=n,this.g={}}ci(dg,Du);var zI=[];function WE(n,e,t,r){Array.isArray(t)||(t&&(zI[0]=t.toString()),t=zI);for(var a=0;a<t.length;a++){var c=jE(e,t[a],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function Xy(n){Gy(n.g,function(e,t){this.g.hasOwnProperty(t)&&HI(e)},n),n.g={}}function hg(){this.g=!0}function Vl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var h=1;h<a.length;h++)a[h]=""}}}return $I(t)}catch(y){return e}}(n,t)+(r?" "+r:"")})}dg.prototype.M=function(){dg.X.M.call(this),Xy(this)},dg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hg.prototype.Aa=function(){this.g=!1},hg.prototype.info=function(){};var Dc={},ZE=null;function KE(){return ZE=ZE||new yr}function QI(n){Ti.call(this,Dc.Pa,n)}function fg(n){const e=KE();Nr(e,new QI(e,n))}function YE(n,e){Ti.call(this,Dc.STAT_EVENT,n),this.stat=e}function Ki(n){const e=KE();Nr(e,new YE(e,n))}function _r(n,e){Ti.call(this,Dc.Qa,n),this.size=e}function Lh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Dc.Pa="serverreachability",ci(QI,Ti),Dc.STAT_EVENT="statevent",ci(YE,Ti),Dc.Qa="timingevent",ci(_r,Ti);var e_={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},JI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function t_(){}function QE(){}t_.prototype.h=null;var XE,Vh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Tc(){Ti.call(this,"d")}function JE(){Ti.call(this,"c")}function pg(){}function gg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new dg(this),this.O=DM,this.T=new cg(n=LE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new e0}function e0(){this.i=null,this.g="",this.h=!1}ci(Tc,Ti),ci(JE,Ti),ci(pg,t_),pg.prototype.g=function(){return new XMLHttpRequest},pg.prototype.i=function(){return{}},XE=new pg;var DM=45e3,n_={},Uh={};function vo(n,e,t){n.K=1,n.v=vg(Ba(e)),n.s=t,n.P=!0,eC(n,null)}function eC(n,e){n.F=Date.now(),Yi(n),n.A=Ba(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),hC(t.i,"t",r),n.C=0,t=n.l.H,n.h=new e0,n.g=DC(n.l,t?e:null,!n.s),0<n.N&&(n.L=new aS(Di(n.La,n,n.g),n.N)),WE(n.S,n.g,"readystatechange",n.ib),e=n.H?VI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),fg(1),function(n,e,t,r,a,c){n.info(function(){if(n.g)if(c)for(var h="",y=c.split("&"),w=0;w<y.length;w++){var D=y[w].split("=");if(1<D.length){var R=D[0];D=D[1];var O=R.split("_");h=2<=O.length&&"type"==O[1]?h+(R+"=")+D+"&":h+(R+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.U,n.s)}function tC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Xo(n,e,t){let a,r=!0;for(;!n.I&&n.C<t.length;){if(a=ea(n,t),a==Uh){4==e&&(n.o=4,Ki(14),r=!1),Vl(n.j,n.m,null,"[Incomplete Response]");break}if(a==n_){n.o=4,Ki(15),Vl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vl(n.j,n.m,a,null),n0(n,a)}tC(n)&&a!=Uh&&a!=n_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),u_(e),e.K=!0,Ki(11))):(Vl(n.j,n.m,t,"[Invalid Chunked Response]"),Ul(n),yg(n))}function ea(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Uh:(t=Number(e.substring(t,r)),isNaN(t)?n_:(r+=1)+t>e.length?Uh:(e=e.substr(r,t),n.C=r+t,e))}function Yi(n){n.V=Date.now()+n.O,t0(n,n.O)}function t0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Lh(Di(n.gb,n),e)}function mg(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function yg(n){0==n.l.G||n.I||g0(n.l,n)}function Ul(n){mg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Jy(n.T),Xy(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function n0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||o0(t.h,n)))if(!n.J&&o0(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(t.u)t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Lh(Di(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ig(t),zl(t)}f0(t),Ki(18)}if(1>=gC(t.h)&&t.ja){try{t.ja()}catch(D){}t.ja=void 0}}else Zl(t,11)}else if((n.J||t.g==n)&&Ig(t),!Vy(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let D=a[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const R=D[3];null!=R&&(t.ma=R,t.j.info("VER="+t.ma));const O=D[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const G=D[5];null!=G&&"number"==typeof G&&0<G&&(t.J=r=1.5*G,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ee=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ee){var c=r.h;c.g||-1==ee.indexOf("spdy")&&-1==ee.indexOf("quic")&&-1==ee.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(a0(c,c.h),c.h=null))}if(r.D){const Te=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Te&&(r.za=Te,xn(r.F,r.D,Te))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var h=n;if((r=t).sa=Wh(r,r.H?r.ka:null,r.V),h.J){mC(r.h,h);var y=h,w=r.J;w&&y.setTimeout(w),y.B&&(mg(y),Yi(y)),r.g=h}else a_(r);0<t.i.length&&Wl(t)}else"stop"!=D[0]&&"close"!=D[0]||Zl(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Zl(t,7):d0(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}fg(4)}catch(D){}}function Bh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(tg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),a=r.length,c=0;c<a;c++)e.call(void 0,r[c],t&&t[c],n)}(Je=gg.prototype).setTimeout=function(n){this.O=n},Je.ib=function(n){n=n.target;const e=this.L;e&&3==ja(n)?e.l():this.La(n)},Je.La=function(n){try{if(n==this.g)e:{const R=ja(this.g);var e=this.g.Ea();const O=this.g.aa();if(!(3>R)&&(3!=R||LE||this.g&&(this.h.h||this.g.fa()||l0(this.g)))){this.I||4!=R||7==e||fg(8==e||0>=O?3:2),mg(this);var t=this.g.aa();this.Y=t;t:if(tC(this)){var r=l0(this.g);n="";var a=r.length,c=4==ja(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ul(this),yg(this);var h="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==a-1});r.splice(0,a),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.fa();if(this.i=200==t,function(n,e,t,r,a,c,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+h})}(this.j,this.u,this.A,this.m,this.U,R,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,w=this.g;if((y=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vy(y)){var D=y;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ki(12),Ul(this),yg(this);break e}Vl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,n0(this,t)}this.P?(Xo(this,R,h),LE&&this.i&&3==R&&(WE(this.S,this.T,"tick",this.hb),this.T.start())):(Vl(this.j,this.m,h,null),n0(this,h)),4==R&&Ul(this),this.i&&!this.I&&(4==R?g0(this.l,this):(this.i=!1,Yi(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),Ul(this),yg(this)}}}catch(R){}},Je.hb=function(){if(this.g){var n=ja(this.g),e=this.g.fa();this.C<e.length&&(mg(this),Xo(this,n,e),this.i&&4!=n&&Yi(this))}},Je.cancel=function(){this.I=!0,Ul(this)},Je.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fg(3),Ki(17)),Ul(this),this.o=2,yg(this)):t0(this,this.V-n)};var nC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Bl){this.h=void 0!==e?e:n.h,_g(this,n.j),this.s=n.s,this.g=n.g,jl(this,n.m),this.l=n.l,e=n.i;var t=new jh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),iC(this,t),this.o=n.o}else n&&(t=String(n).match(nC))?(this.h=!!e,_g(this,t[1]||"",!0),this.s=Hl(t[2]||""),this.g=Hl(t[3]||"",!0),jl(this,t[4]),this.l=Hl(t[5]||"",!0),iC(this,t[6]||"",!0),this.o=Hl(t[7]||"")):(this.h=!!e,this.i=new jh(null,this.h))}function Ba(n){return new Bl(n)}function _g(n,e,t){n.j=t?Hl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iC(n,e,t){e instanceof jh?(n.i=e,function(n,e){e&&!n.j&&(Tu(n),n.i=null,n.g.forEach(function(t,r){var a=r.toLowerCase();r!=a&&(lC(this,r),hC(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=$l(e,uC)),n.i=new jh(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function vg(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $l(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bl.prototype.toString=function(){var n=[],e=this.j;e&&n.push($l(e,s0,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push($l(e,s0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push($l(t,"/"==t.charAt(0)?aC:oC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",$l(t,cC)),n.join("")};var s0=/[#\/\?@]/g,oC=/[#\?:]/g,aC=/[#\?]/g,uC=/[#\?@]/g,cC=/#/g;function jh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Tu(n){n.g||(n.g=new Map,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),a=null;if(0<=r){var c=n[t].substring(0,r);a=n[t].substring(r+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lC(n,e){Tu(n),e=Hh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function dC(n,e){return Tu(n),e=Hh(n,e),n.g.has(e)}function hC(n,e,t){lC(n,e),0<t.length&&(n.i=null,n.g.set(Hh(n,e),PE(t)),n.h+=t.length)}function Hh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fC(n){this.l=n||dS,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ga&&kt.g.Ga()&&kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=jh.prototype).add=function(n,e){Tu(this),this.i=null,n=Hh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Tu(this),this.g.forEach(function(t,r){t.forEach(function(a){n.call(e,a,r,this)},this)},this)},Je.oa=function(){Tu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const a=n[r];for(let c=0;c<a.length;c++)t.push(e[r])}return t},Je.W=function(n){Tu(this);let e=[];if("string"==typeof n)dC(this,n)&&(e=e.concat(this.g.get(Hh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Je.set=function(n,e){return Tu(this),this.i=null,dC(this,n=Hh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const c=encodeURIComponent(String(r)),h=this.W(r);for(r=0;r<h.length;r++){var a=c;""!==h[r]&&(a+="="+encodeURIComponent(String(h[r]))),n.push(a)}}return this.i=n.join("&")};var dS=10;function pC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gC(n){return n.h?1:n.g?n.g.size:0}function o0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function a0(n,e){n.g?n.g.add(e):n.h=e}function mC(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function yC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return PE(n.i)}function u0(){}function hS(){this.g=new u0}function fS(n,e,t){const r=t||"";try{Bh(n,function(a,c){let h=a;Oh(a)&&(h=$I(a)),e.push(r+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(r+"type="+encodeURIComponent("_badmap")),a}}function Eg(n,e,t,r,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(r)}catch(c){}}function $h(n){this.l=n.ac||null,this.j=n.jb||!1}function bg(n,e){yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=r_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fC.prototype.cancel=function(){if(this.i=yC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},u0.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},u0.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},ci($h,t_),$h.prototype.g=function(){return new bg(this.l,this.j)},$h.prototype.i=function(n){return function(){return n}}({}),ci(bg,yr);var r_=0;function c0(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Gh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qh(n)}function qh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=bg.prototype).open=function(n,e){if(this.readyState!=r_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qh(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gh(this)),this.readyState=r_},Je.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qh(this)),this.g&&(this.readyState=3,qh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;c0(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Je.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Gh(this):qh(this),3==this.readyState&&c0(this)}},Je.Va=function(n){this.g&&(this.response=this.responseText=n,Gh(this))},Je.Ua=function(n){this.g&&(this.response=n,Gh(this))},Je.ga=function(){this.g&&Gh(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(bg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _C=kt.JSON.parse;function Gn(n){yr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=i_,this.K=this.L=!1}ci(Gn,yr);var i_="",vC=/^https?$/i,Gl=["POST","PUT"];function EC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ql(n),zh(n)}function ql(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function mS(n){if(n.h&&void 0!==Cc&&(!n.C[1]||4!=ja(n)||2!=n.aa()))if(n.v&&4==ja(n))lg(n.Ha,0,n);else if(Nr(n,"readystatechange"),4==ja(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===y){var a=String(n.H).match(nC)[1]||null;if(!a&&kt.self&&kt.self.location){var c=kt.self.location.protocol;a=c.substr(0,c.length-1)}r=!vC.test(a?a.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var h=2<ja(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.aa()+"]",ql(n)}}finally{zh(n)}}}function zh(n,e){if(n.g){yS(n);const t=n.g,r=n.C[0]?eg:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch(a){}}}function yS(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function ja(n){return n.g?n.g.readyState:0}function l0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case i_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _S(n){let e="";return Gy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dt(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_S(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function wg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function bC(n){this.Ca=0,this.i=[],this.j=new hg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wg("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wg("baseRetryDelayMs",5e3,n),this.bb=wg("retryDelaySeedMs",1e4,n),this.$a=wg("forwardChannelMaxRetries",2,n),this.ta=wg("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new fC(n&&n.concurrentRequestLimit),this.Fa=new hS,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function d0(n){if(wC(n),3==n.G){var e=n.U++,t=Ba(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),o_(n,t),(e=new gg(n,n.j,e,void 0)).K=2,e.v=vg(Ba(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=DC(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yi(e)}CC(n)}function zl(n){n.g&&(u_(n),n.g.cancel(),n.g=null)}function wC(n){zl(n),n.u&&(kt.clearTimeout(n.u),n.u=null),Ig(n),n.h.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Wl(n){pC(n.h)||n.m||(n.m=!0,Yy(n.Ja,n),n.C=0)}function qn(n,e){var t;t=e?e.m:n.U++;const r=Ba(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),o_(n,r),n.o&&n.s&&dt(r,n.o,n.s),t=new gg(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=h0(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),a0(n.h,t),vo(t,r,e)}function o_(n,e){n.ia&&Gy(n.ia,function(t,r){xn(e,r,t)}),n.l&&Bh({},function(t,r){xn(e,r,t)})}function h0(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Di(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const h=["count="+t];-1==c?0<t?(c=a[0].h,h.push("ofs="+c)):c=0:h.push("ofs="+c);let y=!0;for(let w=0;w<t;w++){let D=a[w].h;const R=a[w].g;if(D-=c,0>D)c=Math.max(0,a[w].h-100),y=!1;else try{fS(R,h,"req"+D+"_")}catch(O){r&&r(R)}}if(y){r=h.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function a_(n){n.g||n.u||(n.Z=1,Yy(n.Ia,n),n.A=0)}function f0(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Lh(Di(n.Ia,n),IC(n,n.A)),n.A++,0))}function u_(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function p0(n){n.g=new gg(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ba(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),o_(n,e),n.o&&n.s&&dt(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=vg(Ba(e)),t.s=null,t.P=!0,eC(t,n)}function Ig(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function g0(n,e){var t=null;if(n.g==e){Ig(n),u_(n),n.g=null;var r=2}else{if(!o0(n.h,e))return;t=e.D,mC(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Nr(r=KE(),new _r(r,t,e,a)),Wl(n)}else a_(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==r&&function(n,e){return!(gC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Lh(Di(n.Ja,n,e),IC(n,n.C)),n.C++,0)))}(n,e)||2==r&&f0(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:Zl(n,5);break;case 4:Zl(n,10);break;case 3:Zl(n,6);break;default:Zl(n,2)}}function IC(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Zl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Di(n.kb,n);t||(t=new Bl("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||_g(t,"https"),vg(t)),function(n,e){const t=new hg;if(kt.Image){const r=new Image;r.onload=ng(Eg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ng(Eg,t,r,"TestLoadImage: error",!1,e),r.onabort=ng(Eg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ng(Eg,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.G=0,n.l&&n.l.va(e),CC(n),wC(n)}function CC(n){if(n.G=0,n.la=[],n.l){const e=yC(n.h);(0!=e.length||0!=n.i.length)&&(FE(n.la,e),FE(n.la,n.i),n.h.i.length=0,PE(n.i),n.i.length=0),n.l.ua()}}function Wh(n,e,t){var r=t instanceof Bl?Ba(t):new Bl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),jl(r,r.m);else{var a=kt.location;r=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new Bl(null,void 0);r&&_g(c,r),e&&(c.g=e),a&&jl(c,a),t&&(c.l=t),r=c}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),o_(n,r),r}function DC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gn(t&&n.Da&&!n.ra?new $h({jb:!0}):n.ra)).Ka(n.H),e}function TC(){}function c_(){if(kh&&!(10<=Number(Ph)))throw Error("Environmental error: no available transport.")}function Ai(n,e){yr.call(this),this.g=new bC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Kl(this)}function m0(n){Tc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function y0(){JE.call(this),this.status=1}function Kl(n){this.g=n}(Je=Gn.prototype).Ka=function(n){this.L=n},Je.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():XE.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:XE),this.g.onreadystatechange=Di(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void EC(this,c)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)t.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const c of r.keys())t.set(c,r.get(c))}r=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=kt.FormData&&n instanceof kt.FormData,!(0<=eS(Gl,e))||r||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of t)this.g.setRequestHeader(c,h);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yS(this),0<this.B&&((this.K=function(n){return kh&&OI()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.qa,this)):this.A=lg(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){EC(this,c)}},Je.qa=function(){void 0!==Cc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),zh(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zh(this,!0)),Gn.X.M.call(this)},Je.Ha=function(){this.s||(this.F||this.v||this.l?mS(this):this.fb())},Je.fb=function(){mS(this)},Je.aa=function(){try{return 2<ja(this)?this.g.status:-1}catch(n){return-1}},Je.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_C(e)}},Je.Ea=function(){return this.m},Je.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=bC.prototype).ma=8,Je.G=1,Je.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new gg(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=VI(c),BI(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=h0(this,a,e),xn(t=Ba(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),o_(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(_S(c)))+"&"+e:this.o&&dt(t,this.o,c)),a0(this.h,a),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),a.Z=!0,vo(a,t,null)):vo(a,t,e),this.G=2}}else 3==this.G&&(n?qn(this,n):0==this.i.length||pC(this.h)||qn(this))},Je.Ia=function(){if(this.u=null,p0(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Lh(Di(this.eb,this),n)}},Je.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ki(10),zl(this),p0(this))},Je.cb=function(){null!=this.v&&(this.v=null,zl(this),f0(this),Ki(19))},Je.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ki(2)):(this.j.info("Failed to ping google.com"),Ki(1))},(Je=TC.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Ra=function(){},c_.prototype.g=function(n,e){return new Ai(n,e)},ci(Ai,yr),Ai.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ki(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Wh(n,null,n.V),Wl(n)},Ai.prototype.close=function(){d0(this.g)},Ai.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$I(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Wl(e)},Ai.prototype.M=function(){this.g.l=null,delete this.j,d0(this.g),delete this.g,Ai.X.M.call(this)},ci(m0,Tc),ci(y0,JE),ci(Kl,TC),Kl.prototype.xa=function(){Nr(this.g,"a")},Kl.prototype.wa=function(n){Nr(this.g,new m0(n))},Kl.prototype.va=function(n){Nr(this.g,new y0(n))},Kl.prototype.ua=function(){Nr(this.g,"b")},c_.prototype.createWebChannel=c_.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,e_.NO_ERROR=0,e_.TIMEOUT=8,e_.HTTP_ERROR=6,JI.COMPLETE="complete",QE.EventType=Vh,Vh.OPEN="a",Vh.CLOSE="b",Vh.ERROR="c",Vh.MESSAGE="d",yr.prototype.listen=yr.prototype.N,Gn.prototype.listenOnce=Gn.prototype.O,Gn.prototype.getLastError=Gn.prototype.Oa,Gn.prototype.getLastErrorCode=Gn.prototype.Ea,Gn.prototype.getStatus=Gn.prototype.aa,Gn.prototype.getResponseJson=Gn.prototype.Sa,Gn.prototype.getResponseText=Gn.prototype.fa,Gn.prototype.send=Gn.prototype.da,Gn.prototype.setWithCredentials=Gn.prototype.Ka;var vS=ps.createWebChannelTransport=function(){return new c_},Cg=ps.getStatEventTarget=function(){return KE()},Yl=ps.ErrorCode=e_,ES=ps.EventType=JI,bS=ps.Event=Dc,AC=ps.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},SC=ps.FetchXmlHttpFactory=$h,Dg=ps.WebChannel=QE,xC=ps.XhrIo=Gn;const RC="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let Zh="9.12.1";const Ac=new Bs.Yd("@firebase/firestore");function MC(){return Ac.logLevel}function ke(n,...e){if(Ac.logLevel<=Bs.in.DEBUG){const t=e.map(Kh);Ac.debug(`Firestore (${Zh}): ${n}`,...t)}}function vr(n,...e){if(Ac.logLevel<=Bs.in.ERROR){const t=e.map(Kh);Ac.error(`Firestore (${Zh}): ${n}`,...t)}}function Sc(n,...e){if(Ac.logLevel<=Bs.in.WARN){const t=e.map(Kh);Ac.warn(`Firestore (${Zh}): ${n}`,...t)}}function Kh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Zh}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function mt(n,e){n||Xe()}function Le(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class OC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class kC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IS{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let a=this.i;const c=D=>this.i!==a?(a=this.i,t(D)):Promise.resolve();let h=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new kr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const D=h;e.enqueueRetryable((0,fe.Z)(function*(){yield D.promise,yield c(r.currentUser)}))},w=D=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new kr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new OC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Or(e)}}class CS{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Yh{constructor(e,t,r,a){this.h=e,this.l=t,this.m=r,this.g=a}getToken(){return Promise.resolve(new CS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=c=>{null!=c.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.A;return this.A=c.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const a=c=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new PC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function LC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class VC{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const a=LC(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function Qh(n,e,t){return n.length===e.length&&n.every((r,a)=>t(r,e[a]))}function l_(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gt(e)}static min(){return new gt(new Pn(0,0))}static max(){return new gt(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jh{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=e.get(a),h=t.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends Jh{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ce(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(a=>a.length>0))}return new en(t)}static emptyPath(){return new en([])}}const DS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Jh{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return DS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(0===r.length)throw new Ce(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ce(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ce(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,a+=2}else"`"===y?(h=!h,a++):"."!==y||h?(r+=y,a++):(c(),a++)}if(c(),h)throw new Ce(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(en.fromString(e))}static fromName(e){return new Ve(en.fromString(e).popFirst(5))}static empty(){return new Ve(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new en(e.slice()))}}class d_{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function h_(n){return n.fields.find(e=>2===e.kind)}function Ql(n){return n.fields.filter(e=>2!==e.kind)}d_.UNKNOWN_ID=-1;class f_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tg(0,js.min())}}function UC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=gt.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new js(a,Ve.empty(),e)}function BC(n){return new js(n.readTime,n.key,-1)}class js{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new js(gt.min(),Ve.empty(),-1)}static max(){return new js(gt.max(),Ve.empty(),-1)}}function p_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const _0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xc(n){return g_.apply(this,arguments)}function g_(){return g_=(0,fe.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==_0)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),g_.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let a=0,c=0,h=!1;e.forEach(y=>{++a,y.next(()=>{++c,h&&c===a&&t()},w=>r(w))}),h=!0,c===a&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(a=>a?oe.resolve(a):r());return t}static forEach(e,t){const r=[];return e.forEach((a,c)=>{r.push(t.call(this,a,c))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,a)=>{const c=e.length,h=new Array(c);let y=0;for(let w=0;w<c;w++){const D=w;t(e[D]).next(R=>{h[D]=R,++y,y===c&&r(h)},R=>a(R))}})}static doWhile(e,t){return new oe((r,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):r()};c()})}}class m_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new kr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Jl(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const a=Ag(r.target.error);this.P.reject(new Jl(e,a))}}static open(e,t,r,a){try{return new m_(t,e.transaction(a,r))}catch(c){throw new Jl(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new E0(t)}}class ta{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ta.D((0,Zt.z$)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),Xl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Zt.hl)())return!1;if(ta.N())return!0;const e=(0,Zt.z$)(),t=ta.D(e),r=0<t&&t<10,a=ta.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,fe.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=h=>{r(h.target.result)},c.onblocked=()=>{a(new Jl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=h=>{const y=h.target.error;a("VersionError"===y.name?new Ce(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ce(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Jl(e,y))},c.onupgradeneeded=h=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.S.$(h.target.result,c.transaction,h.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,a){var c=this;return(0,fe.Z)(function*(){const h="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const w=m_.open(c.db,e,h?"readonly":"readwrite",r),D=a(w).next(R=>(w.V(),R)).catch(R=>(w.abort(R),oe.reject(R))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,R="FirebaseError"!==D.name&&y<3;if(ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",R),c.close(),!R)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class v0{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Xl(this.U.delete())}}class Jl extends Ce{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Au(n){return"IndexedDbTransactionError"===n.name}class E0{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xl(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),Xl(this.store.add(e))}get(e){return Xl(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),Xl(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),Xl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const a=this.cursor(r),c=[];return this.H(a,(h,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(r.range);return new oe((c,h)=>{a.onerror=y=>{h(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((a,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,(c,h,y)=>y.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}tt(e){const t=this.cursor({});return new oe((r,a)=>{t.onerror=c=>{const h=Ag(c.target.error);a(h)},t.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(y=>{y?h.continue():r()}):r()}})}H(e,t){const r=[];return new oe((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const y=h.target.result;if(!y)return void a();const w=new v0(y),D=t(y.primaryKey,y.value,w);if(D instanceof oe){const R=D.catch(O=>(w.done(),oe.reject(O)));r.push(R)}w.isDone?a():null===w.G?y.continue():y.continue(w.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xl(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const a=Ag(r.target.error);t(a)}})}let HC=!1;function Ag(n){const e=ta.D((0,Zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HC||(HC=!0,setTimeout(()=>{throw r},0)),r}}return n}class SS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Au(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xc(r)}yield t.nt(6e4)}))}}class $C{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let a=t,c=!0;return oe.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return ke("IndexBackiller",`Processing collection: ${h}`),this.rt(e,h,a).next(y=>{a-=y,r.add(h)});c=!1})).next(()=>t-a)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next(c=>{const h=c.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.ot(a,c)).next(y=>(ke("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>h.size)}))}ot(e,t){let r=e;return t.changes.forEach((a,c)=>{const h=BC(c);p_(h,r)>0&&(r=h)}),new js(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class gs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function b0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}gs.at=-1;class or{constructor(e,t){this.comparator=e,this.root=t||tr.EMPTY}insert(e,t){return new or(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(e){return new or(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(0===a)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new y_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new y_(this.root,e,this.comparator,!1)}getReverseIterator(){return new y_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new y_(this.root,e,this.comparator,!0)}}class y_{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tr{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=null!=r?r:tr.RED,this.left=null!=a?a:tr.EMPTY,this.right=null!=c?c:tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new tr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return tr.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1,tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,a){return this}insert(n,e,t){return new tr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new or(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new __(this.data.getIterator())}getIteratorFrom(e){return new __(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class __{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Su(n){return n.hasNext()?n.getNext():void 0}class Hs{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Hs([])}unionWith(e){let t=new _n(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let a="";for(let c=0;c<r.length;++c)a+=String.fromCharCode(r[c]);return a}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const SM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mc(n){if(mt(!!n),"string"==typeof n){let e=0;const t=SM.exec(n);if(mt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Nc(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function GC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Sg(n){const e=n.mapValue.fields.__previous_value__;return GC(e)?Sg(e):e}function xg(n){const e=Mc(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class xS{constructor(e,t,r,a,c,h,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.useFetchStreams=w}}class ed{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ed("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ed&&e.projectId===this.projectId&&e.database===this.database}}function Rg(n){return null==n}function Mg(n){return 0===n&&1/n==-1/0}function qC(n){return"number"==typeof n&&Number.isInteger(n)&&!Mg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ha={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ng={nullValue:"NULL_VALUE"};function xu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?GC(n)?4:KC(n)?9007199254740991:10:Xe()}function na(n,e){if(n===e)return!0;const t=xu(n);if(t!==xu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xg(n).isEqual(xg(e));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const c=Mc(r.timestampValue),h=Mc(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Nc(n.bytesValue).isEqual(Nc(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,a){return an(r.geoPointValue.latitude)===an(a.geoPointValue.latitude)&&an(r.geoPointValue.longitude)===an(a.geoPointValue.longitude)}(n,e);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return an(r.integerValue)===an(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const c=an(r.doubleValue),h=an(a.doubleValue);return c===h?Mg(c)===Mg(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Qh(n.arrayValue.values||[],e.arrayValue.values||[],na);case 10:return function(r,a){const c=r.mapValue.fields||{},h=a.mapValue.fields||{};if(b0(c)!==b0(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===h[y]||!na(c[y],h[y])))return!1;return!0}(n,e);default:return Xe()}var a}function Og(n,e){return void 0!==(n.values||[]).find(t=>na(t,e))}function td(n,e){if(n===e)return 0;const t=xu(n),r=xu(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=an(a.integerValue||a.doubleValue),y=an(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1}(n,e);case 3:return zC(n.timestampValue,e.timestampValue);case 4:return zC(xg(n),xg(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Nc(a),y=Nc(c);return h.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),y=c.split("/");for(let w=0;w<h.length&&w<y.length;w++){const D=Pt(h[w],y[w]);if(0!==D)return D}return Pt(h.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Pt(an(a.latitude),an(c.latitude));return 0!==h?h:Pt(an(a.longitude),an(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const h=a.values||[],y=c.values||[];for(let w=0;w<h.length&&w<y.length;++w){const D=td(h[w],y[w]);if(D)return D}return Pt(h.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===Ha.mapValue&&c===Ha.mapValue)return 0;if(a===Ha.mapValue)return 1;if(c===Ha.mapValue)return-1;const h=a.fields||{},y=Object.keys(h),w=c.fields||{},D=Object.keys(w);y.sort(),D.sort();for(let R=0;R<y.length&&R<D.length;++R){const O=Pt(y[R],D[R]);if(0!==O)return O;const G=td(h[y[R]],w[D[R]]);if(0!==G)return G}return Pt(y.length,D.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function zC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Mc(n),r=Mc(e),a=Pt(t.seconds,r.seconds);return 0!==a?a:Pt(t.nanos,r.nanos)}function ef(n){return I0(n)}function I0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const a=Mc(r);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Nc(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let a="[",c=!0;for(const h of r.values||[])c?c=!1:a+=",",a+=I0(h);return a+"]"}(n.arrayValue):"mapValue"in n?function(r){const a=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const y of a)h?h=!1:c+=",",c+=`${y}:${I0(r.fields[y])}`;return c+"}"}(n.mapValue):Xe();var e}function Oc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function v_(n){return!!n&&"integerValue"in n}function tf(n){return!!n&&"arrayValue"in n}function WC(n){return!!n&&"nullValue"in n}function ZC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kg(n){return!!n&&"mapValue"in n}function kc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function YC(n){return"nullValue"in n?Ng:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Oc(ed.empty(),Ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function E_(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Oc(ed.empty(),Ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ha:Xe()}function Pg(n,e){const t=td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nf(n,e){const t=td(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=er.emptyPath(),r={},a=[];e.forEach((h,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,r,a),r={},a=[],t=y.popLast()}h?r[y.lastSegment()]=kc(h):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());kg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];kg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Rc(t,(a,c)=>e[a]=c);for(const a of r)delete e[a]}clone(){return new li(kc(this.value))}}function QC(n){const e=[];return Rc(n.fields,(t,r)=>{const a=new er([t]);if(kg(r)){const c=QC(r.mapValue).fields;if(0===c.length)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new Hs(e)}class Rn{constructor(e,t,r,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Rn(e,0,gt.min(),gt.min(),li.empty(),0)}static newFoundDocument(e,t,r){return new Rn(e,1,t,gt.min(),r,0)}static newNoDocument(e,t){return new Rn(e,2,t,gt.min(),li.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,gt.min(),li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RS{constructor(e,t=null,r=[],a=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=y,this.ht=null}}function JC(n,e=null,t=[],r=[],a=null,c=null,h=null){return new RS(n,e,t,r,a,c,h)}function nd(n){const e=Le(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(a=r).field.canonicalString()+a.op.toString()+ef(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(a=r).field.canonicalString()+a.dir;var a}).join(","),Rg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ef(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ef(r)).join(",")),e.ht=t}return e.ht}function Fg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!PS(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(r=e.filters[a]).op||!t.field.isEqual(r.field)||!na(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!rD(n.startAt,e.startAt)&&rD(n.endAt,e.endAt)}function b_(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function w_(n,e){return n.filters.filter(t=>t instanceof Si&&t.field.isEqual(e))}function XC(n,e,t){let r=Ng,a=!0;for(const c of w_(n,e)){let h=Ng,y=!0;switch(c.op){case"<":case"<=":h=YC(c.value);break;case"==":case"in":case">=":h=c.value;break;case">":h=c.value,y=!1;break;case"!=":case"not-in":h=Ng}Pg({value:r,inclusive:a},{value:h,inclusive:y})<0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];Pg({value:r,inclusive:a},{value:h,inclusive:t.inclusive})<0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}function eD(n,e,t){let r=Ha,a=!0;for(const c of w_(n,e)){let h=Ha,y=!0;switch(c.op){case">=":case">":h=E_(c.value),y=!1;break;case"==":case"in":case"<=":h=c.value;break;case"<":h=c.value,y=!1;break;case"!=":case"not-in":h=Ha}nf({value:r,inclusive:a},{value:h,inclusive:y})>0&&(r=h,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const h=t.position[c];nf({value:r,inclusive:a},{value:h,inclusive:t.inclusive})>0&&(r=h,a=t.inclusive);break}return{value:r,inclusive:a}}class Si extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new NS(e,t,r):"array-contains"===t?new kS(e,r):"in"===t?new I_(e,r):"not-in"===t?new rd(e,r):"array-contains-any"===t?new nD(e,r):new Si(e,t,r)}static lt(e,t,r){return"in"===t?new Lg(e,r):new OS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(td(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.ft(td(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class NS extends Si{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.ft(t)}}class Lg extends Si{constructor(e,t){super(e,"in",t),this.keys=tD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OS extends Si{constructor(e,t){super(e,"not-in",t),this.keys=tD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class kS extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tf(t)&&Og(t.arrayValue,this.value)}}class I_ extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Og(this.value.arrayValue,t)}}class rd extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Og(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Og(this.value.arrayValue,t)}}class nD extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Og(this.value.arrayValue,r))}}class Pc{constructor(e,t){this.position=e,this.inclusive=t}}class Vg{constructor(e,t="asc"){this.field=e,this.dir=t}}function PS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Ug(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(r=c.field.isKeyField()?Ve.comparator(Ve.fromName(h.referenceValue),t.key):td(h,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return r}function rD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!na(n.position[t],e.position[t]))return!1;return!0}class Ru{constructor(e,t=null,r=[],a=[],c=null,h="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=w,this._t=null,this.wt=null}}function C0(n,e,t,r,a,c,h,y){return new Ru(n,e,t,r,a,c,h,y)}function id(n){return new Ru(n)}function C_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function D_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function T_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function D0(n){return null!==n.collectionGroup}function rf(n){const e=Le(n);if(null===e._t){e._t=[];const t=T_(e),r=D_(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Vg(t)),e._t.push(new Vg(er.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Vg(er.keyField(),c))}}}return e._t}function xi(n){const e=Le(n);if(!e.wt)if("F"===e.limitType)e.wt=JC(e.path,e.collectionGroup,rf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of rf(e))t.push(new Vg(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new Pc(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Pc(e.startAt.position,e.startAt.inclusive):null;e.wt=JC(e.path,e.collectionGroup,t,e.filters,e.limit,r,a)}return e.wt}function A_(n,e,t){return new Ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return Fg(xi(n),xi(e))&&n.limitType===e.limitType}function Bg(n){return`${nd(xi(n))}|lt:${n.limitType}`}function of(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ef(r.value)}`;var r}).join(", ")}]`),Rg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ef(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ef(t)).join(",")),`Target(${e})`}(xi(n))}; limitType=${n.limitType})`}function iD(n,e){return e.isFoundDocument()&&function(t,r){const a=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Ve.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,r){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===r.data.field(a.field))return!1;return!0}(n,e)&&function(t,r){for(const a of t.filters)if(!a.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(a,c,h){const y=Ug(a,c,h);return a.inclusive?y<=0:y<0}(t.startAt,rf(t),r)||t.endAt&&!function(a,c,h){const y=Ug(a,c,h);return a.inclusive?y>=0:y>0}(t.endAt,rf(t),r)));var t,r}function af(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function un(n){return(e,t)=>{let r=!1;for(const a of rf(n)){const c=Fc(a,e,t);if(0!==c)return c;r=r||a.field.isKeyField()}return 0}}function Fc(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(a,c,h){const y=c.data.field(a),w=h.data.field(a);return null!==y&&null!==w?td(y,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function sd(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mg(e)?"-0":e}}function uf(n){return{integerValue:""+n}}function FS(n,e){return qC(e)?uf(e):sd(n,e)}class St{constructor(){this._=void 0}}function Eo(n,e,t){return n instanceof jg?function(r,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Vc?A0(n,e):n instanceof cf?sD(n,e):function(r,a){const c=Lc(r,a),h=$s(c)+$s(r.yt);return v_(c)&&v_(r.yt)?uf(h):sd(r.It,h)}(n,e)}function T0(n,e,t){return n instanceof Vc?A0(n,e):n instanceof cf?sD(n,e):t}function Lc(n,e){return n instanceof lf?v_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class jg extends St{}class Vc extends St{constructor(e){super(),this.elements=e}}function A0(n,e){const t=Fn(e);for(const r of n.elements)t.some(a=>na(a,r))||t.push(r);return{arrayValue:{values:t}}}class cf extends St{constructor(e){super(),this.elements=e}}function sD(n,e){let t=Fn(e);for(const r of n.elements)t=t.filter(a=>!na(a,r));return{arrayValue:{values:t}}}class lf extends St{constructor(e,t){super(),this.It=e,this.yt=t}}function $s(n){return an(n.integerValue||n.doubleValue)}function Fn(n){return tf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Qi{constructor(e,t){this.field=e,this.transform=t}}class LS{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Mu{}function hf(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ff(n.key,Mn.none()):new Uc(n.key,n.data,Mn.none());{const t=n.data,r=li.empty();let a=new _n(er.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);null===h&&c.length>1&&(c=c.popLast(),h=t.field(c)),null===h?r.delete(c):r.set(c,h),a=a.add(c)}return new Gs(n.key,r,new Hs(a.toArray()),Mn.none())}}function VS(n,e,t){n instanceof Uc?function(r,a,c){const h=r.value.clone(),y=x0(r.fieldTransforms,a,c.transformResults);h.setAll(y),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Gs?function(r,a,c){if(!df(r.precondition,a))return void a.convertToUnknownDocument(c.version);const h=x0(r.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(S_(r)),y.setAll(h),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ra(n,e,t,r){return n instanceof Uc?function(a,c,h,y){if(!df(a.precondition,c))return h;const w=a.value.clone(),D=od(a.fieldTransforms,y,c);return w.setAll(D),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Gs?function(a,c,h,y){if(!df(a.precondition,c))return h;const w=od(a.fieldTransforms,y,c),D=c.data;return D.setAll(S_(a)),D.setAll(w),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null===h?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(R=>R.field))}(n,e,t,r):(h=t,df(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h);var c,h}function US(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=Lc(r.transform,a||null);null!=c&&(null===t&&(t=li.empty()),t.set(r.field,c))}return t||null}function S0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Qh(t,r,(a,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Vc&&r instanceof Vc||t instanceof cf&&r instanceof cf?Qh(t.elements,r.elements,na):t instanceof lf&&r instanceof lf?na(t.yt,r.yt):t instanceof jg&&r instanceof jg);var t,r}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Uc extends Mu{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Gs extends Mu{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function S_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function x0(n,e,t){const r=new Map;mt(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,y=e.data.field(c.field);r.set(c.field,T0(h,y,t[a]))}return r}function od(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,Eo(c,h,e))}return r}class ff extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pf extends Mu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aD{constructor(e){this.count=e}}var ar,Qt;function Hg(n){switch(n){default:return Xe();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function uD(n){if(void 0===n)return vr("GRPC error has no .code"),de.UNKNOWN;switch(n){case ar.OK:return de.OK;case ar.CANCELLED:return de.CANCELLED;case ar.UNKNOWN:return de.UNKNOWN;case ar.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ar.INTERNAL:return de.INTERNAL;case ar.UNAVAILABLE:return de.UNAVAILABLE;case ar.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ar.NOT_FOUND:return de.NOT_FOUND;case ar.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ar.ABORTED:return de.ABORTED;case ar.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ar.DATA_LOSS:return de.DATA_LOSS;default:return Xe()}}(Qt=ar||(ar={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[a,c]of r)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(void 0===a)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return 1===r.length?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Rc(this.inner,(t,r)=>{for(const[a,c]of r)e(a,c)})}isEmpty(){return w0(this.inner)}size(){return this.innerSize}}const R0=new or(Ve.comparator);function qs(){return R0}const BS=new or(Ve.comparator);function yt(...n){let e=BS;for(const t of n)e=e.insert(t.key,t);return e}function jS(n){let e=BS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return $g()}function cD(){return $g()}function $g(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const HS=new or(Ve.comparator),xM=new _n(Ve.comparator);function Ht(...n){let e=xM;for(const t of n)e=e.add(t);return e}const $S=new _n(Pt);function Fr(){return $S}class Gg{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,qg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Gg(gt.min(),a,Fr(),qs(),Ht())}}class qg{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qg(r,t,Ht(),Ht(),Ht())}}class gf{constructor(e,t,r,a){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=a}}class lD{constructor(e,t){this.targetId=e,this.At=t}}class dD{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class hD{constructor(){this.Rt=0,this.bt=pD(),this.Pt=Pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ht(),t=Ht(),r=Ht();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Xe()}}),new qg(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=pD()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class GS{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=qs(),this.qt=fD(),this.Kt=new _n(Pt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,r=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(b_(c))if(0===r){const h=new Ve(c.path);this.jt(t,h,Rn.newNoDocument(h,gt.min()))}else mt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,h)=>{const y=this.Xt(h);if(y){if(c.current&&b_(y.target)){const w=new Ve(y.target.path);null!==this.Ut.get(w)||this.ee(h,w)||this.jt(h,w,Rn.newNoDocument(w,e))}c.Dt&&(t.set(h,c.xt()),c.Nt())}});let r=Ht();this.qt.forEach((c,h)=>{let y=!0;h.forEachWhile(w=>{const D=this.Xt(w);return!D||2===D.purpose||(y=!1,!1)}),y&&(r=r.add(c))}),this.Ut.forEach((c,h)=>h.setReadTime(e));const a=new Gg(e,t,this.Kt,this.Ut,r);return this.Ut=qs(),this.qt=fD(),this.Kt=new _n(Pt),a}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new hD,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _n(Pt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new hD),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function fD(){return new or(Ve.comparator)}function pD(){return new or(Ve.comparator)}const M0={asc:"ASCENDING",desc:"DESCENDING"},qS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zS{constructor(e,t){this.databaseId=e,this.gt=t}}function mf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x_(n,e){return n.gt?e.toBase64():e.toUint8Array()}function WS(n,e){return mf(n,e.toTimestamp())}function di(n){return mt(!!n),gt.fromTimestamp(function(e){const t=Mc(e);return new Pn(t.seconds,t.nanos)}(n))}function N0(n,e){return(t=n,new en(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gD(n){const e=en.fromString(n);return mt(ID(e)),e}function zg(n,e){return N0(n.databaseId,e.path)}function Ga(n,e){const t=gD(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(yD(t))}function O0(n,e){return N0(n.databaseId,e)}function mD(n){const e=gD(n);return 4===e.length?en.emptyPath():yD(e)}function Nu(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yD(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function _D(n,e,t){return{name:zg(n,e),fields:t.value.mapValue.fields}}function k0(n,e,t){const r=Ga(n,e.name),a=di(e.updateTime),c=new li({mapValue:{fields:e.fields}}),h=Rn.newFoundDocument(r,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function yf(n,e){let t;if(e instanceof Uc)t={update:_D(n,e.key,e.value)};else if(e instanceof ff)t={delete:zg(n,e.key)};else if(e instanceof Gs)t={update:_D(n,e.key,e.data),updateMask:QS(e.fieldMask)};else{if(!(e instanceof pf))return Xe();t={verify:zg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const h=c.transform;if(h instanceof jg)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Vc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof cf)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof lf)return{fieldPath:c.field.canonicalString(),increment:h.yt};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:WS(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Xe()),t;var a}function P0(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Mn.updateTime(di(a.updateTime)):void 0!==a.exists?Mn.exists(a.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(a=>function(c,h){let y=null;"setToServerValue"in h?(mt("REQUEST_TIME"===h.setToServerValue),y=new jg):"appendMissingElements"in h?y=new Vc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?y=new cf(h.removeAllFromArray.values||[]):"increment"in h?y=new lf(c,h.increment):Xe();const w=er.fromServerFormat(h.fieldPath);return new Qi(w,y)}(n,a)):[];var a;if(e.update){const a=Ga(n,e.update.name),c=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new Hs((e.updateMask.fieldPaths||[]).map(D=>er.fromServerFormat(D)));return new Gs(a,c,h,t,r)}return new Uc(a,c,t,r)}if(e.delete){const a=Ga(n,e.delete);return new ff(a,t)}if(e.verify){const a=Ga(n,e.verify);return new pf(a,t)}return Xe()}function vD(n,e){return{documents:[O0(n,e.path)]}}function F0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=O0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=O0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const a=function(w){if(0===w.length)return;const D=w.map(R=>function(O){if("=="===O.op){if(ZC(O.value))return{unaryFilter:{field:Zg(O.field),op:"IS_NAN"}};if(WC(O.value))return{unaryFilter:{field:Zg(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(ZC(O.value))return{unaryFilter:{field:Zg(O.field),op:"IS_NOT_NAN"}};if(WC(O.value))return{unaryFilter:{field:Zg(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zg(O.field),op:MM(O.op),value:O.value}}}(R));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(w){if(0!==w.length)return w.map(D=>{return{field:Zg((R=D).field),direction:KS(R.dir)};var R})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=(D=e.limit,n.gt||Rg(D)?D:{value:D});var D,y,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function ED(n){let e=mD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){mt(1===r);const R=t.from[0];R.allDescendants?a=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=wD(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(R=>{return new Vg(Kg((O=R).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let y=null;t.limit&&(y=function(R){let O;return O="object"==typeof R?R.value:R,Rg(O)?null:O}(t.limit));let w=null;var R;t.startAt&&(w=new Pc((R=t.startAt).values||[],!!R.before));let D=null;return t.endAt&&(D=function(R){return new Pc(R.values||[],!R.before)}(t.endAt)),C0(e,a,h,c,y,"F",w,D)}function wD(n){return n?void 0!==n.unaryFilter?[YS(n)]:void 0!==n.fieldFilter?[L0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wD(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function KS(n){return M0[n]}function MM(n){return qS[n]}function Zg(n){return{fieldPath:n.canonicalString()}}function Kg(n){return er.fromServerFormat(n.fieldPath)}function L0(n){return Si.create(Kg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function YS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Kg(n.unaryFilter.field);return Si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Kg(n.unaryFilter.field);return Si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kg(n.unaryFilter.field);return Si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Kg(n.unaryFilter.field);return Si.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function QS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ID(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ji(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CD(e)),e=JS(n.get(t),e);return CD(e)}function JS(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function CD(n){return n+"\x01\x01"}function ia(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let a="";for(let c=0;c<e;){const h=n.indexOf("\x01",c);switch((h<0||h>t)&&Xe(),n.charAt(h+1)){case"\x01":const y=n.substring(c,h);let w;0===a.length?w=y:(a+=y,w=a,a=""),r.push(w);break;case"\x10":a+=n.substring(c,h),a+="\0";break;case"\x11":a+=n.substring(c,h+1);break;default:Xe()}c=h+2}return new en(r)}const R_=["userId","batchId"];function M_(n,e){return[n,Ji(e)]}function ad(n,e,t){return[n,Ji(e),t]}const Ri={},DD=["prefixPath","collectionGroup","readTime","documentId"],sa=["prefixPath","collectionGroup","documentId"],V0=["collectionGroup","readTime","prefixPath","documentId"],XS=["canonicalId","targetId"],TD=["targetId","path"],AD=["path","targetId"],SD=["collectionId","parent"],ex=["indexId","uid"],tx=["uid","sequenceNumber"],nx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xD=["indexId","uid","orderedDocumentKey"],rx=["userId","collectionPath","documentId"],NM=["userId","collectionPath","largestBatchId"],ix=["userId","collectionGroup","largestBatchId"],RD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_f=[...RD,"documentOverlays"],sx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],U0=sx,ox=[...U0,"indexConfiguration","indexState","indexEntries"];class MD extends jC{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=Le(n);return ta.M(t.ie,e)}class B0{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&VS(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ra(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ra(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cD();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let y=this.applyToLocalView(h,c.mutatedFields);y=t.has(a.key)?null:y;const w=hf(h,y);null!==w&&r.set(a.key,w),h.isValidDocument()||h.convertToNoDocument(gt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ht())}isEqual(e){return this.batchId===e.batchId&&Qh(this.mutations,e.mutations,(t,r)=>S0(t,r))&&Qh(this.baseMutations,e.baseMutations,(t,r)=>S0(t,r))}}class Yg{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){mt(e.mutations.length===r.length);let a=HS;const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new Yg(e,t,r,a)}}class j0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bc{constructor(e,t,r,a,c=gt.min(),h=gt.min(),y=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y}withSequenceNumber(e){return new Bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ND{constructor(e){this.re=e}}function OD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:N_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:zg(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:mf(a,c.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ud(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:ud(e.version)}}var a,c;return r}function N_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ud(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cd(n){const e=new Pn(n.seconds,n.nanoseconds);return gt.fromTimestamp(e)}function ld(n,e){const t=(e.baseMutations||[]).map(c=>P0(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const h=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(h.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>P0(n.re,c)),a=Pn.fromMillis(e.localWriteTimeMs);return new B0(e.batchId,a,t,r)}function Qg(n){const e=cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cd(n.lastLimboFreeSnapshotVersion):gt.min();let r;var a;return void 0!==n.query.documents?(mt(1===(a=n.query).documents.length),r=xi(id(mD(a.documents[0])))):r=xi(ED(n.query)),new Bc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function vf(n,e){const t=ud(e.snapshotVersion),r=ud(e.lastLimboFreeSnapshotVersion);let a;a=b_(e.target)?vD(n.re,e.target):F0(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nd(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function O_(n){const e=ED({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?A_(e,e.limit,"L"):e}function k_(n,e){return new j0(e.largestBatchId,P0(n.re,e.overlayMutation))}function H0(n,e){const t=e.path.lastSegment();return[n,Ji(e.path.popLast()),t]}function $0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ud(r.readTime),documentKey:Ji(r.documentKey.path),largestBatchId:r.largestBatchId}}class kD{getBundleMetadata(e,t){return PD(e).get(t).next(r=>{if(r)return{id:(a=r).bundleId,createTime:cd(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return PD(e).put({bundleId:(r=t).id,createTime:ud(di(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return FD(e).get(t).next(r=>{if(r)return{name:(a=r).name,query:O_(a.bundledQuery),readTime:cd(a.readTime)};var a})}saveNamedQuery(e,t){return FD(e).put({name:(r=t).name,readTime:ud(di(r.readTime)),bundledQuery:r.bundledQuery});var r}}function PD(n){return Lr(n,"bundles")}function FD(n){return Lr(n,"namedQueries")}class P_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new P_(e,t.uid||"")}getOverlay(e,t){return Jg(e).get(H0(this.userId,t)).next(r=>r?k_(this.It,r):null)}getOverlays(e,t){const r=ms();return oe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){const a=[];return r.forEach((c,h)=>{const y=new j0(t,h);a.push(this.ue(e,y))}),oe.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach(h=>a.add(Ji(h.getCollectionPath())));const c=[];return a.forEach(h=>{const y=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);c.push(Jg(e).Y("collectionPathOverlayIndex",y))}),oe.waitFor(c)}getOverlaysForCollection(e,t,r){const a=ms(),c=Ji(t),h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,Number.POSITIVE_INFINITY],!0);return Jg(e).W("collectionPathOverlayIndex",h).next(y=>{for(const w of y){const D=k_(this.It,w);a.set(D.getKey(),D)}return a})}getOverlaysForCollectionGroup(e,t,r,a){const c=ms();let h;const y=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jg(e).Z({index:"collectionGroupOverlayIndex",range:y},(w,D,R)=>{const O=k_(this.It,D);c.size()<a||O.largestBatchId===h?(c.set(O.getKey(),O),h=O.largestBatchId):R.done()}).next(()=>c)}ue(e,t){return Jg(e).put(function(r,a,c){const[h,y,w]=H0(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:w,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:yf(r.re,c.mutation)}}(this.It,this.userId,t))}}function Jg(n){return Lr(n,"documentOverlays")}class dd{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(an(e.integerValue));else if("doubleValue"in e){const r=an(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Mg(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Nc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?KC(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Xe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const a of Object.keys(r))this._e(a,t),this.ae(r[a],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const a of r)this.ae(a,t)}ge(e,t){this.le(t,37),Ve.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function ux(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function LD(n){const e=64-function(t){let r=0;for(let a=0;a<8;++a){const c=ux(255&t[a]);if(r+=c,8!==c)break}return r}(n);return Math.ceil(e/8)}dd.Te=new dd;class Xg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),r=LD(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),r=LD(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class em{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class cx{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class hd{constructor(){this.Be=new Xg,this.Le=new em(this.Be),this.Ue=new cx(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Mi{constructor(e,t,r,a){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mi(this.indexId,this.documentKey,this.arrayValue,r)}}function fd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tm(n.arrayValue,e.arrayValue),0!==t?t:(t=tm(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function tm(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class lx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=h_(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ql(e);let a=0,c=0;for(;a<r.length&&this.ze(r[a]);++a);if(a===r.length)return!0;if(void 0!==this.je){const h=r[a];if(!this.He(this.je,h)||!this.Je(this.Ge[c++],h))return!1;++a}for(;a<r.length;++a){const h=r[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],h))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class dx{constructor(){this.Ye=new VD}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(js.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(js.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class VD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new _n(en.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new _n(en.comparator)).toArray()}}const Ef=new Uint8Array(0);class G0{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new VD,this.Ze=new $a(r=>nd(r),(r,a)=>Fg(r,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:r,parent:Ji(a)};return q0(e).put(c)}return oe.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[l_(t),""],!1,!0);return q0(e).W(a).next(c=>{for(const h of c){if(h.collectionId!==t)break;r.push(ia(h.parent))}return r})}addFieldIndex(e,t){const r=bf(e),a={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var h;delete a.indexId;const c=r.add(a);if(t.indexState){const h=nm(e);return c.next(y=>{h.put($0(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const r=bf(e),a=nm(e),c=pd(e);return r.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=pd(e);let a=!0;const c=new Map;return oe.forEach(this.tn(t),h=>this.en(e,h).next(y=>{a&&(a=!!y),c.set(h,y)})).next(()=>{if(a){let h=Ht();const y=[];return oe.forEach(c,(w,D)=>{var R;ke("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${nd(t)}`);const O=function(_t,Ct){const Lt=h_(Ct);if(void 0===Lt)return null;for(const zt of w_(_t,Lt.fieldPath))switch(zt.op){case"array-contains-any":return zt.value.arrayValue.values||[];case"array-contains":return[zt.value]}return null}(D,w),G=function(_t,Ct){const Lt=new Map;for(const zt of Ql(Ct))for(const hi of w_(_t,zt.fieldPath))switch(hi.op){case"==":case"in":Lt.set(zt.fieldPath.canonicalString(),hi.value);break;case"not-in":case"!=":return Lt.set(zt.fieldPath.canonicalString(),hi.value),Array.from(Lt.values())}return null}(D,w),q=function(_t,Ct){const Lt=[];let zt=!0;for(const hi of Ql(Ct)){const cw=0===hi.kind?XC(_t,hi.fieldPath,_t.startAt):eD(_t,hi.fieldPath,_t.startAt);Lt.push(cw.value),zt&&(zt=cw.inclusive)}return new Pc(Lt,zt)}(D,w),ee=function(_t,Ct){const Lt=[];let zt=!0;for(const hi of Ql(Ct)){const cw=0===hi.kind?eD(_t,hi.fieldPath,_t.endAt):XC(_t,hi.fieldPath,_t.endAt);Lt.push(cw.value),zt&&(zt=cw.inclusive)}return new Pc(Lt,zt)}(D,w),Te=this.nn(w,D,q),Pe=this.nn(w,D,ee),rt=this.sn(w,D,G),It=this.rn(w.indexId,O,Te,q.inclusive,Pe,ee.inclusive,rt);return oe.forEach(It,_t=>r.J(_t,t.limit).next(Ct=>{Ct.forEach(Lt=>{const zt=Ve.fromSegments(Lt.documentKey);h.has(zt)||(h=h.add(zt),y.push(zt))})}))}).next(()=>y)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,a,c,h,y){const w=(null!=t?t.length:1)*Math.max(r.length,c.length),D=w/(null!=t?t.length:1),R=[];for(let O=0;O<w;++O){const G=t?this.on(t[O/D]):Ef,q=this.un(e,G,r[O%D],a),ee=this.cn(e,G,c[O%D],h),Te=y.map(Pe=>this.un(e,G,Pe,!0));R.push(...this.createRange(q,ee,Te))}return R}un(e,t,r,a){const c=new Mi(e,Ve.empty(),t,r);return a?c:c.Ke()}cn(e,t,r,a){const c=new Mi(e,Ve.empty(),t,r);return a?c.Ke():c}en(e,t){const r=new lx(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let h=null;for(const y of c)r.We(y)&&(!h||y.fields.length>h.fields.length)&&(h=y);return h})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let y=new _n(er.comparator),w=!1;for(const D of h.filters){const R=D;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:y=y.add(R.field))}for(const D of h.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new hd;for(const a of Ql(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const h=r.qe(a.kind);dd.Te.ce(c,h)}return r.$e()}on(e){const t=new hd;return dd.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new hd;return dd.Te.ce(Oc(this.databaseId,t),r.qe(function(a){const c=Ql(a);return 0===c.length?0:c[c.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let a=[];a.push(new hd);let c=0;for(const h of Ql(e)){const y=r[c++];for(const w of a)if(this.ln(t,h.fieldPath)&&tf(y))a=this.fn(a,h,y);else{const D=w.qe(h.kind);dd.Te.ce(y,D)}}return this.dn(a)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const a=[...e],c=[];for(const h of r.arrayValue.values||[])for(const y of a){const w=new hd;w.seed(y.$e()),dd.Te.ce(h,w.qe(t.kind)),c.push(w)}return c}ln(e,t){return!!e.filters.find(r=>r instanceof Si&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bf(e),a=nm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(c=>{const h=[];return oe.forEach(c,y=>a.get([y.indexId,this.uid]).next(w=>{h.push(function(D,R){const O=R?new Tg(R.sequenceNumber,new js(cd(R.readTime),new Ve(ia(R.documentKey)),R.largestBatchId)):Tg.empty(),G=D.fields.map(([q,ee])=>new f_(er.fromServerFormat(q),ee));return new d_(D.indexId,D.collectionGroup,G,O)}(y,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,a)=>{const c=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Pt(r.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const a=bf(e),c=nm(e);return this._n(e).next(h=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>oe.forEach(y,w=>c.put($0(w.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(a,c)=>{const h=r.get(a.collectionGroup);return(h?oe.resolve(h):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(r.set(a.collectionGroup,y),oe.forEach(y,w=>this.wn(e,a,w).next(D=>{const R=this.mn(c,w);return D.isEqual(R)?oe.resolve():this.gn(e,c,w,D,R)}))))})}yn(e,t,r,a){return pd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,a){return pd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const a=pd(e);let c=new _n(fd);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(h,y)=>{c=c.add(new Mi(r.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}mn(e,t){let r=new _n(fd);const a=this.an(t,e);if(null==a)return r;const c=h_(t);if(null!=c){const h=e.data.field(c.fieldPath);if(tf(h))for(const y of h.arrayValue.values||[])r=r.add(new Mi(t.indexId,e.key,this.on(y),a))}else r=r.add(new Mi(t.indexId,e.key,Ef,a));return r}gn(e,t,r,a,c){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(y,w,D,R,O){const G=y.getIterator(),q=w.getIterator();let ee=Su(G),Te=Su(q);for(;ee||Te;){let Pe=!1,rt=!1;if(ee&&Te){const It=D(ee,Te);It<0?rt=!0:It>0&&(Pe=!0)}else null!=ee?rt=!0:Pe=!0;Pe?(R(Te),Te=Su(q)):rt?(O(ee),ee=Su(G)):(ee=Su(G),Te=Su(q))}}(a,c,fd,y=>{h.push(this.yn(e,t,r,y))},y=>{h.push(this.pn(e,t,r,y))}),oe.waitFor(h)}_n(e){let t=1;return nm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,y)=>fd(h,y)).filter((h,y,w)=>!y||0!==fd(h,w[y-1]));const a=[];a.push(e);for(const h of r){const y=fd(h,e),w=fd(h,t);if(0===y)a[0]=e.Ke();else if(y>0&&w<0)a.push(h),a.push(h.Ke());else if(w>0)break}a.push(t);const c=[];for(let h=0;h<a.length;h+=2)c.push(IDBKeyRange.bound([a[h].indexId,this.uid,a[h].arrayValue,a[h].directionalValue,Ef,[]],[a[h+1].indexId,this.uid,a[h+1].arrayValue,a[h+1].directionalValue,Ef,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(UD)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(a=>a||Xe())).next(UD)}}function q0(n){return Lr(n,"collectionParents")}function pd(n){return Lr(n,"indexEntries")}function bf(n){return Lr(n,"indexConfiguration")}function nm(n){return Lr(n,"indexState")}function UD(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;p_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new js(e.readTime,e.documentKey,t)}const BD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function z0(n,e,t){const r=n.store("mutations"),a=n.store("documentMutations"),c=[],h=IDBKeyRange.only(t.batchId);let y=0;const w=r.Z({range:h},(R,O,G)=>(y++,G.delete()));c.push(w.next(()=>{mt(1===y)}));const D=[];for(const R of t.mutations){const O=ad(e,R.key.path,t.batchId);c.push(a.delete(O)),D.push(R.key)}return oe.waitFor(c).next(()=>D)}function wf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(41943040,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);class rm{constructor(e,t,r,a){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=a,this.In={}}static oe(e,t,r,a){mt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new rm(c,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).Z({index:"userMutationsIndex",range:r},(a,c,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,a){const c=gd(e),h=Ou(e);return h.add({}).next(y=>{mt("number"==typeof y);const w=new B0(y,t,r,a),D=function(G,q,ee){const Te=ee.baseMutations.map(rt=>yf(G.re,rt)),Pe=ee.mutations.map(rt=>yf(G.re,rt));return{userId:q,batchId:ee.batchId,localWriteTimeMs:ee.localWriteTime.toMillis(),baseMutations:Te,mutations:Pe}}(this.It,this.userId,w),R=[];let O=new _n((G,q)=>Pt(G.canonicalString(),q.canonicalString()));for(const G of a){const q=ad(this.userId,G.key.path,y);O=O.add(G.key.path.popLast()),R.push(h.put(D)),R.push(c.put(q,Ri))}return O.forEach(G=>{R.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.In[y]=w.keys()}),oe.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return Ou(e).get(t).next(r=>r?(mt(r.userId===this.userId),ld(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const a=r.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return Ou(e).Z({index:"userMutationsIndex",range:a},(h,y,w)=>{y.userId===this.userId&&(mt(y.batchId>=r),c=ld(this.It,y)),w.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ou(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,h)=>{r=c.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).W("userMutationsIndex",t).next(r=>r.map(a=>ld(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=M_(this.userId,t.path),a=IDBKeyRange.lowerBound(r),c=[];return gd(e).Z({range:a},(h,y,w)=>{const[D,R,O]=h,G=ia(R);if(D===this.userId&&t.path.isEqual(G))return Ou(e).get(O).next(q=>{if(!q)throw Xe();mt(q.userId===this.userId),c.push(ld(this.It,q))});w.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Pt);const a=[];return t.forEach(c=>{const h=M_(this.userId,c.path),y=IDBKeyRange.lowerBound(h),w=gd(e).Z({range:y},(D,R,O)=>{const[G,q,ee]=D,Te=ia(q);G===this.userId&&c.path.isEqual(Te)?r=r.add(ee):O.done()});a.push(w)}),oe.waitFor(a).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,c=M_(this.userId,r),h=IDBKeyRange.lowerBound(c);let y=new _n(Pt);return gd(e).Z({range:h},(w,D,R)=>{const[O,G,q]=w,ee=ia(G);O===this.userId&&r.isPrefixOf(ee)?ee.length===a&&(y=y.add(q)):R.done()}).next(()=>this.En(e,y))}En(e,t){const r=[],a=[];return t.forEach(c=>{a.push(Ou(e).get(c).next(h=>{if(null===h)throw Xe();mt(h.userId===this.userId),r.push(ld(this.It,h))}))}),oe.waitFor(a).next(()=>r)}removeMutationBatch(e,t){return z0(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),a=[];return gd(e).Z({range:r},(c,h,y)=>{if(c[0]===this.userId){const w=ia(c[1]);a.push(w)}else y.done()}).next(()=>{mt(0===a.length)})})}containsKey(e,t){return jD(e,this.userId,t)}Rn(e){return HD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jD(n,e,t){const r=M_(e,t.path),a=r[1],c=IDBKeyRange.lowerBound(r);let h=!1;return gd(n).Z({range:c,X:!0},(y,w,D)=>{const[R,O,G]=y;R===e&&O===a&&(h=!0),D.done()}).next(()=>h)}function Ou(n){return Lr(n,"mutations")}function gd(n){return Lr(n,"documentMutations")}function HD(n){return Lr(n,"mutationQueues")}class jc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new jc(0)}static vn(){return new jc(-1)}}class $D{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new jc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>gt.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>If(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let a=0;const c=[];return If(e).Z((h,y)=>{const w=Qg(y);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(a++,c.push(this.removeTargetData(e,w)))}).next(()=>oe.waitFor(c)).next(()=>a)}forEachTarget(e,t){return If(e).Z((r,a)=>{const c=Qg(a);t(c)})}Vn(e){return W0(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Sn(e,t){return W0(e).put("targetGlobalKey",t)}Dn(e,t){return If(e).put(vf(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=nd(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return If(e).Z({range:a,index:"queryTargetsIndex"},(h,y,w)=>{const D=Qg(y);Fg(t,D.target)&&(c=D,w.done())}).next(()=>c)}addMatchingKeys(e,t,r){const a=[],c=Hc(e);return t.forEach(h=>{const y=Ji(h.path);a.push(c.put({targetId:r,path:y})),a.push(this.referenceDelegate.addReference(e,r,h))}),oe.waitFor(a)}removeMatchingKeys(e,t,r){const a=Hc(e);return oe.forEach(t,c=>{const h=Ji(c.path);return oe.waitFor([a.delete([r,h]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=Hc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Hc(e);let c=Ht();return a.Z({range:r,X:!0},(h,y,w)=>{const D=ia(h[1]),R=new Ve(D);c=c.add(R)}).next(()=>c)}containsKey(e,t){const r=Ji(t.path),a=IDBKeyRange.bound([r],[l_(r)],!1,!0);let c=0;return Hc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([h,y],w,D)=>{0!==h&&(c++,D.done())}).next(()=>c>0)}se(e,t){return If(e).get(t).next(r=>r?Qg(r):null)}}function If(n){return Lr(n,"targets")}function W0(n){return Lr(n,"targetGlobal")}function Hc(n){return Lr(n,"targetDocuments")}function hx([n,e],[t,r]){const a=Pt(n,t);return 0===a?Pt(e,r):a}class Xi{constructor(e){this.xn=e,this.buffer=new _n(hx),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cf{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Au(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xc(r)}yield t.Fn(3e5)}))}}class fx{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(gs.at);const r=new Xi(t);return this.$n.forEachTarget(e,a=>r.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>r.On(a))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(BD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BD):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,a,c,h,y,w,D;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),a=this.params.maximumSequenceNumbersToCollect):a=O,h=Date.now(),this.nthSequenceNumber(e,a))).next(O=>(r=O,y=Date.now(),this.removeTargets(e,r,t))).next(O=>(c=O,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(D=Date.now(),MC()<=Bs.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-R}ms\n\tDetermined least recently used ${a} in `+(y-h)+`ms\n\tRemoved ${c} targets in `+(w-y)+`ms\n\tRemoved ${O} documents in `+(D-w)+`ms\nTotal Duration: ${D-R}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:O})))}}class px{constructor(e,t){this.db=e,this.garbageCollector=new fx(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(a=>r+a))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,a)=>t(a))}addReference(e,t,r){return Z0(e,r)}removeReference(e,t,r){return Z0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Z0(e,t)}Gn(e,t){return function(r,a){let c=!1;return HD(r).tt(h=>jD(r,h,a).next(y=>(y&&(c=!0),oe.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(h,y)=>{if(y<=t){const w=this.Gn(e,h).next(D=>{if(!D)return c++,r.getEntry(e,h).next(()=>(r.removeEntry(h,gt.min()),Hc(e).delete([0,Ji(h.path)])))});a.push(w)}}).next(()=>oe.waitFor(a)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Z0(e,t)}Kn(e,t){const r=Hc(e);let a,c=gs.at;return r.Z({index:"documentTargetsIndex"},([h,y],{path:w,sequenceNumber:D})=>{0===h?(c!==gs.at&&t(new Ve(ia(a)),c),c=D,a=w):c=gs.at}).next(()=>{c!==gs.at&&t(new Ve(ia(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Z0(n,e){return Hc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ji(e.path),sequenceNumber:r}));var r}class Df{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gx{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return md(e).put(r)}removeEntry(e,t,r){return md(e).delete(function(a,c){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],N_(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Rn.newInvalidDocument(t);return md(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(im(t))},(a,c)=>{r=this.jn(t,c)}).next(()=>r)}Wn(e,t){let r={size:0,document:Rn.newInvalidDocument(t)};return md(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(im(t))},(a,c)=>{r={document:this.jn(t,c),size:wf(c)}}).next(()=>r)}getEntries(e,t){let r=qs();return this.zn(e,t,(a,c)=>{const h=this.jn(a,c);r=r.insert(a,h)}).next(()=>r)}Hn(e,t){let r=qs(),a=new or(Ve.comparator);return this.zn(e,t,(c,h)=>{const y=this.jn(c,h);r=r.insert(c,y),a=a.insert(c,wf(h))}).next(()=>({documents:r,Jn:a}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let a=new _n(Y0);t.forEach(w=>a=a.add(w));const c=IDBKeyRange.bound(im(a.first()),im(a.last())),h=a.getIterator();let y=h.getNext();return md(e).Z({index:"documentKeyIndex",range:c},(w,D,R)=>{const O=Ve.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;y&&Y0(y,O)<0;)r(y,null),y=h.getNext();y&&y.isEqual(O)&&(r(y,D),y=h.hasNext()?h.getNext():null),y?R.j(im(y)):R.done()}).next(()=>{for(;y;)r(y,null),y=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const a=[t.popLast().toArray(),t.lastSegment(),N_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return md(e).W(IDBKeyRange.bound(a,c,!0)).next(h=>{let y=qs();for(const w of h){const D=this.jn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);y=y.insert(D.key,D)}return y})}getAllFromCollectionGroup(e,t,r,a){let c=qs();const h=L_(t,r),y=L_(t,js.max());return md(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,y,!0)},(w,D,R)=>{const O=this.jn(Ve.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);c=c.insert(O.key,O),c.size===a&&R.done()}).next(()=>c)}newChangeBuffer(e){return new mx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return K0(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Qn(e,t){return K0(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function(n,e){let t;if(e.document)t=k0(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),a=cd(e.noDocument.readTime);t=Rn.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Ve.fromSegments(e.unknownDocument.path),a=cd(e.unknownDocument.version);t=Rn.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime(function(r){const a=new Pn(r[0],r[1]);return gt.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(gt.min()))return r}return Rn.newInvalidDocument(e)}}function F_(n){return new gx(n)}class mx extends Df{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new $a(r=>r.toString(),(r,a)=>r.isEqual(a))}applyChanges(e){const t=[];let r=0,a=new _n((c,h)=>Pt(c.canonicalString(),h.canonicalString()));return this.changes.forEach((c,h)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),h.isValidDocument()){const w=OD(this.Yn.It,h);a=a.add(c.path.popLast()),r+=wf(w)-y.size,t.push(this.Yn.addEntry(e,c,w))}else if(r-=y.size,this.trackRemovals){const w=OD(this.Yn.It,h.convertToNoDocument(gt.min()));t.push(this.Yn.addEntry(e,c,w))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:a})=>(a.forEach((c,h)=>{this.Xn.set(c,{size:h,readTime:r.get(c).readTime})}),r))}}function K0(n){return Lr(n,"remoteDocumentGlobal")}function md(n){return Lr(n,"remoteDocumentsV14")}function im(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function L_(n,e){const t=e.documentKey.path.toArray();return[n,N_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Y0(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<r.length-2;++c)if(a=Pt(t[c],r[c]),a)return a;return a=Pt(t.length,r.length),a||(a=Pt(t[t.length-2],r[r.length-2]),a||Pt(t[t.length-1],r[r.length-1]))}class GD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sm{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(r=a,this.getBaseDocument(e,t,r))).next(a=>(null!==r&&ra(r.mutation,a,Hs.empty(),Pn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ht()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ht()){const a=ms();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,r).next(c=>{let h=yt();return c.forEach((y,w)=>{h=h.insert(y,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ht()))}populateOverlays(e,t,r){const a=[];return r.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,y)=>{t.set(h,y)})})}computeViews(e,t,r,a){let c=qs();const h=$g(),y=$g();return t.forEach((w,D)=>{const R=r.get(D.key);a.has(D.key)&&(void 0===R||R.mutation instanceof Gs)?c=c.insert(D.key,D):void 0!==R&&(h.set(D.key,R.mutation.getFieldMask()),ra(R.mutation,D,R.mutation.getFieldMask(),Pn.now()))}),this.recalculateAndSaveOverlays(e,c).next(w=>(w.forEach((D,R)=>h.set(D,R)),t.forEach((D,R)=>{var O;return y.set(D,new GD(R,null!==(O=h.get(D))&&void 0!==O?O:null))}),y))}recalculateAndSaveOverlays(e,t){const r=$g();let a=new or((h,y)=>h-y),c=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const y of h)y.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let R=r.get(w)||Hs.empty();R=y.applyToLocalView(D,R),r.set(w,R);const O=(a.get(y.batchId)||Ht()).add(w);a=a.insert(y.batchId,O)})}).next(()=>{const h=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),D=w.key,R=w.value,O=cD();R.forEach(G=>{if(!c.has(G)){const q=hf(t.get(G),r.get(G));null!==q&&O.set(G,q),c=c.add(G)}}),h.push(this.documentOverlayCache.saveOverlays(e,D,O))}return oe.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ve.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):D0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var a}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):oe.resolve(ms());let y=-1,w=c;return h.next(D=>oe.forEach(D,(R,O)=>(y<O.largestBatchId&&(y=O.largestBatchId),c.get(R)?oe.resolve():this.getBaseDocument(e,R,O).next(G=>{w=w.insert(R,G)}))).next(()=>this.populateOverlays(e,D,c)).next(()=>this.computeViews(e,w,D,Ht())).next(R=>({batchId:y,changes:jS(R)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next(r=>{let a=yt();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const a=t.collectionGroup;let c=yt();return this.indexManager.getCollectionParents(e,a).next(h=>oe.forEach(h,y=>{const w=(D=t,R=y.child(a),new Ru(R,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,R;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((R,O)=>{c=c.insert(R,O)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(c=>{c.forEach((y,w)=>{const D=w.getKey();null===a.get(D)&&(a=a.insert(D,Rn.newInvalidDocument(D)))});let h=yt();return a.forEach((y,w)=>{const D=c.get(y);void 0!==D&&ra(D.mutation,w,Hs.empty(),Pn.now()),iD(t,w)&&(h=h.insert(y,w))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(Rn.newInvalidDocument(t))}}class Q0{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:di(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:O_(r.bundledQuery),readTime:di(r.readTime)}),oe.resolve();var r}}class OM{constructor(){this.overlays=new or(Ve.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ms();return oe.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&r.set(a,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((a,c)=>{this.ue(e,t,c)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.es.get(r);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const a=ms(),c=t.length+1,h=new Ve(t.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const w=y.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===c&&w.largestBatchId>r&&a.set(w.getKey(),w)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new or((D,R)=>D-R);const h=this.overlays.getIterator();for(;h.hasNext();){const D=h.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let R=c.get(D.largestBatchId);null===R&&(R=ms(),c=c.insert(D.largestBatchId,R)),R.set(D.getKey(),D)}}const y=ms(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,R)=>y.set(D,R)),!(y.size()>=a)););return oe.resolve(y)}ue(e,t,r){const a=this.overlays.get(r.key);if(null!==a){const h=this.es.get(a.largestBatchId).delete(r.key);this.es.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new j0(t,r));let c=this.es.get(t);void 0===c&&(c=Ht(),this.es.set(t,c)),this.es.set(t,c.add(r.key))}}class V_{constructor(){this.ns=new _n(Qr.ss),this.rs=new _n(Qr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Qr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Qr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ve(new en([])),r=new Qr(t,e),a=new Qr(t,e+1),c=[];return this.rs.forEachInRange([r,a],h=>{this.cs(h),c.push(h.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ve(new en([])),r=new Qr(t,e),a=new Qr(t,e+1);let c=Ht();return this.rs.forEachInRange([r,a],h=>{c=c.add(h.key)}),c}containsKey(e){const t=new Qr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ve.comparator(e.key,t.key)||Pt(e._s,t._s)}static os(e,t){return Pt(e._s,t._s)||Ve.comparator(e.key,t.key)}}class qD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _n(Qr.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,a){const c=this.ws;this.ws++;const h=new B0(c,t,r,a);this.mutationQueue.push(h);for(const y of a)this.gs=this.gs.add(new Qr(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(h)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qr(t,0),a=new Qr(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([r,a],h=>{const y=this.ys(h._s);c.push(y)}),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(Pt);return t.forEach(a=>{const c=new Qr(a,0),h=new Qr(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,h],y=>{r=r.add(y._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Ve.isDocumentKey(c)||(c=c.child(""));const h=new Qr(new Ve(c),0);let y=new _n(Pt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===a&&(y=y.add(w._s)),!0)},h),oe.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(r=>{const a=this.ys(r);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){mt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,a=>{const c=new Qr(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Qr(t,0),a=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U_{constructor(e){this.Es=e,this.docs=new or(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach(a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Rn.newInvalidDocument(a))}),oe.resolve(r)}getAllFromCollection(e,t,r){let a=qs();const c=new Ve(t.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:y,value:{document:w}}=h.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||p_(BC(w),r)<=0||(a=a.insert(w.key,w.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,a){Xe()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zD(this)}getSize(e){return oe.resolve(this.size)}}class zD extends Df{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class yx{constructor(e){this.persistence=e,this.Rs=new $a(t=>nd(t),Fg),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new V_,this.targetCount=0,this.vs=jc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,a)=>t(a)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new jc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.Rs.forEach((h,y)=>{y.sequenceNumber<=t&&null===r.get(y.targetId)&&(this.Rs.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),oe.waitFor(c).next(()=>a)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class B_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new gs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new yx(this),this.indexManager=new dx,this.remoteDocumentCache=new U_(r=>this.referenceDelegate.xs(r)),this.It=new ND(t),this.Ns=new Q0(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new qD(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const a=new J0(this.Ss.next());return this.referenceDelegate.ks(),r(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class J0 extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class j_{constructor(e){this.persistence=e,this.Fs=new V_,this.$s=null}static Bs(e){return new j_(e)}get Ls(){if(this.$s)return this.$s;throw Xe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const a=Ve.fromPath(r);return this.Us(e,a).next(c=>{c||t.removeEntry(a,gt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class _x{constructor(e){this.It=e}$(e,t,r,a){const c=new m_("createOrUpgrade",t);var y;r<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R_,{unique:!0}),y.createObjectStore("documentMutations"),X0(e),function(y){y.createObjectStore("remoteDocuments")}(e));let h=oe.resolve();return r<3&&a>=3&&(0!==r&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),X0(e)),h=h.next(()=>function(y){const w=y.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(c))),r<4&&a>=4&&(0!==r&&(h=h.next(()=>function(y,w){return w.store("mutations").W().next(D=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R_,{unique:!0});const R=w.store("mutations"),O=D.map(G=>R.put(G));return oe.waitFor(O)})}(e,c))),h=h.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&a>=5&&(h=h.next(()=>this.qs(c))),r<6&&a>=6&&(h=h.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),r<7&&a>=7&&(h=h.next(()=>this.Gs(c))),r<8&&a>=8&&(h=h.next(()=>this.Qs(e,c))),r<9&&a>=9&&(h=h.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&a>=10&&(h=h.next(()=>this.js(c))),r<11&&a>=11&&(h=h.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&a>=12&&(h=h.next(()=>{!function(y){const w=y.createObjectStore("documentOverlays",{keyPath:rx});w.createIndex("collectionPathOverlayIndex",NM,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",ix,{unique:!1})}(e)})),r<13&&a>=13&&(h=h.next(()=>function(y){const w=y.createObjectStore("remoteDocumentsV14",{keyPath:DD});w.createIndex("documentKeyIndex",sa),w.createIndex("collectionGroupIndex",V0)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&a>=14&&(h=h.next(()=>this.zs(e,c))),r<15&&a>=15&&(h=h.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:ex}).createIndex("sequenceNumberIndex",tx,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:nx}).createIndex("documentKeyIndex",xD,{unique:!1})}(e))),h}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,a)=>{t+=wf(a)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(a=>oe.forEach(a,c=>{const h=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",h).next(y=>oe.forEach(y,w=>{mt(w.userId===c.userId);const D=ld(this.It,w);return z0(e,c.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return r.Z((h,y)=>{const w=new en(h),D=[0,Ji(w)];c.push(t.get(D).next(R=>R?oe.resolve():t.put({targetId:0,path:Ji(w),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>oe.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:SD});const r=t.store("collectionParents"),a=new VD,c=h=>{if(a.add(h)){const y=h.lastSegment(),w=h.popLast();return r.put({collectionId:y,parent:Ji(w)})}};return t.store("remoteDocuments").Z({X:!0},(h,y)=>{const w=new en(h);return c(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([h,y,w],D)=>{const R=ia(y);return c(R.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,a)=>{const c=Qg(a),h=vf(this.It,c);return t.put(h)})}Ws(e,t){const r=t.store("remoteDocuments"),a=[];return r.Z((c,h)=>{const y=t.store("remoteDocumentsV14"),w=(D=h,D.document?new Ve(en.fromString(D.document.name).popFirst(5)):D.noDocument?Ve.fromSegments(D.noDocument.path):D.unknownDocument?Ve.fromSegments(D.unknownDocument.path):Xe()).path.toArray();var D;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};a.push(y.put(R))}).next(()=>oe.waitFor(a))}zs(e,t){const r=t.store("mutations"),a=F_(this.It),c=new B_(j_.Bs,this.It.re);return r.W().next(h=>{const y=new Map;return h.forEach(w=>{var D;let R=null!==(D=y.get(w.userId))&&void 0!==D?D:Ht();ld(this.It,w).keys().forEach(O=>R=R.add(O)),y.set(w.userId,R)}),oe.forEach(y,(w,D)=>{const R=new Or(D),O=P_.oe(this.It,R),G=c.getIndexManager(R),q=rm.oe(R,this.It,G,c.referenceDelegate);return new sm(a,q,O,G).recalculateAndSaveOverlaysForDocumentKeys(new MD(t,gs.at),w).next()})})}}function X0(n){n.createObjectStore("targetDocuments",{keyPath:TD}).createIndex("documentTargetsIndex",AD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",XS,{unique:!0}),n.createObjectStore("targetGlobal")}const H_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $_{constructor(e,t,r,a,c,h,y,w,D,R,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=c,this.window=h,this.document=y,this.Js=D,this.Ys=R,this.Xs=O,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=G=>Promise.resolve(),!$_.C())throw new Ce(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new px(this,a),this.ii=t+"main",this.It=new ND(w),this.ri=new ta(this.ii,this.Xs,new _x(this.It)),this.Cs=new $D(this.referenceDelegate,this.It),this.remoteDocumentCache=F_(this.It),this.Ns=new kD,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===R&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(de.FAILED_PRECONDITION,H_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new gs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,fe.Z)(function*(a){if(t.started)return e(a)});return function(a){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Au(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return om(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return am(e).delete(this.clientId)}yi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const a=Lr(r,"clientMetadata");return a.W().next(c=>{const h=e.Ii(c,18e5),y=c.filter(w=>-1===h.indexOf(w));return oe.forEach(y,w=>a.delete(w.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):om(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ce(de.FAILED_PRECONDITION,H_);return!1}}return!(!this.networkEnabled||!this.inForeground)||am(e).W().next(r=>void 0===this.Ii(r,5e3).find(a=>{if(this.clientId!==a.clientId){const h=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||h&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new MD(t,gs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>am(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return rm.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new G0(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return P_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(h=this.Xs)?ox:14===h?U0:13===h?sx:12===h?_f:11===h?RD:void Xe();var h;let y;return this.ri.runTransaction(e,a,c,w=>(y=new MD(w,this.Ss?this.Ss.next():gs.at),"readwrite-primary"===t?this.fi(y).next(D=>!!D||this.di(y)).next(D=>{if(!D)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ce(de.FAILED_PRECONDITION,_0);return r(y)}).next(D=>this.wi(y).next(()=>D)):this.Vi(y).next(()=>r(y)))).then(w=>(y.raiseOnCommittedEvent(),w))}Vi(e){return om(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(de.FAILED_PRECONDITION,H_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return om(e).put("owner",t)}static C(){return ta.C()}_i(e){const t=om(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Zt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function om(n){return Lr(n,"owner")}function am(n){return Lr(n,"clientMetadata")}function G_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class eb{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=a}static Ci(e,t){let r=Ht(),a=Ht();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new eb(e,t.fromCache,r,a)}}class WD{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,r)).next(c=>c||this.Mi(e,t))}ki(e,t){if(C_(t))return oe.resolve(null);let r=xi(t);return this.indexManager.getIndexType(e,r).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=A_(t,null,"F"),r=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const h=Ht(...c);return this.Ni.getDocuments(e,h).next(y=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,y);return this.$i(t,D,h,w.readTime)?this.ki(e,A_(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,a){return C_(t)||a.isEqual(gt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(c=>{const h=this.Fi(t,c);return this.$i(t,h,r,a)?this.Mi(e,t):(MC()<=Bs.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),of(t)),this.Bi(e,h,t,UC(a,-1)))})}Fi(e,t){let r=new _n(un(e));return t.forEach((a,c)=>{iD(e,c)&&(r=r.add(c))}),r}$i(e,t,r,a){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return MC()<=Bs.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",of(t)),this.Ni.getDocumentsMatchingQuery(e,t,js.min())}Bi(e,t,r,a){return this.Ni.getDocumentsMatchingQuery(e,r,a).next(c=>(t.forEach(h=>{c=c.insert(h.key,h)}),c))}}class ZD{constructor(e,t,r,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new or(Pt),this.qi=new $a(c=>nd(c),Fg),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sm(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function KD(n,e,t,r){return new ZD(n,e,t,r)}function tb(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,fe.Z)(function*(n,e){const t=Le(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const h=[],y=[];let w=Ht();for(const D of a){h.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}for(const D of c){y.push(D.batchId);for(const R of D.mutations)w=w.add(R.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:h,addedBatchIds:y}))})})}),q_.apply(this,arguments)}function YD(n,e){const t=Le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(h,y,w,D){const R=w.batch,O=R.keys();let G=oe.resolve();return O.forEach(q=>{G=G.next(()=>D.getEntry(y,q)).next(ee=>{const Te=w.docVersions.get(q);mt(null!==Te),ee.version.compareTo(Te)<0&&(R.applyToRemoteDocument(ee,w),ee.isValidDocument()&&(ee.setReadTime(w.commitVersion),D.addEntry(ee)))})}),G.next(()=>h.mutationQueue.removeMutationBatch(y,R))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let y=Ht();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(y=y.add(h.batch.mutations[w].key));return y}(e))).next(()=>t.localDocuments.getDocuments(r,a))})}function nb(n){const e=Le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function vx(n,e){const t=Le(n),r=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((R,O)=>{const G=a.get(O);if(!G)return;y.push(t.Cs.removeMatchingKeys(c,R.removedDocuments,O).next(()=>t.Cs.addMatchingKeys(c,R.addedDocuments,O)));let q=G.withSequenceNumber(c.currentSequenceNumber);var ee,Te,Pe;e.targetMismatches.has(O)?q=q.withResumeToken(Pr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):R.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(R.resumeToken,r)),a=a.insert(O,q),Te=q,Pe=R,(0===(ee=G).resumeToken.approximateByteSize()||Te.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Pe.addedDocuments.size+Pe.modifiedDocuments.size+Pe.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,q))});let w=qs(),D=Ht();if(e.documentUpdates.forEach(R=>{e.resolvedLimboDocuments.has(R)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,R))}),y.push(QD(c,h,e.documentUpdates).next(R=>{w=R.Wi,D=R.zi})),!r.isEqual(gt.min())){const R=t.Cs.getLastRemoteSnapshotVersion(c).next(O=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,r));y.push(R)}return oe.waitFor(y).next(()=>h.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,w,D)).next(()=>w)}).then(c=>(t.Ui=a,c))}function QD(n,e,t){let r=Ht(),a=Ht();return t.forEach(c=>r=r.add(c)),e.getEntries(n,r).next(c=>{let h=qs();return t.forEach((y,w)=>{const D=c.get(y);w.isFoundDocument()!==D.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(gt.min())?(e.removeEntry(y,w.readTime),h=h.insert(y,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),h=h.insert(y,w)):ke("LocalStore","Ignoring outdated watch update for ",y,". Current version:",D.version," Watch version:",w.version)}),{Wi:h,zi:a}})}function Ex(n,e){const t=Le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yd(n,e){const t=Le(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return t.Cs.getTargetData(r,e).next(c=>c?(a=c,oe.resolve(a)):t.Cs.allocateTargetId(r).next(h=>(a=new Bc(e,h,0,r.currentSequenceNumber),t.Cs.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=t.Ui.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function um(n,e,t){return JD.apply(this,arguments)}function JD(){return JD=(0,fe.Z)(function*(n,e,t){const r=Le(n),a=r.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Au(h))throw h;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ui=r.Ui.remove(e),r.qi.delete(a.target)}),JD.apply(this,arguments)}function rb(n,e,t){const r=Le(n);let a=gt.min(),c=Ht();return r.persistence.runTransaction("Execute query","readonly",h=>function(y,w,D){const R=Le(y),O=R.qi.get(D);return void 0!==O?oe.resolve(R.Ui.get(O)):R.Cs.getTargetData(w,D)}(r,h,xi(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(h,y.targetId).next(w=>{c=w})}).next(()=>r.Li.getDocumentsMatchingQuery(h,e,t?a:gt.min(),t?c:Ht())).next(y=>(Ix(r,af(e),y),{documents:y,Hi:c})))}function bx(n,e){const t=Le(n),r=Le(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>r.se(c,e).next(h=>h?h.target:null))}function wx(n,e){const t=Le(n),r=t.Ki.get(e)||gt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,UC(r,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Ix(t,e,a),a))}function Ix(n,e,t){let r=n.Ki.get(e)||gt.min();t.forEach((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),n.Ki.set(e,r)}function XD(){return XD=(0,fe.Z)(function*(n,e,t,r){const a=Le(n);let c=Ht(),h=qs();for(const D of t){const R=e.Ji(D.metadata.name);D.document&&(c=c.add(R));const O=e.Yi(D);O.setReadTime(e.Xi(D.metadata.readTime)),h=h.insert(R,O)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),w=yield yd(a,(D=r,xi(id(en.fromString(`__bundle__/docs/${D}`)))));var D;return a.persistence.runTransaction("Apply bundle documents","readwrite",D=>QD(D,y,h).next(R=>(y.apply(D),R)).next(R=>a.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>a.Cs.addMatchingKeys(D,c,w.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(D,R.Wi,R.zi)).next(()=>R.Wi)))}),XD.apply(this,arguments)}function PM(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,fe.Z)(function*(n,e,t=Ht()){const r=yield yd(n,xi(O_(e.bundledQuery))),a=Le(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const h=di(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return a.Ns.saveNamedQuery(c,e);const y=r.withResumeToken(Pr.EMPTY_BYTE_STRING,h);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,r.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),eT.apply(this,arguments)}function Cx(n,e){return`firestore_clients_${n}_${e}`}function Dx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tT(n,e){return`firestore_targets_${n}_${e}`}class ib{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Zi(e,t,r){const a=JSON.parse(r);let c,h="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(c=new Ce(a.error.code,a.error.message))),h?new ib(e,t,a.state,c):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class z_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let a,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(a=new Ce(r.error.code,r.error.message))),c?new z_(e,r.state,a):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let a="object"==typeof r&&r.activeTargetIds instanceof Array,c=Fr();for(let h=0;a&&h<r.activeTargetIds.length;++h)a=qC(r.activeTargetIds[h]),c=c.add(r.activeTargetIds[h]);return a?new sb(e,c):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nT(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ob{constructor(){this.activeTargetIds=Fr()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ab{constructor(e,t,r,a,c){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new or(Pt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=Cx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new ob),this.lr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(Cx(e.persistenceKey,a));if(c){const h=sb.Zi(a,c);h&&(e.ur=e.ur.insert(h.clientId,h))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const a=e.yr(r);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tT(this.persistenceKey,e));if(r){const a=z_.Zi(e,r);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(a=>{this.Er(a)}),this.currentUser=e,r.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const a=t.vr(r.key);return t.Vr(a,null)}{const a=t.Sr(r.key,r.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const a=t.Dr(r.key,r.newValue);if(a)return t.Cr(a)}}else if(t._r.test(r.key)){if(null!==r.newValue){const a=t.Nr(r.key,r.newValue);if(a)return t.kr(a)}}else if(r.key===t.wr){if(null!==r.newValue){const a=t.yr(r.newValue);if(a)return t.pr(a)}}else if(r.key===t.hr){const a=function(c){let h=gs.at;if(null!=c)try{const y=JSON.parse(c);mt("number"==typeof y),h=y}catch(y){vr("SharedClientState","Failed to read sequence number from WebStorage",y)}return h}(r.newValue);a!==gs.at&&t.sequenceNumberHandler(a)}else if(r.key===t.mr){const a=t.Or(r.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const a=new ib(this.currentUser,e,t,r),c=Dx(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=Dx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const a=tT(this.persistenceKey,e),c=new z_(e,t,r);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return sb.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),a=Number(r[1]);return ib.Zi(new Or(void 0!==r[2]?r[2]:null),a,t)}Nr(e,t){const r=this._r.exec(e),a=Number(r[1]);return z_.Zi(a,t)}yr(e){return nT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(r),h=[],y=[];return c.forEach(w=>{a.has(w)||h.push(w)}),a.forEach(w=>{c.has(w)||y.push(w)}),this.syncEngine.Br(h,y).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Fr();return e.forEach((r,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class rT{constructor(){this.Lr=new ob,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new ob,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FM{qr(e){}shutdown(){}}class Tx{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const LM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ax{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Sx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,a,c){const h=this.ho(e,t);ke("RestConnection","Sending: ",h,r);const y={};return this.lo(y,a,c),this.fo(e,h,y,r).then(w=>(ke("RestConnection","Received: ",w),w),w=>{throw Sc("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}_o(e,t,r,a,c,h){return this.ao(e,t,r,a,c)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),r&&r.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${LM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,a){return new Promise((c,h)=>{const y=new xC;y.setWithCredentials(!0),y.listenOnce(ES.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Yl.NO_ERROR:const D=y.getResponseJson();ke("Connection","XHR received:",JSON.stringify(D)),c(D);break;case Yl.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),h(new Ce(de.DEADLINE_EXCEEDED,"Request time out"));break;case Yl.HTTP_ERROR:const R=y.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',R,"response text:",y.getResponseText()),R>0){const O=y.getResponseJson().error;if(O&&O.status&&O.message){const G=function(q){const ee=q.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ee)>=0?ee:de.UNKNOWN}(O.status);h(new Ce(G,O.message))}else h(new Ce(de.UNKNOWN,"Server responded with status "+y.getStatus()))}else h(new Ce(de.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(a);y.send(t,"POST",w,r,15)})}wo(e,t,r){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=vS(),h=Cg(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new SC({})),this.lo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const w=a.join("");ke("Connection","Creating WebChannel: "+w,y);const D=c.createWebChannel(w,y);let R=!1,O=!1;const G=new Ax({Hr:ee=>{O?ke("Connection","Not sending because WebChannel is closed:",ee):(R||(ke("Connection","Opening WebChannel transport."),D.open(),R=!0),ke("Connection","WebChannel sending:",ee),D.send(ee))},Jr:()=>D.close()}),q=(ee,Te,Pe)=>{ee.listen(Te,rt=>{try{Pe(rt)}catch(It){setTimeout(()=>{throw It},0)}})};return q(D,Dg.EventType.OPEN,()=>{O||ke("Connection","WebChannel transport opened.")}),q(D,Dg.EventType.CLOSE,()=>{O||(O=!0,ke("Connection","WebChannel transport closed"),G.io())}),q(D,Dg.EventType.ERROR,ee=>{O||(O=!0,Sc("Connection","WebChannel transport errored:",ee),G.io(new Ce(de.UNAVAILABLE,"The operation could not be completed")))}),q(D,Dg.EventType.MESSAGE,ee=>{var Te;if(!O){const Pe=ee.data[0];mt(!!Pe);const rt=Pe,It=rt.error||(null===(Te=rt[0])||void 0===Te?void 0:Te.error);if(It){ke("Connection","WebChannel received error:",It);const _t=It.status;let Ct=function(zt){const hi=ar[zt];if(void 0!==hi)return uD(hi)}(_t),Lt=It.message;void 0===Ct&&(Ct=de.INTERNAL,Lt="Unknown error status: "+_t+" with message "+It.message),O=!0,G.io(new Ce(Ct,Lt)),D.close()}else ke("Connection","WebChannel received:",Pe),G.ro(Pe)}}),q(h,bS.STAT_EVENT,ee=>{ee.stat===AC.PROXY?ke("Connection","Detected buffering proxy"):ee.stat===AC.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.so()},0),G}}function iT(){return"undefined"!=typeof window?window:null}function ub(){return"undefined"!=typeof document?document:null}function W_(n){return new zS(n,!0)}class sT{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-r);a>0&&ke("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xx{constructor(e,t,r,a,c,h,y,w){this.Hs=e,this.vo=r,this.Vo=a,this.So=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new sT(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,fe.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,fe.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.Do===t&&this.Qo(r,a)},r=>{e(()=>{const a=new Ce(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(a)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{r(()=>this.jo(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,fe.Z)(function*(){e.state=0,e.start()}))}jo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rx extends xx{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.It=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),a=e.targetChange.targetIds||[],c=function(w,D){return w.gt?(mt(void 0===D||"string"==typeof D),Pr.fromBase64String(D||"")):(mt(void 0===D||D instanceof Uint8Array),Pr.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&function(w){const D=void 0===w.code?de.UNKNOWN:uD(w.code);return new Ce(D,w.message||"")}(h);t=new dD(r,a,c,y||null)}else if("documentChange"in e){const r=e.documentChange,a=Ga(n,r.document.name),c=di(r.document.updateTime),h=new li({mapValue:{fields:r.document.fields}}),y=Rn.newFoundDocument(a,c,h);t=new gf(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,a=Ga(n,r.document),c=r.readTime?di(r.readTime):gt.min(),h=Rn.newNoDocument(a,c);t=new gf([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,a=Ga(n,r.document);t=new gf([],r.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,c=new aD(r.count||0);t=new lD(r.targetId,c)}}var w;return t}(this.It,e),r=function(a){if(!("targetChange"in a))return gt.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?gt.min():c.readTime?di(c.readTime):gt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Nu(this.It),t.addTarget=function(a,c){let h;const y=c.target;return h=b_(y)?{documents:vD(a,y)}:{query:F0(a,y)},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?h.resumeToken=x_(a,c.resumeToken):c.snapshotVersion.compareTo(gt.min())>0&&(h.readTime=mf(a,c.snapshotVersion.toTimestamp())),h}(this.It,e);const r=function(n,e){const t=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Nu(this.It),t.removeTarget=e,this.Lo(t)}}class VM extends xx{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.It=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,a){let c=di(r.updateTime?r.updateTime:a);return c.isEqual(gt.min())&&(c=di(a)),new LS(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.tu(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Nu(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yf(this.It,r))};this.Lo(t)}}class Mx extends class{}{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.It=a,this.su=!1}iu(){if(this.su)throw new Ce(de.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.ao(e,t,r,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(de.UNKNOWN,a.toString())})}_o(e,t,r,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.So._o(e,t,r,c,h,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(de.UNKNOWN,c.toString())})}terminate(){this.su=!0}}class oT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(vr(t),this.uu=!1):ke("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Nx{constructor(e,t,r,a,c){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.qr(y=>{r.enqueueAndForget((0,fe.Z)(function*(){var w;Gc(h)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,fe.Z)(function*(D){const R=Le(D);R.wu.add(4),yield _d(R),R.yu.set("Unknown"),R.wu.delete(4),yield cm(R)}),function(D){return w.apply(this,arguments)})(h))}))}),this.yu=new oT(r,a)}}function cm(n){return lm.apply(this,arguments)}function lm(){return lm=(0,fe.Z)(function*(n){if(Gc(n))for(const e of n.mu)yield e(!0)}),lm.apply(this,arguments)}function _d(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,fe.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Z_.apply(this,arguments)}function dm(n,e){const t=Le(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),aT(t)?Q_(t):Af(t).Oo()&&Y_(t,e))}function K_(n,e){const t=Le(n),r=Af(t);t._u.delete(e),r.Oo()&&hm(t,e),0===t._u.size&&(r.Oo()?r.$o():Gc(t)&&t.yu.set("Unknown"))}function Y_(n,e){n.pu.Mt(e.targetId),Af(n).Ho(e)}function hm(n,e){n.pu.Mt(e),Af(n).Jo(e)}function Q_(n){n.pu=new GS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),Af(n).start(),n.yu.cu()}function aT(n){return Gc(n)&&!Af(n).ko()&&n._u.size>0}function Gc(n){return 0===Le(n).wu.size}function Ox(n){n.pu=void 0}function kx(n){return uT.apply(this,arguments)}function uT(){return uT=(0,fe.Z)(function*(n){n._u.forEach((e,t)=>{Y_(n,e)})}),uT.apply(this,arguments)}function J_(n,e){return lb.apply(this,arguments)}function lb(){return lb=(0,fe.Z)(function*(n,e){Ox(n),aT(n)?(n.yu.lu(e),Q_(n)):n.yu.set("Unknown")}),lb.apply(this,arguments)}function UM(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,fe.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof dD&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(a,c){const h=c.cause;for(const y of c.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,h),a._u.delete(y),a.pu.removeTarget(y))}),function(a,c){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tf(n,r)}else if(e instanceof gf?n.pu.Gt(e):e instanceof lD?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(gt.min()))try{const r=yield nb(n.localStore);t.compareTo(r)>=0&&(yield function(a,c){const h=a.pu.te(c);return h.targetChanges.forEach((y,w)=>{if(y.resumeToken.approximateByteSize()>0){const D=a._u.get(w);D&&a._u.set(w,D.withResumeToken(y.resumeToken,c))}}),h.targetMismatches.forEach(y=>{const w=a._u.get(y);if(!w)return;a._u.set(y,w.withResumeToken(Pr.EMPTY_BYTE_STRING,w.snapshotVersion)),hm(a,y);const D=new Bc(w.target,y,1,w.sequenceNumber);Y_(a,D)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield Tf(n,r)}var r}),cT.apply(this,arguments)}function Tf(n,e,t){return db.apply(this,arguments)}function db(){return db=(0,fe.Z)(function*(n,e,t){if(!Au(e))throw e;n.wu.add(1),yield _d(n),n.yu.set("Offline"),t||(t=()=>nb(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield cm(n)}))}),db.apply(this,arguments)}function Px(n,e){return e().catch(t=>Tf(n,t,e))}function fm(n){return hb.apply(this,arguments)}function hb(){return hb=(0,fe.Z)(function*(n){const e=Le(n),t=qa(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;BM(e);)try{const a=yield Ex(e.localStore,r);if(null===a){0===e.du.length&&t.$o();break}r=a.batchId,lT(e,a)}catch(a){yield Tf(e,a)}dT(e)&&Fx(e)}),hb.apply(this,arguments)}function BM(n){return Gc(n)&&n.du.length<10}function lT(n,e){n.du.push(e);const t=qa(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function dT(n){return Gc(n)&&!qa(n).ko()&&n.du.length>0}function Fx(n){qa(n).start()}function jM(n){return fb.apply(this,arguments)}function fb(){return fb=(0,fe.Z)(function*(n){qa(n).nu()}),fb.apply(this,arguments)}function pm(n){return pb.apply(this,arguments)}function pb(){return pb=(0,fe.Z)(function*(n){const e=qa(n);for(const t of n.du)e.Zo(t.mutations)}),pb.apply(this,arguments)}function Lx(n,e,t){return gb.apply(this,arguments)}function gb(){return gb=(0,fe.Z)(function*(n,e,t){const r=n.du.shift(),a=Yg.from(r,e,t);yield Px(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield fm(n)}),gb.apply(this,arguments)}function mb(n,e){return yb.apply(this,arguments)}function yb(){return yb=(0,fe.Z)(function*(n,e){var t;e&&qa(n).Xo&&(yield(t=(0,fe.Z)(function*(r,a){if(Hg(c=a.code)&&c!==de.ABORTED){const h=r.du.shift();qa(r).Fo(),yield Px(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,a)),yield fm(r)}var c}),function(r,a){return t.apply(this,arguments)})(n,e)),dT(n)&&Fx(n)}),yb.apply(this,arguments)}function _s(n,e){return _b.apply(this,arguments)}function _b(){return _b=(0,fe.Z)(function*(n,e){const t=Le(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Gc(t);t.wu.add(3),yield _d(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield cm(t)}),_b.apply(this,arguments)}function gm(n,e){return vb.apply(this,arguments)}function vb(){return vb=(0,fe.Z)(function*(n,e){const t=Le(n);e?(t.wu.delete(2),yield cm(t)):e||(t.wu.add(2),yield _d(t),t.yu.set("Unknown"))}),vb.apply(this,arguments)}function Af(n){return n.Iu||(n.Iu=function(e,t,r){const a=Le(e);return a.iu(),new Rx(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:kx.bind(null,n),Zr:J_.bind(null,n),zo:UM.bind(null,n)}),n.mu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Iu.Fo(),aT(n)?Q_(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Ox(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function qa(n){return n.Tu||(n.Tu=function(e,t,r){const a=Le(e);return a.iu(),new VM(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,r)}(n.datastore,n.asyncQueue,{Yr:jM.bind(null,n),Zr:mb.bind(null,n),eu:pm.bind(null,n),tu:Lx.bind(null,n)}),n.mu.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Tu.Fo(),yield fm(n)):(yield n.Tu.stop(),n.du.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class X_{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,y=new X_(e,t,h,a,c);return y.start(r),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vd(n,e){if(vr("AsyncQueue",`${e}: ${n}`),Au(n))return new Ce(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Sf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=yt(),this.sortedSet=new or(this.comparator)}static emptySet(e){return new Sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Eb{constructor(){this.Eu=new or(Ve.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Xe():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ed{constructor(e,t,r,a,c,h,y,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,a,c){const h=[];return t.forEach(y=>{h.push({type:0,doc:y})}),new Ed(e,t,Sf.emptySet(t),h,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class Vx{constructor(){this.Ru=void 0,this.listeners=[]}}class Ux{constructor(){this.queries=new $a(e=>Bg(e),sf),this.onlineState="Unknown",this.bu=new Set}}function mm(n,e){return ev.apply(this,arguments)}function ev(){return ev=(0,fe.Z)(function*(n,e){const t=Le(n),r=e.query;let a=!1,c=t.queries.get(r);if(c||(a=!0,c=new Vx),a)try{c.Ru=yield t.onListen(r)}catch(h){const y=vd(h,`Initialization of query '${of(e.query)}' failed`);return void e.onError(y)}t.queries.set(r,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.vu(c.Ru)&&bb(t)}),ev.apply(this,arguments)}function tv(n,e){return ym.apply(this,arguments)}function ym(){return ym=(0,fe.Z)(function*(n,e){const t=Le(n),r=e.query;let a=!1;const c=t.queries.get(r);if(c){const h=c.listeners.indexOf(e);h>=0&&(c.listeners.splice(h,1),a=0===c.listeners.length)}if(a)return t.queries.delete(r),t.onUnlisten(r)}),ym.apply(this,arguments)}function Bx(n,e){const t=Le(n);let r=!1;for(const a of e){const h=t.queries.get(a.query);if(h){for(const y of h.listeners)y.vu(a)&&(r=!0);h.Ru=a}}r&&bb(t)}function oa(n,e,t){const r=Le(n),a=r.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);r.queries.delete(e)}function bb(n){n.bu.forEach(e=>{e.next()})}class hT{constructor(e,t,r){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)3!==a.type&&r.push(a);e=new Ed(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ed.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class jx{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class Hx{constructor(e){this.It=e}Ji(e){return Ga(this.It,e)}Yi(e){return e.metadata.exists?k0(this.It,e.document,!1):Rn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return di(e)}}class $x{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fT(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=en.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Hx(this.It);for(const a of e)if(a.metadata.queries){const c=r.Ji(a.metadata.name);for(const h of a.metadata.queries){const y=(t.get(h)||Ht()).add(c);t.set(h,y)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function(n,e,t,r){return XD.apply(this,arguments)}(e.localStore,new Hx(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const a of e.queries)yield PM(e.localStore,a,r.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function fT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pT{constructor(e){this.key=e}}class Gx{constructor(e){this.key=e}}class gT{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ht(),this.mutatedKeys=Ht(),this.Gu=un(e),this.Qu=new Sf(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Eb,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,y=!1;const w="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,D="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((R,O)=>{const G=a.get(R),q=iD(this.query,O)?O:null,ee=!!G&&this.mutatedKeys.has(G.key),Te=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Pe=!1;G&&q?G.data.isEqual(q.data)?ee!==Te&&(r.track({type:3,doc:q}),Pe=!0):this.Hu(G,q)||(r.track({type:2,doc:q}),Pe=!0,(w&&this.Gu(q,w)>0||D&&this.Gu(q,D)<0)&&(y=!0)):!G&&q?(r.track({type:0,doc:q}),Pe=!0):G&&!q&&(r.track({type:1,doc:G}),Pe=!0,(w||D)&&(y=!0)),Pe&&(q?(h=h.add(q),c=Te?c.add(R):c.delete(R)):(h=h.delete(R),c=c.delete(R)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const R="F"===this.query.limitType?h.last():h.first();h=h.delete(R.key),c=c.delete(R.key),r.track({type:1,doc:R})}return{Qu:h,zu:r,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((D,R)=>function(O,G){const q=ee=>{switch(ee){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return q(O)-q(G)}(D.type,R.type)||this.Gu(D.doc,R.doc)),this.Ju(r);const h=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,w=y!==this.qu;return this.qu=y,0!==c.length||w?{snapshot:new Ed(this.query,e.Qu,a,c,e.mutatedKeys,0===y,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Eb,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ht(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Gx(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new pT(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ht();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ed.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class mT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qx{constructor(e){this.key=e,this.nc=!1}}class zx{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.sc={},this.ic=new $a(y=>Bg(y),sf),this.rc=new Map,this.oc=new Set,this.uc=new or(Ve.comparator),this.cc=new Map,this.ac=new V_,this.hc={},this.lc=new Map,this.fc=jc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function yT(n,e){return wb.apply(this,arguments)}function wb(){return wb=(0,fe.Z)(function*(n,e){const t=kb(n);let r,a;const c=t.ic.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),a=c.view.ec();else{const h=yield yd(t.localStore,xi(e));t.isPrimaryClient&&dm(t.remoteStore,h);const y=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,a=yield _T(t,e,r,"current"===y,h.resumeToken)}return a}),wb.apply(this,arguments)}function _T(n,e,t,r,a){return nv.apply(this,arguments)}function nv(){return nv=(0,fe.Z)(function*(n,e,t,r,a){n._c=(O,G,q)=>{return(ee=(0,fe.Z)(function*(Te,Pe,rt,It){let _t=Pe.view.Wu(rt);_t.$i&&(_t=yield rb(Te.localStore,Pe.query,!1).then(({documents:zt})=>Pe.view.Wu(zt,_t)));const Ct=It&&It.targetChanges.get(Pe.targetId),Lt=Pe.view.applyChanges(_t,Te.isPrimaryClient,Ct);return wT(Te,Pe.targetId,Lt.Xu),Lt.snapshot}),function(Te,Pe,rt,It){return ee.apply(this,arguments)})(n,O,G,q);var ee};const c=yield rb(n.localStore,e,!0),h=new gT(e,c.Hi),y=h.Wu(c.documents),w=qg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,a),D=h.applyChanges(y,n.isPrimaryClient,w);wT(n,t,D.Xu);const R=new mT(e,t,h);return n.ic.set(e,R),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),nv.apply(this,arguments)}function vT(n,e){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,fe.Z)(function*(n,e){const t=Le(n),r=t.ic.get(e),a=t.rc.get(r.targetId);if(a.length>1)return t.rc.set(r.targetId,a.filter(c=>!sf(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield um(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),K_(t.remoteStore,r.targetId),Rf(t,r.targetId)}).catch(xc))):(Rf(t,r.targetId),yield um(t.localStore,r.targetId,!0))}),Ib.apply(this,arguments)}function rv(){return rv=(0,fe.Z)(function*(n,e,t){const r=Pb(n);try{const a=yield function(c,h){const y=Le(c),w=Pn.now(),D=h.reduce((G,q)=>G.add(q.key),Ht());let R,O;return y.persistence.runTransaction("Locally write mutations","readwrite",G=>{let q=qs(),ee=Ht();return y.Gi.getEntries(G,D).next(Te=>{q=Te,q.forEach((Pe,rt)=>{rt.isValidDocument()||(ee=ee.add(Pe))})}).next(()=>y.localDocuments.getOverlayedDocuments(G,q)).next(Te=>{R=Te;const Pe=[];for(const rt of h){const It=US(rt,R.get(rt.key).overlayedDocument);null!=It&&Pe.push(new Gs(rt.key,It,QC(It.value.mapValue),Mn.exists(!0)))}return y.mutationQueue.addMutationBatch(G,w,Pe,h)}).next(Te=>{O=Te;const Pe=Te.applyToLocalDocumentSet(R,ee);return y.documentOverlayCache.saveOverlays(G,Te.batchId,Pe)})}).then(()=>({batchId:O.batchId,changes:jS(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,h,y){let w=c.hc[c.currentUser.toKey()];w||(w=new or(Pt)),w=w.insert(h,y),c.hc[c.currentUser.toKey()]=w}(r,a.batchId,t),yield aa(r,a.changes),yield fm(r.remoteStore)}catch(a){const c=vd(a,"Failed to persist write");t.reject(c)}}),rv.apply(this,arguments)}function xf(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,fe.Z)(function*(n,e){const t=Le(n);try{const r=yield vx(t.localStore,e);e.targetChanges.forEach((a,c)=>{const h=t.cc.get(c);h&&(mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.nc=!0:a.modifiedDocuments.size>0?mt(h.nc):a.removedDocuments.size>0&&(mt(h.nc),h.nc=!1))}),yield aa(t,r,e)}catch(r){yield xc(r)}}),_m.apply(this,arguments)}function Cb(n,e,t){const r=Le(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const a=[];r.ic.forEach((c,h)=>{const y=h.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(c,h){const y=Le(c);y.onlineState=h;let w=!1;y.queries.forEach((D,R)=>{for(const O of R.listeners)O.Pu(h)&&(w=!0)}),w&&bb(y)}(r.eventManager,e),a.length&&r.sc.zo(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Zx(n,e,t){return Db.apply(this,arguments)}function Db(){return Db=(0,fe.Z)(function*(n,e,t){const r=Le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.cc.get(e),c=a&&a.key;if(c){let h=new or(Ve.comparator);h=h.insert(c,Rn.newNoDocument(c,gt.min()));const y=Ht().add(c),w=new Gg(gt.min(),new Map,new _n(Pt),h,y);yield xf(r,w),r.uc=r.uc.remove(c),r.cc.delete(e),Rb(r)}else yield um(r.localStore,e,!1).then(()=>Rf(r,e,t)).catch(xc)}),Db.apply(this,arguments)}function HM(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,fe.Z)(function*(n,e){const t=Le(n),r=e.batch.batchId;try{const a=yield YD(t.localStore,e);Sb(t,r,null),Ab(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield aa(t,a)}catch(a){yield xc(a)}}),ET.apply(this,arguments)}function $M(n,e,t){return iv.apply(this,arguments)}function iv(){return iv=(0,fe.Z)(function*(n,e,t){const r=Le(n);try{const a=yield function(c,h){const y=Le(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return y.mutationQueue.lookupMutationBatch(w,h).next(R=>(mt(null!==R),D=R.keys(),y.mutationQueue.removeMutationBatch(w,R))).next(()=>y.mutationQueue.performConsistencyCheck(w)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(w,D,h)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>y.localDocuments.getDocuments(w,D))})}(r.localStore,e);Sb(r,e,t),Ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield aa(r,a)}catch(a){yield xc(a)}}),iv.apply(this,arguments)}function Tb(){return Tb=(0,fe.Z)(function*(n,e){const t=Le(n);Gc(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const h=Le(c);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>h.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===r)return void e.resolve();const a=t.lc.get(r)||[];a.push(e),t.lc.set(r,a)}catch(r){const a=vd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Tb.apply(this,arguments)}function Ab(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Sb(n,e,t){const r=Le(n);let a=r.hc[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.hc[r.currentUser.toKey()]=a}}function Rf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||xb(n,r)})}function xb(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(K_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Rb(n))}function wT(n,e,t){for(const r of t)r instanceof pT?(n.ac.addReference(r.key,e),GM(n,r)):r instanceof Gx?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||xb(n,r.key)):Xe()}function GM(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),Rb(n))}function Rb(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ve(en.fromString(e)),r=n.fc.next();n.cc.set(r,new qx(t)),n.uc=n.uc.insert(t,r),dm(n.remoteStore,new Bc(xi(id(t.path)),r,2,gs.at))}}function aa(n,e,t){return Er.apply(this,arguments)}function Er(){return Er=(0,fe.Z)(function*(n,e,t){const r=Le(n),a=[],c=[],h=[];var y;r.ic.isEmpty()||(r.ic.forEach((y,w)=>{h.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,(null==D?void 0:D.fromCache)?"not-current":"current"),D){a.push(D);const R=eb.Ci(w.targetId,D);c.push(R)}}))}),yield Promise.all(h),r.sc.zo(a),yield(y=(0,fe.Z)(function*(w,D){const R=Le(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>oe.forEach(D,G=>oe.forEach(G.Si,q=>R.persistence.referenceDelegate.addReference(O,G.targetId,q)).next(()=>oe.forEach(G.Di,q=>R.persistence.referenceDelegate.removeReference(O,G.targetId,q)))))}catch(O){if(!Au(O))throw O;ke("LocalStore","Failed to update sequence numbers: "+O)}for(const O of D){const G=O.targetId;if(!O.fromCache){const q=R.Ui.get(G),Te=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);R.Ui=R.Ui.insert(G,Te)}}}),function(w,D){return y.apply(this,arguments)})(r.localStore,c))}),Er.apply(this,arguments)}function qM(n,e){return sv.apply(this,arguments)}function sv(){return sv=(0,fe.Z)(function*(n,e){const t=Le(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield tb(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(h=>{h.forEach(y=>{y.reject(new Ce(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield aa(t,r.ji)}var a}),sv.apply(this,arguments)}function IT(n,e){const t=Le(n),r=t.cc.get(e);if(r&&r.nc)return Ht().add(r.key);{let a=Ht();const c=t.rc.get(e);if(!c)return a;for(const h of c){const y=t.ic.get(h);a=a.unionWith(y.view.ju)}return a}}function Kx(n,e){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,fe.Z)(function*(n,e){const t=Le(n),r=yield rb(t.localStore,e.query,!0),a=e.view.tc(r);return t.isPrimaryClient&&wT(t,e.targetId,a.Xu),a}),Mf.apply(this,arguments)}function Yx(n,e){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,fe.Z)(function*(n,e){const t=Le(n);return wx(t.localStore,e).then(r=>aa(t,r))}),Mb.apply(this,arguments)}function CT(n,e,t,r){return ku.apply(this,arguments)}function ku(){return ku=(0,fe.Z)(function*(n,e,t,r){const a=Le(n),c=yield function(h,y){const w=Le(h),D=Le(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>D.Tn(R,y).next(O=>O?w.localDocuments.getDocuments(R,O):oe.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield fm(a.remoteStore):"acknowledged"===t||"rejected"===t?(Sb(a,e,r||null),Ab(a,e),y=e,Le(Le(a.localStore).mutationQueue).An(y)):Xe(),yield aa(a,c)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),ku.apply(this,arguments)}function vm(){return vm=(0,fe.Z)(function*(n,e){const t=Le(n);if(kb(t),Pb(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),a=yield ov(t,r.toArray());t.dc=!0,yield gm(t.remoteStore,!0);for(const c of a)dm(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const r=[];let a=Promise.resolve();t.rc.forEach((c,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):a=a.then(()=>(Rf(t,h),um(t.localStore,h,!0))),K_(t.remoteStore,h)}),yield a,yield ov(t,r),function(c){const h=Le(c);h.cc.forEach((y,w)=>{K_(h.remoteStore,w)}),h.ac.fs(),h.cc=new Map,h.uc=new or(Ve.comparator)}(t),t.dc=!1,yield gm(t.remoteStore,!1)}}),vm.apply(this,arguments)}function ov(n,e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=(0,fe.Z)(function*(n,e,t){const r=Le(n),a=[],c=[];for(const h of e){let y;const w=r.rc.get(h);if(w&&0!==w.length){y=yield yd(r.localStore,xi(w[0]));for(const D of w){const R=r.ic.get(D),O=yield Kx(r,R);O.snapshot&&c.push(O.snapshot)}}else{const D=yield bx(r.localStore,h);y=yield yd(r.localStore,D),yield _T(r,Em(D),h,!1,y.resumeToken)}a.push(y)}return r.sc.zo(c),a}),Nb.apply(this,arguments)}function Em(n){return C0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Qx(n){const e=Le(n);return Le(Le(e.localStore).persistence).vi()}function Ob(n,e,t,r){return av.apply(this,arguments)}function av(){return av=(0,fe.Z)(function*(n,e,t,r){const a=Le(n);if(a.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const h=yield wx(a.localStore,af(c[0])),y=Gg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Pr.EMPTY_BYTE_STRING);yield aa(a,h,y);break}case"rejected":yield um(a.localStore,e,!0),Rf(a,e,r);break;default:Xe()}}),av.apply(this,arguments)}function Jr(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,fe.Z)(function*(n,e,t){const r=kb(n);if(r.dc){for(const a of e){if(r.rc.has(a)){ke("SyncEngine","Adding an already active target "+a);continue}const c=yield bx(r.localStore,a),h=yield yd(r.localStore,c);yield _T(r,Em(c),h.targetId,!1,h.resumeToken),dm(r.remoteStore,h)}for(const a of t)r.rc.has(a)&&(yield um(r.localStore,a,!1).then(()=>{K_(r.remoteStore,a),Rf(r,a)}).catch(xc))}}),TT.apply(this,arguments)}function kb(n){const e=Le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zx.bind(null,e),e.sc.zo=Bx.bind(null,e.eventManager),e.sc.wc=oa.bind(null,e.eventManager),e}function Pb(n){const e=Le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$M.bind(null,e),e}class bm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.It=W_(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return KD(this.persistence,new WD,e.initialUser,this.It)}yc(e){return new B_(j_.Bs,this.It)}gc(e){return new rT}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AT extends bm{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield Pb(r.Ac.syncEngine),yield fm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return KD(this.persistence,new WD,e.initialUser,this.It)}Tc(e,t){return new Cf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new $C(t,this.persistence);return new SS(e.asyncQueue,r)}yc(e){const t=G_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new $_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iT(),ub(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new rT}}class WM extends AT{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const a=r.Ac.syncEngine;r.sharedClientState instanceof ab&&(r.sharedClientState.syncEngine={Fr:CT.bind(null,a),$r:Ob.bind(null,a),Br:Jr.bind(null,a),vi:Qx.bind(null,a),Mr:Yx.bind(null,a)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var c=(0,fe.Z)(function*(h){yield function(n,e){return vm.apply(this,arguments)}(r.Ac.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return c.apply(this,arguments)}}())})()}gc(e){const t=iT();if(!ab.C(t))throw new Ce(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=G_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ab(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ST{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=a=>Cb(r.syncEngine,a,1),r.remoteStore.remoteSyncer.handleCredentialChange=qM.bind(null,r.syncEngine),yield gm(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ux}createDatastore(e){const t=W_(e.databaseInfo.databaseId),r=new Sx(e.databaseInfo);return new Mx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,a=e.asyncQueue,c=y=>Cb(this.syncEngine,y,0),h=Tx.C()?new Tx:new FM,new Nx(t,r,a,c,h);var t,r,a,c,h}createSyncEngine(e,t){return function(r,a,c,h,y,w,D){const R=new zx(r,a,c,h,y,w);return D&&(R.dc=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=Le(t);ke("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield _d(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xT(n,e,t){if(!t)throw new Ce(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RT(n,e,t,r){if(!0===e&&!0===r)throw new Ce(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!Ve.isDocumentKey(n))throw new Ce(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NT(n){if(Ve.isDocumentKey(n))throw new Ce(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Kt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uv(n);throw new Ce(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Jx(n,e){if(e<=0)throw new Ce(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const OT=new Map;class kT{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,RT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kT({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kT(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wS;switch(t.type){case"gapi":return new Yh(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OT.get(e);t&&(ke("ComponentProvider","Removing Datastore"),OT.delete(e),t.terminate())}(this),Promise.resolve()}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new za(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class Ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ni(this.firestore,e,this._query)}}class za extends Ni{constructor(e,t,r){super(e,t,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Ve(e))}withConverter(e){return new za(this.firestore,e,this._path)}}function PT(n,e,...t){if(n=(0,Zt.m9)(n),xT("collection","path",e),n instanceof wm){const r=en.fromString(e,...t);return NT(r),new za(n,null,r)}{if(!(n instanceof Ln||n instanceof za))throw new Ce(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return NT(r),new za(n.firestore,null,r)}}function cv(n,e,...t){if(n=(0,Zt.m9)(n),1===arguments.length&&(e=VC.R()),xT("doc","path",e),n instanceof wm){const r=en.fromString(e,...t);return MT(r),new Ln(n,null,new Ve(r))}{if(!(n instanceof Ln||n instanceof za))throw new Ce(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return MT(r),new Ln(n.firestore,n instanceof za?n.converter:null,new Ve(r))}}function bo(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),(n instanceof Ln||n instanceof za)&&(e instanceof Ln||e instanceof za)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Fb(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),n instanceof Ni&&e instanceof Ni&&n.firestore===e.firestore&&sf(n._query,e._query)&&n.converter===e.converter}function FT(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tR{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new kr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),a=Number(r);isNaN(a)&&e.Dc(`length string (${r}) is not valid number`);const c=yield e.Cc(a);return new jx(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,fe.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(a=(0,fe.Z)(function*(c,h){const y=Le(c),w=Nu(y.It)+"/documents",D={documents:h.map(q=>zg(y.It,q))},R=yield y._o("BatchGetDocuments",w,D,h.length),O=new Map;R.forEach(q=>{const ee=function(n,e){return"found"in e?function(t,r){mt(!!r.found);const a=Ga(t,r.found.name),c=di(r.found.updateTime),h=new li({mapValue:{fields:r.found.fields}});return Rn.newFoundDocument(a,c,h)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const a=Ga(t,r.missing),c=di(r.readTime);return Rn.newNoDocument(a,c)}(n,e):Xe()}(y.It,q);O.set(ee.key.toString(),ee)});const G=[];return h.forEach(q=>{const ee=O.get(q.toString());mt(!!ee),G.push(ee)}),G}),function(c,h){return a.apply(this,arguments)})(t.datastore,e);var a;return r.forEach(a=>t.recordVersion(a)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ff(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,a)=>{const c=Ve.fromPath(a);e.mutations.push(new pf(c,e.precondition(c)))}),yield(r=(0,fe.Z)(function*(a,c){const h=Le(a),y=Nu(h.It)+"/documents",w={writes:c.map(D=>yf(h.It,D))};yield h.ao("Commit",y,w)}),function(a,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=gt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ce(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(gt.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(gt.min()))throw new Ce(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Im{constructor(e,t,r,a,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=c,this.kc=r.maxAttempts,this.No=new sT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,fe.Z)(function*(){const t=new iR(e.datastore),r=e.Mc(t);r&&r.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!Rg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Hg(t)}return!1}}class LT{constructor(e,t,r,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Or.UNAUTHENTICATED,this.clientId=VC.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,fe.Z)(function*(y){ke("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(ke("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const a=vd(r,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function sR(n,e){return Lb.apply(this,arguments)}function Lb(){return Lb=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,fe.Z)(function*(c){r.isEqual(c)||(yield tb(e.localStore,c),r=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Lb.apply(this,arguments)}function oR(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield UT(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(a=>_s(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>_s(e.remoteStore,c)),n.onlineComponents=e}),VT.apply(this,arguments)}function UT(n){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,fe.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield sR(n,new bm)),n.offlineComponents}),Cm.apply(this,arguments)}function dv(n){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,fe.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield oR(n,new ST)),n.onlineComponents}),Vb.apply(this,arguments)}function BT(n){return UT(n).then(e=>e.persistence)}function Ub(n){return UT(n).then(e=>e.localStore)}function Bb(n){return dv(n).then(e=>e.remoteStore)}function jb(n){return dv(n).then(e=>e.syncEngine)}function Oi(n){return HT.apply(this,arguments)}function HT(){return HT=(0,fe.Z)(function*(n){const e=yield dv(n),t=e.eventManager;return t.onListen=yT.bind(null,e.syncEngine),t.onUnlisten=vT.bind(null,e.syncEngine),t}),HT.apply(this,arguments)}function Hb(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(a,c,h,y,w){const D=new lv({next:O=>{c.enqueueAndForget(()=>tv(a,R));const G=O.docs.has(h);!G&&O.fromCache?w.reject(new Ce(de.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&O.fromCache&&y&&"server"===y.source?w.reject(new Ce(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new hT(id(h.path),D,{includeMetadataChanges:!0,ku:!0});return mm(a,R)}(yield Oi(n),n.asyncQueue,e,t,r)})),r.promise}function hv(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(a,c,h,y,w){const D=new lv({next:O=>{c.enqueueAndForget(()=>tv(a,R)),O.fromCache&&"server"===y.source?w.reject(new Ce(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),R=new hT(h,D,{includeMetadataChanges:!0,ku:!0});return mm(a,R)}(yield Oi(n),n.asyncQueue,e,t,r)})),r.promise}class pv{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new sT(this,"async_queue_retry"),this.Wc=()=>{const t=ub();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=ub();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ub();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new kr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Au(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,vr("INTERNAL UNHANDLED ERROR: ",function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),h}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=X_.createAndSchedule(this,e,t,r,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&Xe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function gv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(n)}class zT{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Nn extends wm{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new pv,this._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||WT(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||WT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function WT(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xS(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new LT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ki(n,e,t){const r=new kr;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield sR(n,t),yield oR(n,e),r.resolve()}catch(a){const c=a;if(!("FirebaseError"===(h=c).name?h.code===de.FAILED_PRECONDITION||h.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw c;Sc("Error enabling offline persistence. Falling back to persistence disabled: "+c),r.reject(c)}var h})).then(()=>r.promise)}function QT(n){if(n._initialized||n._terminated)throw new Ce(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(Pr.fromBase64String(e))}catch(t){throw new Ce(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wa(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qc{constructor(e){this._methodName=e}}class vv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const dR=/^__.*__$/;class hR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class Fu{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Of{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Of(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.ua(e),a}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:r,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Sm(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Nf(this.sa)&&dR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class fR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||W_(e)}da(e,t,r,a=!1){return new Of({sa:e,methodName:t,fa:r,path:er.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function bd(n){const e=n._freezeSettings(),t=W_(n._databaseId);return new fR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ev(n,e,t,r,a,c={}){const h=n.da(c.merge||c.mergeFields?2:0,e,t,a);Wb("Data must be an object, but it was:",h,r);const y=Tm(r,h);let w,D;if(c.merge)w=new Hs(h.fieldMask),D=h.fieldTransforms;else if(c.mergeFields){const R=[];for(const O of c.mergeFields){const G=Zb(e,O,t);if(!h.contains(G))throw new Ce(de.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);Kb(R,G)||R.push(G)}w=new Hs(R),D=h.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,D=h.fieldTransforms;return new hR(new li(y),w,D)}class wd extends qc{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function JT(n,e,t){return new Of({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class bv extends qc{_toFieldTransform(e){return new Qi(e.path,new jg)}isEqual(e){return e instanceof bv}}class XT extends qc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=JT(this,e,!0),r=this._a.map(c=>wo(c,t)),a=new Vc(r);return new Qi(e.path,a)}isEqual(e){return this===e}}class pR extends qc{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=JT(this,e,!0),r=this._a.map(c=>wo(c,t)),a=new cf(r);return new Qi(e.path,a)}isEqual(e){return this===e}}class gR extends qc{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new lf(e.It,FS(e.It,this.wa));return new Qi(e.path,t)}isEqual(e){return this===e}}function zb(n,e,t,r){const a=n.da(1,e,t);Wb("Data must be an object, but it was:",a,r);const c=[],h=li.empty();Rc(r,(w,D)=>{const R=Am(e,w,t);D=(0,Zt.m9)(D);const O=a.ca(R);if(D instanceof wd)c.push(R);else{const G=wo(D,O);null!=G&&(c.push(R),h.set(R,G))}});const y=new Hs(c);return new Fu(h,y,a.fieldTransforms)}function ua(n,e,t,r,a,c){const h=n.da(1,e,t),y=[Zb(e,r,t)],w=[a];if(c.length%2!=0)throw new Ce(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<c.length;G+=2)y.push(Zb(e,c[G])),w.push(c[G+1]);const D=[],R=li.empty();for(let G=y.length-1;G>=0;--G)if(!Kb(D,y[G])){const q=y[G];let ee=w[G];ee=(0,Zt.m9)(ee);const Te=h.ca(q);if(ee instanceof wd)D.push(q);else{const Pe=wo(ee,Te);null!=Pe&&(D.push(q),R.set(q,Pe))}}const O=new Hs(D);return new Fu(R,O,h.fieldTransforms)}function kf(n,e,t,r=!1){return wo(t,n.da(r?4:3,e))}function wo(n,e){if(Id(n=(0,Zt.m9)(n)))return Wb("Unsupported field value:",e,n),Tm(n,e);if(n instanceof qc)return function(t,r){if(!Nf(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const a=[];let c=0;for(const h of t){let y=wo(h,r.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,r){if(null===(t=(0,Zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return FS(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Pn.fromDate(t);return{timestampValue:mf(r.It,a)}}if(t instanceof Pn){const a=new Pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mf(r.It,a)}}if(t instanceof vv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wa)return{bytesValue:x_(r.It,t._byteString)};if(t instanceof Ln){const a=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw r.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:N0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${uv(t)}`)}(n,e)}function Tm(n,e){const t={};return w0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rc(n,(r,a)=>{const c=wo(a,e.ra(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function Id(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof vv||n instanceof Wa||n instanceof Ln||n instanceof qc)}function Wb(n,e,t){if(!Id(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=uv(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Zb(n,e,t){if((e=(0,Zt.m9)(e))instanceof Pu)return e._internalPath;if("string"==typeof e)return Am(n,e);throw Sm("Field path arguments must be of type string or ",n,!1,void 0,t)}const mR=new RegExp("[~\\*/\\[\\]]");function Am(n,e,t){if(e.search(mR)>=0)throw Sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pu(...e.split("."))._internalPath}catch(r){throw Sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sm(n,e,t,r,a){const c=r&&!r.isEmpty(),h=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(c||h)&&(w+=" (found",c&&(w+=` in field ${r}`),h&&(w+=` in document ${a}`),w+=")"),new Ce(de.INVALID_ARGUMENT,y+n+w)}function Kb(n,e){return n.some(t=>t.isEqual(e))}class Pf{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Yb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Yb extends Pf{data(){return super.data()}}function wv(n,e){return"string"==typeof e?Am(n,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}function eA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}function vs(n,...e){for(const t of e)n=t._apply(n);return n}class Qb extends Ff{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=bd(e.firestore),r=function(a,c,h,y,w,D,R){let O;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){IR(R,D);const q=[];for(const ee of R)q.push(wR(y,a,ee));O={arrayValue:{values:q}}}else O=wR(y,a,R)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||IR(R,D),O=kf(h,"where",R,"in"===D||"not-in"===D);const G=Si.create(w,D,O);return function(q,ee){if(ee.dt()){const Pe=T_(q);if(null!==Pe&&!Pe.isEqual(ee.field))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${ee.field.toString()}'`);const rt=D_(q);null!==rt&&CR(0,ee.field,rt)}const Te=function(Pe,rt){for(const It of Pe.filters)if(rt.indexOf(It.op)>=0)return It.op;return null}(q,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ee.op));if(null!==Te)throw new Ce(de.INVALID_ARGUMENT,Te===ee.op?`Invalid query. You cannot use more than one '${ee.op.toString()}' filter.`:`Invalid query. You cannot use '${ee.op.toString()}' filters with '${Te.toString()}' filters.`)}(a,G),G}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ni(e.firestore,e.converter,function(a,c){const h=a.filters.concat([c]);return new Ru(a.path,a.collectionGroup,a.explicitOrderBy.slice(),h,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}class _R extends Ff{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,a,c){if(null!==r.startAt)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Vg(a,c);return function(y,w){if(null===D_(y)){const D=T_(y);null!==D&&CR(0,D,w.field)}}(r,h),h}(e._query,this.ma,this.pa);return new Ni(e.firestore,e.converter,function(r,a){const c=r.explicitOrderBy.concat([a]);return new Ru(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class vR extends Ff{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Ni(e.firestore,e.converter,A_(e._query,this.Ia,this.Ta))}}class tA extends Ff{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=nA(e,this.type,this.Ea,this.Aa);return new Ni(e.firestore,e.converter,(a=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,a,r.endAt)));var r,a}}class bR extends Ff{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=nA(e,this.type,this.Ea,this.Aa);return new Ni(e.firestore,e.converter,(a=t,new Ru((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,a)));var r,a}}function nA(n,e,t,r){if(t[0]=(0,Zt.m9)(t[0]),t[0]instanceof Pf)return function(a,c,h,y,w){if(!y)throw new Ce(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const D=[];for(const R of rf(a))if(R.field.isKeyField())D.push(Oc(c,y.key));else{const O=y.data.field(R.field);if(GC(O))throw new Ce(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const G=R.field.canonicalString();throw new Ce(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}D.push(O)}return new Pc(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=bd(n.firestore);return function(c,h,y,w,D,R){const O=c.explicitOrderBy;if(D.length>O.length)throw new Ce(de.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let q=0;q<D.length;q++){const ee=D[q];if(O[q].field.isKeyField()){if("string"!=typeof ee)throw new Ce(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ee}`);if(!D0(c)&&-1!==ee.indexOf("/"))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ee}' contains a slash.`);const Te=c.path.child(en.fromString(ee));if(!Ve.isDocumentKey(Te))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Te}' is not because it contains an odd number of segments.`);const Pe=new Ve(Te);G.push(Oc(h,Pe))}else{const Te=kf(y,w,ee);G.push(Te)}}return new Pc(G,R)}(n._query,n.firestore._databaseId,a,e,t,r)}}function wR(n,e,t){if("string"==typeof(t=(0,Zt.m9)(t))){if(""===t)throw new Ce(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(e)&&-1!==t.indexOf("/"))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!Ve.isDocumentKey(r))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oc(n,new Ve(r))}if(t instanceof Ln)return Oc(n,t._key);throw new Ce(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uv(t)}.`)}function IR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CR(n,e,t){if(!t.isEqual(e))throw new Ce(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rA{convertValue(e,t="none"){switch(xu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Rc(e.fields,(a,c)=>{r[a]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new vv(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Sg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xg(e));default:return null}}convertTimestamp(e){const t=Mc(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);mt(ID(r));const a=new ed(r.get(1),r.get(3)),c=new Ve(r.popFirst(5));return a.isEqual(t)||vr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function i(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class s extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class o{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class u extends Pf{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class l extends u{data(e={}){return super.data(e)}}class d{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new o(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new l(this._firestore,this._userDataWriter,r.key,r,new o(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,a){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new l(r._firestore,r._userDataWriter,h.doc.key,h.doc,new o(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>a||3!==h.type).map(h=>{const y=new l(r._firestore,r._userDataWriter,h.doc.key,h.doc,new o(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==h.type&&(w=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),1!==h.type&&(c=c.add(h.doc),D=c.indexOf(h.doc.key)),{type:m(h.type),doc:y,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function m(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function v(n,e){return n instanceof u&&e instanceof u?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof d&&e instanceof d&&n._firestore===e._firestore&&Fb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class C extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function ue(n,e,t){n=Kt(n,Ln);const r=Kt(n.firestore,Nn),a=i(n.converter,e,t);return Bt(r,[Ev(bd(r),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Mn.none())])}function Q(n,e,t,...r){n=Kt(n,Ln);const a=Kt(n.firestore,Nn),c=bd(a);let h;return h="string"==typeof(e=(0,Zt.m9)(e))||e instanceof Pu?ua(c,"updateDoc",n._key,e,t,r):zb(c,"updateDoc",n._key,e),Bt(a,[h.toMutation(n._key,Mn.exists(!0))])}function at(n,...e){var t,r,a;n=(0,Zt.m9)(n);let c={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||gv(e[h])||(c=e[h],h++);const y={includeMetadataChanges:c.includeMetadataChanges};if(gv(e[h])){const O=e[h];e[h]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[h+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[h+2]=null===(a=O.complete)||void 0===a?void 0:a.bind(O)}let w,D,R;if(n instanceof Ln)D=Kt(n.firestore,Nn),R=id(n._key.path),w={next:O=>{e[h]&&e[h](cr(D,n,O))},error:e[h+1],complete:e[h+2]};else{const O=Kt(n,Ni);D=Kt(O.firestore,Nn),R=O._query;const G=new C(D);w={next:q=>{e[h]&&e[h](new d(D,G,O,q))},error:e[h+1],complete:e[h+2]},eA(n._query)}return function(O,G,q,ee){const Te=new lv(ee),Pe=new hT(G,Te,q);return O.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return mm(yield Oi(O),Pe)})),()=>{Te.bc(),O.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return tv(yield Oi(O),Pe)}))}}(ur(D),R,y,w)}function Bt(n,e){return function(t,r){const a=new kr;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(n,e,t){return rv.apply(this,arguments)}(yield jb(t),r,a)})),a.promise}(ur(n),e)}function cr(n,e,t){const r=t.docs.get(e._key),a=new C(n);return new u(n,a,e._key,r,new o(t.hasPendingWrites,t.fromCache),e.converter)}const Lf={maxAttempts:5};class Cd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bd(e)}set(e,t,r){this._verifyNotCommitted();const a=zs(e,this._firestore),c=i(a.converter,t,r),h=Ev(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,r);return this._mutations.push(h.toMutation(a._key,Mn.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const c=zs(e,this._firestore);let h;return h="string"==typeof(t=(0,Zt.m9)(t))||t instanceof Pu?ua(this._dataReader,"WriteBatch.update",c._key,t,r,a):zb(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(h.toMutation(c._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zs(e,this._firestore);return this._mutations=this._mutations.concat(new ff(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zs(n,e){if((n=(0,Zt.m9)(n)).firestore!==e)throw new Ce(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bd(e)}get(e){const t=zs(e,this._firestore),r=new s(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return Xe();const c=a[0];if(c.isFoundDocument())return new Pf(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Pf(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const a=zs(e,this._firestore),c=i(a.converter,t,r),h=Ev(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,r);return this._transaction.set(a._key,h),this}update(e,t,r,...a){const c=zs(e,this._firestore);let h;return h="string"==typeof(t=(0,Zt.m9)(t))||t instanceof Pu?ua(this._dataReader,"Transaction.update",c._key,t,r,a):zb(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,h),this}delete(e){const t=zs(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zs(e,this._firestore),r=new C(this._firestore);return super.get(e).then(a=>new u(this._firestore,r,t._key,a._document,new o(!1,!1),t.converter))}}function DR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rN(){if("undefined"==typeof Uint8Array)throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function iN(){if("undefined"==typeof atob)throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Zh=_o.SDK_VERSION,(0,_o._registerComponent)(new Cu.wA("firestore",(t,{instanceIdentifier:r,options:a})=>{const c=t.getProvider("app").getImmediate(),h=new Nn(new IS(t.getProvider("auth-internal")),new FC(t.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ce(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ed(y.options.projectId,w)}(c,r),c);return a=Object.assign({useFetchStreams:e},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),(0,_o.registerVersion)(RC,"3.7.1",n),(0,_o.registerVersion)(RC,"3.7.1","esm2017")}();class rw{constructor(e){this._delegate=e}static fromBase64String(e){return iN(),new rw(Wa.fromBase64String(e))}static fromUint8Array(e){return rN(),new rw(Wa.fromUint8Array(e))}toBase64(){return iN(),this._delegate.toBase64()}toUint8Array(){return rN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TR(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class gO{enableIndexedDbPersistence(e,t){return function(n,e){QT(n=Kt(n,Nn));const t=ur(n),r=n._freezeSettings(),a=new ST;return ki(t,a,new AT(a,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){QT(n=Kt(n,Nn));const e=ur(n),t=n._freezeSettings(),r=new ST;return ki(e,r,new WM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Ce(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!ta.C())return Promise.resolve();const a=r+"main";yield ta.delete(a)}),function(r){return t.apply(this,arguments)})(G_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ed||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Sc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var a;const c=(n=Kt(n,wm))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Sc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,y;if("string"==typeof r.mockUserToken)h=r.mockUserToken,y=Or.MOCK_USER;else{h=(0,Zt.Sg)(r.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ce(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Or(w)}n._authCredentials=new kC(new OC(h,y))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield BT(n),t=yield Bb(n);return e.setNetworkEnabled(!0),function(r){const a=Le(r);return a.wu.delete(0),cm(a)}(t)}))}(ur(n=Kt(n,Nn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield BT(n),t=yield Bb(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(a){const c=Le(a);c.wu.add(0),yield _d(c),c.yu.set("Offline")}),function(a){return r.apply(this,arguments)})(t);var r}))}(ur(n=Kt(n,Nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,RT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new kr;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(n,e){return Tb.apply(this,arguments)}(yield jb(e),t)})),t.promise}(ur(n=Kt(n,Nn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new lv(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Oi(n),a=t,Le(r).bu.add(a),void a.next();var r,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Oi(n),a=t,void Le(r).bu.delete(a);var r,a}))}}(ur(n=Kt(n,Nn)),gv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cv(this,PT(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new Za(this,cv(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zs(this,function(n,e){if(n=Kt(n,wm),xT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ni(n,null,(t=e,new Ru(en.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e,t){n=Kt(n,Nn);const r=Object.assign(Object.assign({},Lf),void 0);return function(a){if(a.maxAttempts<1)throw new Ce(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,c,h){const y=new kr;return a.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const w=yield function(n){return dv(n).then(e=>e.datastore)}(a);new Im(a.asyncQueue,w,h,c,y).run()})),y.promise}(ur(n),a=>e(new Jb(n,a)),r)}(this._delegate,t=>e(new oN(this,t)))}batch(){return ur(this._delegate),new aN(new Cd(this._delegate,e=>Bt(this._delegate,e)))}loadBundle(e){return function(n,e){const t=ur(n=Kt(n,Nn)),r=new zT;return function(n,e,t,r){const a=function(c,h){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,w=function(w,D){if(w instanceof Uint8Array)return FT(w,D);if(w instanceof ArrayBuffer)return FT(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new tR(w,h);var w}(t,W_(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function(n,e,t){const r=Le(n);var a;(a=(0,fe.Z)(function*(c,h,y){try{const w=yield h.getMetadata();if(yield function(G,q){const ee=Le(G),Te=di(q.createTime);return ee.persistence.runTransaction("hasNewerBundle","readonly",Pe=>ee.Ns.getBundleMetadata(Pe,q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(Te)>=0)}(c.localStore,w))return yield h.close(),y._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);y._updateProgress(fT(w));const D=new $x(w,c.localStore,h.It);let R=yield h.mc();for(;R;){const G=yield D.Fu(R);G&&y._updateProgress(G),R=yield h.mc()}const O=yield D.complete();return yield aa(c,O.Lu,void 0),yield function(G,q){const ee=Le(G);return ee.persistence.runTransaction("Save bundle","readwrite",Te=>ee.Ns.saveBundleMetadata(Te,q))}(c.localStore,w),y._completeWith(O.progress),Promise.resolve(O.Bu)}catch(w){return Sc("SyncEngine",`Loading bundle failed with ${w}`),y._failWith(w),Promise.resolve(new Set)}var G}),function(c,h,y){return a.apply(this,arguments)})(r,e,t).then(a=>{r.sharedClientState.notifyBundleLoaded(a)})}(yield jb(n),a,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const a=Le(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,r))}(yield Ub(n),e)}))}(ur(n=Kt(n,Nn)),e).then(t=>t?new Ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Zs(this,t):null)}}class iA extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new rw(new Wa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Za.forKey(t,this.firestore,null)}}class oN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iA(e)}get(e){const t=Rm(e);return this._delegate.get(t).then(r=>new iw(this._firestore,new u(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Rm(e);return r?(DR("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Rm(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Rm(e);return this._delegate.delete(t),this}}class aN{constructor(e){this._delegate=e}set(e,t,r){const a=Rm(e);return r?(DR("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const c=Rm(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...a),this}delete(e){const t=Rm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new l(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xm.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let c=a.get(t);return c||(c=new xm(e,new iA(e),t),a.set(t,c)),c}}xm.INSTANCES=new WeakMap;class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Za(t,new Ln(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new Za(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cv(this.firestore,PT(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Zt.m9)(e))instanceof Ln&&bo(this._delegate,e)}set(e,t){t=DR("DocumentReference.set",t);try{return t?ue(this._delegate,e,t):ue(this._delegate,e)}catch(r){throw Ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Q(this._delegate,e):Q(this._delegate,e,t,...r)}catch(a){throw Ws(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Bt(Kt(n.firestore,Nn),[new ff(n._key,Mn.none())])}(this._delegate)}onSnapshot(...e){const t=uN(e),r=cN(e,a=>new iw(this.firestore,new u(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return at(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Kt(n,Ln);const e=Kt(n.firestore,Nn),t=ur(e),r=new C(e);return function(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(a,c,h){try{const y=yield function(w,D){const R=Le(w);return R.persistence.runTransaction("read document","readonly",O=>R.localDocuments.getDocument(O,D))}(a,c);y.isFoundDocument()?h.resolve(y):y.isNoDocument()?h.resolve(null):h.reject(new Ce(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const w=vd(y,`Failed to get document '${c} from cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield Ub(n),e,t);var r})),t.promise}(t,n._key).then(a=>new u(e,r,n._key,a,new o(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Kt(n,Ln);const e=Kt(n.firestore,Nn);return Hb(ur(e),n._key,{source:"server"}).then(t=>cr(e,n,t))}(this._delegate):function(n){n=Kt(n,Ln);const e=Kt(n.firestore,Nn);return Hb(ur(e),n._key).then(t=>cr(e,n,t))}(this._delegate),t.then(r=>new iw(this.firestore,new u(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function uN(n){for(const e of n)if("object"==typeof e&&!TR(e))return e;return{}}function cN(n,e){var t,r;let a;return a=TR(n[0])?n[0]:TR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}class iw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return v(this._delegate,e._delegate)}}class sw extends iw{data(e){const t=this._delegate.data(e);return function(n,e){n||Xe()}(void 0!==t),t}}class Zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iA(e)}where(e,t,r){try{return new Zs(this.firestore,vs(this._delegate,function(n,e,t){const r=e,a=wv("where",n);return new Qb(a,r,t)}(e,t,r)))}catch(a){throw Ws(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zs(this.firestore,vs(this._delegate,function(n,e="asc"){const t=e,r=wv("orderBy",n);return new _R(r,t)}(e,t)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zs(this.firestore,vs(this._delegate,function(n){return Jx("limit",n),new vR("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Zs(this.firestore,vs(this._delegate,function(n){return Jx("limitToLast",n),new vR("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Zs(this.firestore,vs(this._delegate,function(...n){return new tA("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Zs(this.firestore,vs(this._delegate,function(...n){return new tA("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Zs(this.firestore,vs(this._delegate,function(...n){return new bR("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Zs(this.firestore,vs(this._delegate,function(...n){return new bR("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Fb(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Kt(n,Ni);const e=Kt(n.firestore,Nn),t=ur(e),r=new C(e);return function(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(a,c,h){try{const y=yield rb(a,c,!0),w=new gT(c,y.Hi),D=w.Wu(y.documents),R=w.applyChanges(D,!1);h.resolve(R.snapshot)}catch(y){const w=vd(y,`Failed to execute query '${c} against cache`);h.reject(w)}}),function(a,c,h){return r.apply(this,arguments)})(yield Ub(n),e,t);var r})),t.promise}(t,n._query).then(a=>new d(e,r,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Kt(n,Ni);const e=Kt(n.firestore,Nn),t=ur(e),r=new C(e);return hv(t,n._query,{source:"server"}).then(a=>new d(e,r,n,a))}(this._delegate):function(n){n=Kt(n,Ni);const e=Kt(n.firestore,Nn),t=ur(e),r=new C(e);return eA(n._query),hv(t,n._query).then(a=>new d(e,r,n,a))}(this._delegate),t.then(r=>new AR(this.firestore,new d(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uN(e),r=cN(e,a=>new AR(this.firestore,new d(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return at(this._delegate,t,r)}withConverter(e){return new Zs(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}class yO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sw(this._firestore,r))})}isEqual(e){return v(this._delegate,e._delegate)}}class Cv extends Zs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Za(this.firestore,e):null}doc(e){try{return new Za(this.firestore,void 0===e?cv(this._delegate):cv(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Kt(n.firestore,Nn),r=cv(n),a=i(n.converter,e);return Bt(t,[Ev(bd(n.firestore),"addDoc",r._key,a,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Za(this.firestore,t))}isEqual(e){return bo(this._delegate,e._delegate)}withConverter(e){return new Cv(this.firestore,this._delegate.withConverter(e?xm.getInstance(this.firestore,e):null))}}function Rm(n){return Kt(n,Ln)}class SR{constructor(...e){this._delegate=new Pu(...e)}static documentId(){return new SR(er.keyField().canonicalString())}isEqual(e){return(e=(0,Zt.m9)(e))instanceof Pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new bv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Mm(e)}static delete(){const e=new wd("deleteField");return e._methodName="FieldValue.delete",new Mm(e)}static arrayUnion(...e){const t=function(...n){return new XT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Mm(t)}static arrayRemove(...e){const t=function(...n){return new pR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Mm(t)}static increment(e){const t=function(n){return new gR("increment",n)}(e);return t._methodName="FieldValue.increment",new Mm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _O={Firestore:sN,GeoPoint:vv,Timestamp:Pn,Blob:rw,Transaction:oN,WriteBatch:aN,DocumentReference:Za,DocumentSnapshot:iw,Query:Zs,QueryDocumentSnapshot:sw,QuerySnapshot:AR,CollectionReference:Cv,FieldPath:SR,FieldValue:Mm,setLogLevel:function(n){!function(n){Ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new Cu.wA("firestore-compat",t=>((e,t)=>new sN(e,t,new gO))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},_O)))})(n),n.registerVersion("@firebase/firestore-compat","0.2.1")}(kE.Z);var bO=P(6682),ow=P(309),wO=P(7771),IO=P(8858);class CO extends ii.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new DO(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let h;if(this.closed)throw new Fo.N;if(this.isStopped||this.hasError?h=ep.w.EMPTY:(this.observers.push(e),h=new IO.W(this,e)),a&&e.add(e=new ow.ht(e,a)),t)for(let y=0;y<c&&!e.closed;y++)e.next(r[y]);else for(let y=0;y<c&&!e.closed;y++)e.next(r[y].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||wO.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let h=0;for(;h<c&&!(e-a[h].time<r);)h++;return c>t&&(h=Math.max(h,c-t)),h>0&&a.splice(0,h),a}}class DO{constructor(e,t){this.time=e,this.value=t}}function lN(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let a,h,c=0,y=!1,w=!1;return function(R){let O;c++,!a||y?(y=!1,a=new CO(n,e,r),O=a.subscribe(this),h=R.subscribe({next(G){a.next(G)},error(G){y=!0,a.error(G)},complete(){w=!0,h=void 0,a.complete()}}),w&&(h=void 0)):O=a.subscribe(this),this.add(()=>{c--,O.unsubscribe(),O=void 0,h&&!w&&t&&0===c&&(h.unsubscribe(),h=void 0,a=void 0)})}}(r))}function dN(n,e){return e?Yn(()=>n,e):Yn(()=>n)}var xR=P(3101);P(2329);const fN=new Map,MO={activated:!1,tokenObservers:[]},NO={initialized:!1,enabled:!1};function Pi(n){return fN.get(n)||MO}function Ka(n,e){fN.set(n,e)}function oA(){return NO}class LO{constructor(e,t,r,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Zt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ks=new Zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gN(n){if(!Pi(n).activated)throw Ks.create("use-before-activation",{appName:n.name})}function OR(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,fe.Z)(function*({url:n,body:e},t){var r,a;const c={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const q=yield h.getHeartbeatsHeader();q&&(c["X-Firebase-Client"]=q)}const y={method:"POST",body:JSON.stringify(e),headers:c};let w,D;try{w=yield fetch(n,y)}catch(q){throw Ks.create("fetch-network-error",{originalErrorMessage:null===(r=q)||void 0===r?void 0:r.message})}if(200!==w.status)throw Ks.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(q){throw Ks.create("fetch-parse-error",{originalErrorMessage:null===(a=q)||void 0===a?void 0:a.message})}const R=D.ttl.match(/^([\d.]+)(s)$/);if(!R||!R[2]||isNaN(Number(R[1])))throw Ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const O=1e3*Number(R[1]),G=Date.now();return{token:D.token,expireTimeMillis:G+O,issuedAtTimeMillis:G}}),kR.apply(this,arguments)}function HO(n,e){const{projectId:t,appId:r,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const aw="firebase-app-check-store";let cA=null;function yN(){return cA||(cA=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=a=>{n(a.target.result)},r.onerror=a=>{var c;e(Ks.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},r.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(aw,{keyPath:"compositeKey"})}}catch(r){e(Ks.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),cA)}function PR(){return PR=(0,fe.Z)(function*(n,e){const r=(yield yN()).transaction(aw,"readwrite"),c=r.objectStore(aw).put({compositeKey:n,value:e});return new Promise((h,y)=>{c.onsuccess=w=>{h()},r.onerror=w=>{var D;y(Ks.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),PR.apply(this,arguments)}const uw=new Bs.Yd("@firebase/app-check");function VR(n,e){return(0,Zt.hl)()?function(n,e){return function(n,e){return PR.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{uw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bN(){return oA().enabled}function wN(){return BR.apply(this,arguments)}function BR(){return BR=(0,fe.Z)(function*(){const n=oA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),BR.apply(this,arguments)}const JO={error:"UNKNOWN_ERROR"};function XO(n){return Zt.US.encodeString(JSON.stringify(n),!1)}function lA(n){return jR.apply(this,arguments)}function jR(){return jR=(0,fe.Z)(function*(n,e=!1){const t=n.app;gN(t);const r=Pi(t);let c,a=r.token;if(a&&!Dv(a)&&(Ka(t,Object.assign(Object.assign({},r),{token:void 0})),a=void 0),!a){const w=yield r.cachedTokenPromise;w&&(Dv(w)?a=w:yield VR(t,void 0))}if(!e&&a&&Dv(a))return{token:a.token};let y,h=!1;if(bN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=OR(HO(t,yield wN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),h=!0);const w=yield r.exchangeTokenPromise;return yield VR(t,w),Ka(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),h=!0),a=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?uw.warn(w.message):uw.error(w),c=w}return a?c?y=Dv(a)?{token:a.token,internalError:c}:DN(c):(y={token:a.token},Ka(t,Object.assign(Object.assign({},r),{token:a})),yield VR(t,a)):y=DN(c),h&&CN(t,y),y}),jR.apply(this,arguments)}function $R(n,e){const t=Pi(n),r=t.tokenObservers.filter(a=>a.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ka(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function IN(n){const{app:e}=n,t=Pi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new LO((0,fe.Z)(function*(){let r;if(r=Pi(e).token?yield lA(n,!0):yield lA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Pi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ka(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function CN(n,e){const t=Pi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(a){}}function Dv(n){return n.expireTimeMillis-Date.now()>0}function DN(n){return{token:XO(JO),error:n}}class t1{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pi(this.app);for(const t of e)$R(this.app,t.next);return Promise.resolve()}}const ON="app-check-internal";(0,_o._registerComponent)(new Cu.wA("app-check",n=>function(n,e){return new t1(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ON).initialize()})),(0,_o._registerComponent)(new Cu.wA(ON,n=>function(n){return{getToken:e=>lA(n,e),addTokenListener:e=>function(n,e,t,r){const{app:a}=n,c=Pi(a),h={next:t,error:r,type:e};if(Ka(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,h]})),c.token&&Dv(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),IN(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>IN(n))}(n,"INTERNAL",e),removeTokenListener:e=>$R(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_o.registerVersion)("@firebase/app-check","0.5.15");class WR{constructor(){return(0,Ii.vb)("app-check")}}"undefined"!=typeof window&&window,P(7841);const PN=new p.OlP("angularfire2.auth.use-emulator"),FN=new p.OlP("angularfire2.auth.settings"),LN=new p.OlP("angularfire2.auth.tenant-id"),VN=new p.OlP("angularfire2.auth.langugage-code"),UN=new p.OlP("angularfire2.auth.use-device-language"),BN=new p.OlP("angularfire.auth.persistence"),jN=(n,e,t,r,a,c,h,y)=>(0,fs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=a,c&&w.useDeviceLanguage(),h)for(const[D,R]of Object.entries(h))w.settings[D]=R;return y&&w.setPersistence(y),w},[t,r,a,c,h,y]);let HN=(()=>{class n{constructor(t,r,a,c,h,y,w,D,R,O,G,q){const ee=new ii.xQ,Te=(0,ht.of)(void 0).pipe((0,ow.QV)(h.outsideAngular),Yn(()=>c.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8241)))),(0,ut.U)(()=>(0,fs.on)(t,c,r)),(0,ut.U)(Pe=>jN(Pe,c,y,D,R,O,w,G)),lN({bufferSize:1,refCount:!1}));if(tu(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ht.of)(null);else{Te.pipe(Ho()).subscribe();const rt=Te.pipe(Yn(Ct=>Ct.getRedirectResult().then(Lt=>Lt,()=>null)),Ii.iC,lN({bufferSize:1,refCount:!1})),It=Te.pipe(Yn(Ct=>new Sr.y(Lt=>({unsubscribe:c.runOutsideAngular(()=>Ct.onAuthStateChanged(zt=>Lt.next(zt),zt=>Lt.error(zt),()=>Lt.complete()))})))),_t=Te.pipe(Yn(Ct=>new Sr.y(Lt=>({unsubscribe:c.runOutsideAngular(()=>Ct.onIdTokenChanged(zt=>Lt.next(zt),zt=>Lt.error(zt),()=>Lt.complete()))}))));this.authState=rt.pipe(dN(It),(0,xR.R)(h.outsideAngular),(0,ow.QV)(h.insideAngular)),this.user=rt.pipe(dN(_t),(0,xR.R)(h.outsideAngular),(0,ow.QV)(h.insideAngular)),this.idToken=this.user.pipe(Yn(Ct=>Ct?(0,on.D)(Ct.getIdToken()):(0,ht.of)(null))),this.idTokenResult=this.user.pipe(Yn(Ct=>Ct?(0,on.D)(Ct.getIdTokenResult()):(0,ht.of)(null))),this.credential=(0,bO.T)(rt,ee,this.authState.pipe(Rs(Ct=>!Ct))).pipe((0,ut.U)(Ct=>(null==Ct?void 0:Ct.user)?Ct:null),(0,xR.R)(h.outsideAngular),(0,ow.QV)(h.insideAngular))}return(0,fs.pX)(this,Te,c,{spy:{apply:(Pe,rt,It)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&It.then(_t=>ee.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fs.Dh),p.LFG(fs.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ii.HU),p.LFG(PN,8),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(UN,8),p.LFG(BN,8),p.LFG(WR,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function $N(n,e){return function(n,e=Jp.z){return new Sr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function KR(n,e){return $N(n,e).pipe((0,ut.U)(t=>({payload:t,type:"query"})))}function hA(n,e){return KR(n,e).pipe(hl(void 0),NE(),(0,ut.U)(([t,r])=>{const a=r.payload.docChanges(),c=a.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,y)=>{const w=a.find(R=>R.doc.ref.isEqual(h.ref)),D=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(h.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:h}})}),c}))}function GN(n,e,t){return hA(n,t).pipe(Ta((r,a)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,a.map(c=>c.payload),e),[]),t=>t.lift(new Ci(void 0,void 0)),(0,ut.U)(r=>r.map(a=>({type:a.type,payload:a}))))}function YR(n,e,t,...r){const a=n.slice();return a.splice(e,t,...r),a}function qN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ut.U)(r=>r.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(hl(void 0),NE(),Rs(([r,a])=>a.length>0||!r),(0,ut.U)(([r,a])=>a),Ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return GN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ii.iC)}valueChanges(e={}){return KR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ii.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(Ii.iC)}add(e){return this.ref.add(e)}doc(e){return new WN(this.ref.doc(e),this.afs)}}class WN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:a,query:c}=ZN(r,t);return new zN(a,c,this.afs)}snapshotChanges(){return function(n,e){return $N(n,e).pipe(hl(void 0),NE(),(0,ut.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ii.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,on.D)(this.ref.get(e)).pipe(Ii.iC)}}class D1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Rs(t=>t.length>0),Ii.iC):hA(this.query,this.afs.schedulers.outsideAngular).pipe(Ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=qN(e);return GN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ii.iC)}valueChanges(e={}){return KR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(r=>r.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),Ii.iC)}get(e){return(0,on.D)(this.query.get(e)).pipe(Ii.iC)}}const T1=new p.OlP("angularfire2.enableFirestorePersistence"),A1=new p.OlP("angularfire2.firestore.persistenceSettings"),S1=new p.OlP("angularfire2.firestore.settings"),x1=new p.OlP("angularfire2.firestore.use-emulator");function ZN(n,e=(t=>t)){return{query:e(n),ref:n}}let R1=(()=>{class n{constructor(t,r,a,c,h,y,w,D,R,O,G,q,ee,Te,Pe,rt,It){this.schedulers=w;const _t=(0,fs.on)(t,y,r),Ct=R;O&&jN(_t,y,G,ee,Te,Pe,q,rt),[this.firestore,this.persistenceEnabled$]=(0,fs.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const Lt=y.runOutsideAngular(()=>_t.firestore());if(c&&Lt.settings(c),Ct&&Lt.useEmulator(...Ct),a&&!tu(h)){const zt=()=>{try{return(0,on.D)(Lt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(hi){return"undefined"!=typeof console&&console.warn(hi),(0,ht.of)(!1)}};return[Lt,y.runOutsideAngular(zt)]}return[Lt,(0,ht.of)(!1)]},[c,Ct,a])}collection(t,r){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:h}=ZN(a,r),y=this.schedulers.ngZone.run(()=>c);return new zN(y,h,this)}collectionGroup(t,r){const a=r||(h=>h),c=this.firestore.collectionGroup(t);return new D1(a(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>r);return new WN(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fs.Dh),p.LFG(fs.xv,8),p.LFG(T1,8),p.LFG(S1,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Ii.HU),p.LFG(A1,8),p.LFG(x1,8),p.LFG(HN,8),p.LFG(PN,8),p.LFG(FN,8),p.LFG(LN,8),p.LFG(VN,8),p.LFG(UN,8),p.LFG(BN,8),p.LFG(WR,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),KN=(()=>{class n{constructor(t){this.angF=t}addData(t){t.id=this.angF.createId(),this.angF.collection("/data").add(t)}getallData(){return this.angF.collection("/data").snapshotChanges()}deldata(t){return this.angF.doc("/data/"+t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(R1))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M1(n,e){if(1&n){const t=p.EpF();p.TgZ(0,"tr"),p.TgZ(1,"th",24),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.TgZ(13,"td"),p.TgZ(14,"button",25),p.NdJ("click",function(){const c=p.CHM(t).$implicit;return p.oxw(2).delete(c)}),p._uU(15,"delete"),p.qZA(),p.qZA(),p.qZA()}if(2&n){const t=e.$implicit,r=e.index;p.xp6(2),p.Oqu(r),p.xp6(2),p.Oqu(t.pname),p.xp6(2),p.Oqu(t.date),p.xp6(2),p.Oqu(t.timework),p.xp6(2),p.Oqu(t.role),p.xp6(2),p.Oqu(t.desc)}}function N1(n,e){if(1&n&&(p.TgZ(0,"tbody"),p.YNc(1,M1,16,6,"tr",23),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.datalist)}}let O1=(()=>{class n{constructor(t,r,a){this.formBuilder=t,this.user=r,this.firebase=a,this.selectedrole="",this.datalist=[],this.data={id:"",pname:"",date:"",timework:"",role:"",desc:""}}selectChangeHandler(t){this.selectedrole=t.target.value}ngOnInit(){this.logtime=this.formBuilder.group({pname:[""],date:[""],timework:[""],role:[""],desc:[""]}),this.getalldata()}submit(){this.data=this.logtime.value,this.data.role=this.selectedrole,this.firebase.addData(this.data),this.logtime.reset(),console.log("pull data"),console.log(this.data)}getalldata(){this.firebase.getallData().subscribe(t=>{this.datalist=t.map(r=>{const a=r.payload.doc.data();return a.id=r.payload.doc.id,console.log(this.datalist),a})},t=>{alert("incorrect")})}delete(t){this.firebase.deldata(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Yp),p.Y36(Yo),p.Y36(KN))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-log-time"]],decls:51,vars:3,consts:[[1,"main"],[1,"container","container1"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","formControlName","pname","id","exampleInputEmail1","aria-describedby","emailHelp","required","",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","date","formControlName","date","id","exampleInputPassword1",1,"form-control"],["type","number","formControlName","timework","id","exampleInputEmail1","aria-describedby","emailHelp","required","",1,"form-control"],[2,"margin-right","15px","padding-left","5px","padding-top","20px"],[3,"change"],["value","Development"],["value","Business Analyst"],["value","Testing"],["value","Deployement"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3","formControlName","desc",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"margin","10px",3,"disabled"],[1,"container","main",2,"margin-top","30px"],[1,"table","table-primary"],["scope","col ",1,"thcol"],["scope","col",1,"thcol"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"bt",3,"click"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"form",2),p.NdJ("ngSubmit",function(){return r.submit()}),p.TgZ(3,"div",3),p.TgZ(4,"label",4),p._uU(5,"Project Name"),p.qZA(),p._UZ(6,"input",5),p.qZA(),p.TgZ(7,"div",3),p.TgZ(8,"label",6),p._uU(9,"Date"),p.qZA(),p._UZ(10,"input",7),p.qZA(),p.TgZ(11,"div",3),p.TgZ(12,"label",4),p._uU(13,"Time You Work (hrs)"),p.qZA(),p._UZ(14,"input",8),p.qZA(),p.TgZ(15,"span",9),p._uU(16,"Select a Role:"),p.qZA(),p.TgZ(17,"select",10),p.NdJ("change",function(c){return r.selectChangeHandler(c)}),p.TgZ(18,"option",11),p._uU(19,"Development"),p.qZA(),p.TgZ(20,"option",12),p._uU(21,"Business Analyst"),p.qZA(),p.TgZ(22,"option",13),p._uU(23,"Testing"),p.qZA(),p.TgZ(24,"option",14),p._uU(25,"Deployment"),p.qZA(),p.qZA(),p.TgZ(26,"div",3),p.TgZ(27,"label",15),p._uU(28,"Description"),p.qZA(),p._UZ(29,"textarea",16),p.qZA(),p.TgZ(30,"button",17),p._uU(31,"submit"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(32,"div",18),p.TgZ(33,"table",19),p.TgZ(34,"thead"),p.TgZ(35,"tr"),p.TgZ(36,"th",20),p._uU(37,"Sno"),p.qZA(),p.TgZ(38,"th",21),p._uU(39,"Project"),p.qZA(),p.TgZ(40,"th",21),p._uU(41,"Date"),p.qZA(),p.TgZ(42,"th",21),p._uU(43,"Time(hrs)"),p.qZA(),p.TgZ(44,"th",21),p._uU(45,"Role"),p.qZA(),p.TgZ(46,"th",21),p._uU(47,"Description"),p.qZA(),p.TgZ(48,"th",21),p._uU(49,"Button"),p.qZA(),p.qZA(),p.qZA(),p.YNc(50,N1,2,1,"tbody",22),p.qZA(),p.qZA()),2&t&&(p.xp6(2),p.Q6J("formGroup",r.logtime),p.xp6(28),p.Q6J("disabled",!r.logtime.valid),p.xp6(20),p.Q6J("ngIf",r.datalist))},directives:[Oy,Up,Mh,Ih,dE,Kp,Fy,In,uI,WA,Cr,Gr],styles:[".main[_ngcontent-%COMP%]{background-color:#83dcdc29}.container1[_ngcontent-%COMP%]{margin-top:20px;width:500px;background-color:#483d8b;color:#fff}.mb-3[_ngcontent-%COMP%]{padding-top:20px;padding-left:8px}.bt[_ngcontent-%COMP%]{background-color:red;border-radius:5px;border:none;color:#fff}.submit[_ngcontent-%COMP%]{border:none;border-radius:10px;padding:7px;background:lightgray;color:#000}.thcol[_ngcontent-%COMP%]{background-color:#0d0dc19e;color:#fff}"]}),n})(),QR=(()=>{class n{constructor(t,r,a,c){this.formbuilder=t,this.http=r,this.router=a,this.dataservice=c}ngOnInit(){this.login=this.formbuilder.group({email:["",[Nl.required]],password:["",[Nl.required]]})}submit(){this.http.get("http://localhost:3000/signup").subscribe(t=>{t.find(a=>a.email===this.login.value.email&&a.password===this.login.value.password)?(alert("success, now you are navigating to the homepage"),this.login.reset(),this.router.navigate(["login/home"]),this.dataservice.isAuthenticated(!0)):(alert("Please Retry "),this.dataservice.isAuthenticated(!1))})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Yp),p.Y36(Wo),p.Y36(Mr),p.Y36(Fp))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:2,consts:[[1,"container"],[1,"row",2,"height","700px"],[1,"col-md-6","con"],[1,"card"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","formControlName","email","id","exampleInputEmail1","aria-describedby","emailHelp","required","",1,"form-control"],["id","emailHelp",1,"form-text"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","password","id","exampleInputPassword1",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"margin","10px",3,"disabled"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"div",2),p.TgZ(3,"div",3),p.TgZ(4,"h3"),p._uU(5,"TimeSheet Application"),p.qZA(),p.TgZ(6,"form",4),p.NdJ("ngSubmit",function(){return r.submit()}),p.TgZ(7,"div",5),p.TgZ(8,"label",6),p._uU(9,"Email address"),p.qZA(),p._UZ(10,"input",7),p.TgZ(11,"div",8),p._uU(12,"We'll never share your email with anyone else."),p.qZA(),p.qZA(),p.TgZ(13,"div",5),p.TgZ(14,"label",9),p._uU(15,"Password"),p.qZA(),p._UZ(16,"input",10),p.qZA(),p.TgZ(17,"button",11),p._uU(18,"Login"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(6),p.Q6J("formGroup",r.login),p.xp6(11),p.Q6J("disabled",!r.login.valid))},directives:[Oy,Up,Mh,Ih,dE,Kp,Fy],styles:[".container[_ngcontent-%COMP%]{margin-top:20px;background-image:url(timesheet.e5eb945ea2a9e493f0e3.jpg);background-repeat:no-repeat;background-attachment:fixed;background-size:cover;height:700px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}h3[_ngcontent-%COMP%]{background-color:#494d64;color:#fff;padding:10px;font-size:large}.mb-3[_ngcontent-%COMP%]{padding-left:10px;padding-top:10px}"]}),n})();function k1(n,e){if(1&n&&(p.TgZ(0,"tr"),p.TgZ(1,"th",12),p._uU(2),p.qZA(),p.TgZ(3,"td"),p._uU(4),p.qZA(),p.TgZ(5,"td"),p._uU(6),p.qZA(),p.TgZ(7,"td"),p._uU(8),p.qZA(),p.TgZ(9,"td"),p._uU(10),p.qZA(),p.TgZ(11,"td"),p._uU(12),p.qZA(),p.qZA()),2&n){const t=e.$implicit,r=e.index;p.xp6(2),p.Oqu(r),p.xp6(2),p.Oqu(t.pname),p.xp6(2),p.Oqu(t.date),p.xp6(2),p.Oqu(t.timework),p.xp6(2),p.Oqu(t.role),p.xp6(2),p.Oqu(t.desc)}}function P1(n,e){if(1&n&&(p.TgZ(0,"tbody"),p.YNc(1,k1,13,6,"tr",11),p.qZA()),2&n){const t=p.oxw();p.xp6(1),p.Q6J("ngForOf",t.templist)}}const F1=[{path:"",component:QR,pathMatch:"full"},{path:"login",component:QR},{path:"login/home",component:vI,canActivate:[Mw]},{path:"login/home/logtime",component:O1},{path:"login/home/showhistory",component:(()=>{class n{constructor(t,r){this.firebase=t,this.location=r,this.datalist=[],this.templist=[]}ngOnInit(){this.getalldata()}getalldata(){this.firebase.getallData().subscribe(t=>{this.datalist=t.map(r=>{const a=r.payload.doc.data();return a.id=r.payload.doc.id,console.log(this.datalist),a})},t=>{alert("incorrect")})}filter(t){this.temp=t,this.datalist.map(r=>{r.date==this.temp&&this.templist.push(r)})}previous(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(KN),p.Y36(ot))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-show-history"]],decls:26,vars:1,consts:[[1,"container","f",2,"margin-top","20px"],[1,"input-group","mb-3",2,"width","300px"],["type","text","placeholder","Enter Date","aria-label","Enter date","aria-describedby","button-addon2",1,"form-control"],["val",""],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"back"],["type","button",2,"border","none","background-color","blueviolet","border-radius","8px","color","white","padding-left","20px","padding-right","20px","padding-top","10px","padding-bottom","10px",3,"click"],[1,"container",2,"margin-top","30px"],[1,"table","table-primary"],["scope","col",1,"thcol"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,r){if(1&t){const a=p.EpF();p.TgZ(0,"div",0),p.TgZ(1,"div",1),p._UZ(2,"input",2,3),p.TgZ(4,"button",4),p.NdJ("click",function(){p.CHM(a);const h=p.MAs(3);return r.filter(h.value)}),p._uU(5,"Search"),p.qZA(),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"button",6),p.NdJ("click",function(){return r.previous()}),p._uU(8,"back"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"div",7),p.TgZ(10,"table",8),p.TgZ(11,"thead"),p.TgZ(12,"tr"),p.TgZ(13,"th",9),p._uU(14,"Sno"),p.qZA(),p.TgZ(15,"th",9),p._uU(16,"Project"),p.qZA(),p.TgZ(17,"th",9),p._uU(18,"Date"),p.qZA(),p.TgZ(19,"th",9),p._uU(20,"Time(hrs)"),p.qZA(),p.TgZ(21,"th",9),p._uU(22,"Role"),p.qZA(),p.TgZ(23,"th",9),p._uU(24,"Description"),p.qZA(),p.qZA(),p.qZA(),p.YNc(25,P1,2,1,"tbody",10),p.qZA(),p.qZA()}2&t&&(p.xp6(25),p.Q6J("ngIf",r.datalist))},directives:[Cr,Gr],styles:[".thcol[_ngcontent-%COMP%]{background-color:#0d0dc19e;color:#fff}.f[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})()},{path:"**",component:QR}];let L1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Wv.forRoot(F1)],Wv]}),n})(),V1=(()=>{class n{constructor(){this.title="FinalTask"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[yy],styles:[""]}),n})();const YN_firebase={projectId:"angular-task-2349f",appId:"1:962220267699:web:75b38c0a73bf1a631ab8c6",storageBucket:"angular-task-2349f.appspot.com",apiKey:"AIzaSyBhE7GZ0_thaLzkcRTtoeULgwJZGumxFww",authDomain:"angular-task-2349f.firebaseapp.com",messagingSenderId:"962220267699"};let U1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[V1]}),n.\u0275inj=p.cJS({providers:[Fp,Mw],imports:[[Ia,L1,_I,sM,fs.hO.initializeApp(YN_firebase)]]}),n})();(0,p.G48)(),al().bootstrapModule(U1).catch(n=>console.error(n))},3394:(qe,ge,P)=>{"use strict";P.d(ge,{Z:()=>we});var p=P(3854),X=P(3910),L=P(8026),ae=P(5422);class re{constructor(he,Ae){this._delegate=he,this.firebase=Ae,(0,L._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(he,Ae=L._DEFAULT_ENTRY_NAME){var Me;this._delegate.checkDestroyed();const De=this._delegate.container.getProvider(he);return!De.isInitialized()&&"EXPLICIT"===(null===(Me=De.getComponent())||void 0===Me?void 0:Me.instantiationMode)&&De.initialize(),De.getImmediate({identifier:Ae})}_removeServiceInstance(he,Ae=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ae)}_addComponent(he){(0,L._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,L._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),F=function te(){const pe=function(pe){const he={},Ae={__esModule:!0,initializeApp:function(Dt,Fe={}){const Ne=L.initializeApp(Dt,Fe);if((0,p.r3)(he,Ne.name))return he[Ne.name];const je=new pe(Ne,Ae);return he[Ne.name]=je,je},app:De,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(Dt){const Fe=Dt.name,Ne=Fe.replace("-compat","");if(L._registerComponent(Dt)&&"PUBLIC"===Dt.type){const je=(et=De())=>{if("function"!=typeof et[Ne])throw _e.create("invalid-app-argument",{appName:Fe});return et[Ne]()};void 0!==Dt.serviceProps&&(0,p.ZB)(je,Dt.serviceProps),Ae[Ne]=je,pe.prototype[Ne]=function(...et){return this._getService.bind(this,Fe).apply(this,Dt.multipleInstances?et:[])}}return"PUBLIC"===Dt.type?Ae[Ne]:null},removeApp:function(Dt){delete he[Dt]},useAsService:function(Dt,Fe){return"serverAuth"===Fe?null:Fe},modularAPIs:L}};function De(Dt){if(!(0,p.r3)(he,Dt=Dt||L._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Dt});return he[Dt]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function(){return Object.keys(he).map(Dt=>he[Dt])}}),De.App=pe,Ae}(re);return pe.INTERNAL=Object.assign(Object.assign({},pe.INTERNAL),{createFirebaseNamespace:te,extendNamespace:function(Ae){(0,p.ZB)(pe,Ae)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),pe}(),V=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=F;(0,L.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(qe,ge,P)=>{"use strict";P.r(ge),P.d(ge,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Es,_DEFAULT_ENTRY_NAME:()=>Vr,_addComponent:()=>fi,_addOrOverwriteComponent:()=>Ys,_apps:()=>nr,_clearComponents:()=>es,_components:()=>br,_getProvider:()=>Gt,_registerComponent:()=>fn,_removeServiceInstance:()=>Ur,deleteApp:()=>wr,getApp:()=>Br,getApps:()=>xe,initializeApp:()=>Un,onLog:()=>vn,registerVersion:()=>cn,setLogLevel:()=>Qs});var p=P(8239),X=P(3910),L=P(5422),ae=P(3854),re=P(4966);class ne{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function(Ge){const ve=Ge.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Re)){const Et=Re.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(Re=>Re).join(" ")}}const ce="@firebase/app",F=new L.Yd("@firebase/app"),Vr="[DEFAULT]",zc={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nr=new Map,br=new Map;function fi(Ge,ve){try{Ge.container.addComponent(ve)}catch(Re){F.debug(`Component ${ve.name} failed to register with FirebaseApp ${Ge.name}`,Re)}}function Ys(Ge,ve){Ge.container.addOrOverwriteComponent(ve)}function fn(Ge){const ve=Ge.name;if(br.has(ve))return F.debug(`There were multiple attempts to register component ${ve}.`),!1;br.set(ve,Ge);for(const Re of nr.values())fi(Re,Ge);return!0}function Gt(Ge,ve){const Re=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),Ge.container.getProvider(ve)}function Ur(Ge,ve,Re=Vr){Gt(Ge,ve).clearInstance(Re)}function es(){br.clear()}const vt=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vn{constructor(ve,Re,Et){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw vt.create("app-deleted",{appName:this._name})}}const Es="9.12.1";function Un(Ge,ve={}){let Re=Ge;"object"!=typeof ve&&(ve={name:ve});const Et=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},ve),Tt=Et.name;if("string"!=typeof Tt||!Tt)throw vt.create("bad-app-name",{appName:String(Tt)});if(Re||(Re=(0,ae.aH)()),!Re)throw vt.create("no-options");const Wt=nr.get(Tt);if(Wt){if((0,ae.vZ)(Re,Wt.options)&&(0,ae.vZ)(Et,Wt.config))return Wt;throw vt.create("duplicate-app",{appName:Tt})}const $=new X.H0(Tt);for(const W of br.values())$.addComponent(W);const j=new Vn(Re,Et,$);return nr.set(Tt,j),j}function Br(Ge=Vr){const ve=nr.get(Ge);if(!ve&&Ge===Vr)return Un();if(!ve)throw vt.create("no-app",{appName:Ge});return ve}function xe(){return Array.from(nr.values())}function wr(Ge){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,p.Z)(function*(Ge){const ve=Ge.name;nr.has(ve)&&(nr.delete(ve),yield Promise.all(Ge.container.getProviders().map(Re=>Re.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function cn(Ge,ve,Re){var Et;let Tt=null!==(Et=zc[Ge])&&void 0!==Et?Et:Ge;Re&&(Tt+=`-${Re}`);const Wt=Tt.match(/\s|\//),$=ve.match(/\s|\//);if(Wt||$){const j=[`Unable to register library "${Tt}" with version "${ve}":`];return Wt&&j.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Wt&&$&&j.push("and"),$&&j.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void F.warn(j.join(" "))}fn(new X.wA(`${Tt}-version`,()=>({library:Tt,version:ve}),"VERSION"))}function vn(Ge,ve){if(null!==Ge&&"function"!=typeof Ge)throw vt.create("invalid-log-argument");(0,L.Am)(Ge,ve)}function Qs(Ge){(0,L.Ub)(Ge)}const jr="firebase-heartbeat-store";let Hr=null;function ei(){return Hr||(Hr=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(Ge,ve)=>{0===ve&&Ge.createObjectStore(jr)}}).catch(Ge=>{throw vt.create("idb-open",{originalErrorMessage:Ge.message})})),Hr}function nt(){return(nt=(0,p.Z)(function*(Ge){var ve;try{return(yield ei()).transaction(jr).objectStore(jr).get(pi(Ge))}catch(Re){if(Re instanceof ae.ZR)F.warn(Re.message);else{const Et=vt.create("idb-get",{originalErrorMessage:null===(ve=Re)||void 0===ve?void 0:ve.message});F.warn(Et.message)}}})).apply(this,arguments)}function tt(Ge,ve){return zn.apply(this,arguments)}function zn(){return(zn=(0,p.Z)(function*(Ge,ve){var Re;try{const Tt=(yield ei()).transaction(jr,"readwrite");return yield Tt.objectStore(jr).put(ve,pi(Ge)),Tt.done}catch(Et){if(Et instanceof ae.ZR)F.warn(Et.message);else{const Tt=vt.create("idb-set",{originalErrorMessage:null===(Re=Et)||void 0===Re?void 0:Re.message});F.warn(Tt.message)}}})).apply(this,arguments)}function pi(Ge){return`${Ge.name}!${Ge.options.appId}`}class Yt{constructor(ve){this.container=ve,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new Ya(Re),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var ve=this;return(0,p.Z)(function*(){const Et=ve.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Io();if(null===ve._heartbeatsCache&&(ve._heartbeatsCache=yield ve._heartbeatsCachePromise),ve._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!ve._heartbeatsCache.heartbeats.some(Wt=>Wt.date===Tt))return ve._heartbeatsCache.heartbeats.push({date:Tt,agent:Et}),ve._heartbeatsCache.heartbeats=ve._heartbeatsCache.heartbeats.filter(Wt=>{const $=new Date(Wt.date).valueOf();return Date.now()-$<=2592e6}),ve._storage.overwrite(ve._heartbeatsCache)})()}getHeartbeatsHeader(){var ve=this;return(0,p.Z)(function*(){if(null===ve._heartbeatsCache&&(yield ve._heartbeatsCachePromise),null===ve._heartbeatsCache||0===ve._heartbeatsCache.heartbeats.length)return"";const Re=Io(),{heartbeatsToSend:Et,unsentEntries:Tt}=function(Ge,ve=1024){const Re=[];let Et=Ge.slice();for(const Tt of Ge){const Wt=Re.find($=>$.agent===Tt.agent);if(Wt){if(Wt.dates.push(Tt.date),Ke(Re)>ve){Wt.dates.pop();break}}else if(Re.push({agent:Tt.agent,dates:[Tt.date]}),Ke(Re)>ve){Re.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:Re,unsentEntries:Et}}(ve._heartbeatsCache.heartbeats),Wt=(0,ae.L)(JSON.stringify({version:2,heartbeats:Et}));return ve._heartbeatsCache.lastSentHeartbeatDate=Re,Tt.length>0?(ve._heartbeatsCache.heartbeats=Tt,yield ve._storage.overwrite(ve._heartbeatsCache)):(ve._heartbeatsCache.heartbeats=[],ve._storage.overwrite(ve._heartbeatsCache)),Wt})()}}function Io(){return(new Date).toISOString().substring(0,10)}class Ya{constructor(ve){this.app=ve,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ve=this;return(0,p.Z)(function*(){return(yield ve._canUseIndexedDBPromise)&&(yield function(Ge){return nt.apply(this,arguments)}(ve.app))||{heartbeats:[]}})()}overwrite(ve){var Re=this;return(0,p.Z)(function*(){var Et;if(yield Re._canUseIndexedDBPromise){const Wt=yield Re.read();return tt(Re.app,{lastSentHeartbeatDate:null!==(Et=ve.lastSentHeartbeatDate)&&void 0!==Et?Et:Wt.lastSentHeartbeatDate,heartbeats:ve.heartbeats})}})()}add(ve){var Re=this;return(0,p.Z)(function*(){var Et;if(yield Re._canUseIndexedDBPromise){const Wt=yield Re.read();return tt(Re.app,{lastSentHeartbeatDate:null!==(Et=ve.lastSentHeartbeatDate)&&void 0!==Et?Et:Wt.lastSentHeartbeatDate,heartbeats:[...Wt.heartbeats,...ve.heartbeats]})}})()}}function Ke(Ge){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ge})).length}fn(new X.wA("platform-logger",ve=>new ne(ve),"PRIVATE")),fn(new X.wA("heartbeat",ve=>new Yt(ve),"PRIVATE")),cn(ce,"0.8.2",""),cn(ce,"0.8.2","esm2017"),cn("fire-js","")},3910:(qe,ge,P)=>{"use strict";P.d(ge,{wA:()=>L,H0:()=>ce});var p=P(8239),X=P(3854);class L{constructor(F,V,Y){this.name=F,this.instanceFactory=V,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(F){return this.instantiationMode=F,this}setMultipleInstances(F){return this.multipleInstances=F,this}setServiceProps(F){return this.serviceProps=F,this}setInstanceCreatedCallback(F){return this.onInstanceCreated=F,this}}const ae="[DEFAULT]";class re{constructor(F,V){this.name=F,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(F){const V=this.normalizeInstanceIdentifier(F);if(!this.instancesDeferred.has(V)){const Y=new X.BH;if(this.instancesDeferred.set(V,Y),this.isInitialized(V)||this.shouldAutoInitialize())try{const K=this.getOrInitializeService({instanceIdentifier:V});K&&Y.resolve(K)}catch(K){}}return this.instancesDeferred.get(V).promise}getImmediate(F){var V;const Y=this.normalizeInstanceIdentifier(null==F?void 0:F.identifier),K=null!==(V=null==F?void 0:F.optional)&&void 0!==V&&V;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(K)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(le){if(K)return null;throw le}}getComponent(){return this.component}setComponent(F){if(F.name!==this.name)throw Error(`Mismatching Component ${F.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=F,this.shouldAutoInitialize()){if("EAGER"===F.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(V){}for(const[V,Y]of this.instancesDeferred.entries()){const K=this.normalizeInstanceIdentifier(V);try{const le=this.getOrInitializeService({instanceIdentifier:K});Y.resolve(le)}catch(le){}}}}clearInstance(F=ae){this.instancesDeferred.delete(F),this.instancesOptions.delete(F),this.instances.delete(F)}delete(){var F=this;return(0,p.Z)(function*(){const V=Array.from(F.instances.values());yield Promise.all([...V.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...V.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(F=ae){return this.instances.has(F)}getOptions(F=ae){return this.instancesOptions.get(F)||{}}initialize(F={}){const{options:V={}}=F,Y=this.normalizeInstanceIdentifier(F.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const K=this.getOrInitializeService({instanceIdentifier:Y,options:V});for(const[le,we]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(le)&&we.resolve(K);return K}onInit(F,V){var Y;const K=this.normalizeInstanceIdentifier(V),le=null!==(Y=this.onInitCallbacks.get(K))&&void 0!==Y?Y:new Set;le.add(F),this.onInitCallbacks.set(K,le);const we=this.instances.get(K);return we&&F(we,K),()=>{le.delete(F)}}invokeOnInitCallbacks(F,V){const Y=this.onInitCallbacks.get(V);if(Y)for(const K of Y)try{K(F,V)}catch(le){}}getOrInitializeService({instanceIdentifier:F,options:V={}}){let Y=this.instances.get(F);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(te=F,te===ae?void 0:te),options:V}),this.instances.set(F,Y),this.instancesOptions.set(F,V),this.invokeOnInitCallbacks(Y,F),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,F,Y)}catch(K){}var te;return Y||null}normalizeInstanceIdentifier(F=ae){return this.component?this.component.multipleInstances?F:ae:F}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(F){this.name=F,this.providers=new Map}addComponent(F){const V=this.getProvider(F.name);if(V.isComponentSet())throw new Error(`Component ${F.name} has already been registered with ${this.name}`);V.setComponent(F)}addOrOverwriteComponent(F){this.getProvider(F.name).isComponentSet()&&this.providers.delete(F.name),this.addComponent(F)}getProvider(F){if(this.providers.has(F))return this.providers.get(F);const V=new re(F,this);return this.providers.set(F,V),V}getProviders(){return Array.from(this.providers.values())}}},5422:(qe,ge,P)=>{"use strict";P.d(ge,{in:()=>X,Yd:()=>_e,Ub:()=>ce,Am:()=>te});const p=[];var X=(()=>{return(F=X||(X={}))[F.DEBUG=0]="DEBUG",F[F.VERBOSE=1]="VERBOSE",F[F.INFO=2]="INFO",F[F.WARN=3]="WARN",F[F.ERROR=4]="ERROR",F[F.SILENT=5]="SILENT",X;var F})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ne=(F,V,...Y)=>{if(V<F.logLevel)return;const K=(new Date).toISOString(),le=re[V];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[le](`[${K}]  ${F.name}:`,...Y)};class _e{constructor(V){this.name=V,this._logLevel=ae,this._logHandler=ne,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in X))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?L[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...V),this._logHandler(this,X.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...V),this._logHandler(this,X.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,X.INFO,...V),this._logHandler(this,X.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,X.WARN,...V),this._logHandler(this,X.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...V),this._logHandler(this,X.ERROR,...V)}}function ce(F){p.forEach(V=>{V.setLogLevel(F)})}function te(F,V){for(const Y of p){let K=null;V&&V.level&&(K=L[V.level]),Y.userLogHandler=null===F?null:(le,we,...pe)=>{const he=pe.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(Me){return null}}).filter(Ae=>Ae).join(" ");we>=(null!=K?K:le.logLevel)&&F({level:X[we].toLowerCase(),message:he,args:pe,type:le.name})}}}},4966:(qe,ge,P)=>{"use strict";P.d(ge,{Lj:()=>We,X3:()=>De});var p=P(8239);let L,ae;const _e=new WeakMap,ce=new WeakMap,te=new WeakMap,F=new WeakMap,V=new WeakMap;let le={get(Fe,Ne,je){if(Fe instanceof IDBTransaction){if("done"===Ne)return ce.get(Fe);if("objectStoreNames"===Ne)return Fe.objectStoreNames||te.get(Fe);if("store"===Ne)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Ae(Fe[Ne])},set:(Fe,Ne,je)=>(Fe[Ne]=je,!0),has:(Fe,Ne)=>Fe instanceof IDBTransaction&&("done"===Ne||"store"===Ne)||Ne in Fe};function he(Fe){return"function"==typeof Fe?function(Fe){return Fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Fe)?function(...Ne){return Fe.apply(Me(this),Ne),Ae(_e.get(this))}:function(...Ne){return Ae(Fe.apply(Me(this),Ne))}:function(Ne,...je){const et=Fe.call(Me(this),Ne,...je);return te.set(et,Ne.sort?Ne.sort():[Ne]),Ae(et)}}(Fe):(Fe instanceof IDBTransaction&&function(Fe){if(ce.has(Fe))return;const Ne=new Promise((je,et)=>{const it=()=>{Fe.removeEventListener("complete",xt),Fe.removeEventListener("error",$e),Fe.removeEventListener("abort",$e)},xt=()=>{je(),it()},$e=()=>{et(Fe.error||new DOMException("AbortError","AbortError")),it()};Fe.addEventListener("complete",xt),Fe.addEventListener("error",$e),Fe.addEventListener("abort",$e)});ce.set(Fe,Ne)}(Fe),((Fe,Ne)=>Ne.some(je=>Fe instanceof je))(Fe,L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Fe,le):Fe)}function Ae(Fe){if(Fe instanceof IDBRequest)return function(Fe){const Ne=new Promise((je,et)=>{const it=()=>{Fe.removeEventListener("success",xt),Fe.removeEventListener("error",$e)},xt=()=>{je(Ae(Fe.result)),it()},$e=()=>{et(Fe.error),it()};Fe.addEventListener("success",xt),Fe.addEventListener("error",$e)});return Ne.then(je=>{je instanceof IDBCursor&&_e.set(je,Fe)}).catch(()=>{}),V.set(Ne,Fe),Ne}(Fe);if(F.has(Fe))return F.get(Fe);const Ne=he(Fe);return Ne!==Fe&&(F.set(Fe,Ne),V.set(Ne,Fe)),Ne}const Me=Fe=>V.get(Fe);function De(Fe,Ne,{blocked:je,upgrade:et,blocking:it,terminated:xt}={}){const $e=indexedDB.open(Fe,Ne),On=Ae($e);return et&&$e.addEventListener("upgradeneeded",Xr=>{et(Ae($e.result),Xr.oldVersion,Xr.newVersion,Ae($e.transaction))}),je&&$e.addEventListener("blocked",()=>je()),On.then(Xr=>{xt&&Xr.addEventListener("close",()=>xt()),it&&Xr.addEventListener("versionchange",()=>it())}).catch(()=>{}),On}function We(Fe,{blocked:Ne}={}){const je=indexedDB.deleteDatabase(Fe);return Ne&&je.addEventListener("blocked",()=>Ne()),Ae(je).then(()=>{})}const ot=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],Ft=new Map;function Dt(Fe,Ne){if(!(Fe instanceof IDBDatabase)||Ne in Fe||"string"!=typeof Ne)return;if(Ft.get(Ne))return Ft.get(Ne);const je=Ne.replace(/FromIndex$/,""),et=Ne!==je,it=Be.includes(je);if(!(je in(et?IDBIndex:IDBObjectStore).prototype)||!it&&!ot.includes(je))return;const xt=function(){var $e=(0,p.Z)(function*(On,...Xr){const Fi=this.transaction(On,it?"readwrite":"readonly");let Vr=Fi.store;return et&&(Vr=Vr.index(Xr.shift())),(yield Promise.all([Vr[je](...Xr),it&&Fi.done]))[0]});return function(Xr){return $e.apply(this,arguments)}}();return Ft.set(Ne,xt),xt}var Fe;le=eO(XN({},Fe=le),{get:(Ne,je,et)=>Dt(Ne,je)||Fe.get(Ne,je,et),has:(Ne,je)=>!!Dt(Ne,je)||Fe.has(Ne,je)})},8239:(qe,ge,P)=>{"use strict";function p(L,ae,re,ne,_e,ce,te){try{var F=L[ce](te),V=F.value}catch(Y){return void re(Y)}F.done?ae(V):Promise.resolve(V).then(ne,_e)}function X(L){return function(){var ae=this,re=arguments;return new Promise(function(ne,_e){var ce=L.apply(ae,re);function te(V){p(ce,ne,_e,te,F,"next",V)}function F(V){p(ce,ne,_e,te,F,"throw",V)}te(void 0)})}}P.d(ge,{Z:()=>X})}},qe=>{qe(qe.s=7621)}]);